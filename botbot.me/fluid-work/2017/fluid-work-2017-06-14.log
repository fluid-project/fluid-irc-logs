b'2017-06-14T14:51:05 <Bosmon7> kasparnet - you\'re clearly far better at addressing feedback than I am at providing it : P
2017-06-14T14:51:50 <kasparnet> haha, well, in your defence, you have to provide a lot more feedback than i have to adress
2017-06-14T15:25:16 * the-t-in-rtf1 joined the channel
2017-06-14T15:27:08 * the-t-in-rtf has quit
2017-06-14T16:01:41 * gtirloni_ is now known as gtirloni
2017-06-14T16:11:11 * avtar joined the channel
2017-06-14T16:41:38 * Caren has quit
2017-06-14T16:59:39 * Caren joined the channel
2017-06-14T17:02:49 * kasparnet has quit
2017-06-14T17:02:54 <Justin_o> kasparnet: i was just hoping to arrange a time for us to meet about the UIO+ settings
2017-06-14T17:02:59 <Justin_o> do you have a time that would be good?
2017-06-14T17:03:46 <cindyli> Bosmon, Bosmon7, simonjb, the middleware we talked this morning is as simple as this - https://pastebin.com/ueGCprdZ
2017-06-14T17:03:58 <cindyli> so, shall we use this approach?
2017-06-14T17:04:12 * kasparnet joined the channel
2017-06-14T17:04:29 <cindyli> and, what do we wanna call this grant type, meaning, the value for "grant_type" parameter
2017-06-14T17:04:51 <Bosmon7> Well, it\'s a bit odd
2017-06-14T17:04:57 <Bosmon7> I\'m not really clear what this buys us
2017-06-14T17:05:20 <Bosmon7> A slightly greater pretence that we have actually implemented a grant type?
2017-06-14T17:05:56 <Bosmon7> I guess somehow we arrange for this middleware to be inserted into the chain at exactly the right point
2017-06-14T17:05:58 <cindyli> this will allow that incoming requests don\'t have to worry about sending in a "password" field
2017-06-14T17:06:42 <cindyli> yes, it would be inserted in btw the validation of client credentials and oauth2orize authorization
2017-06-14T17:07:52 <cindyli> Bosmon7: without this middleware, incoming requests need to have 4 parameters: client_id, client_secret, username and password
2017-06-14T17:08:07 <cindyli> and "password" here doesn\'t make sense
2017-06-14T17:08:27 <cindyli> with this middleware, only other 3 parameters are required
2017-06-14T17:08:30 * kasparnet has quit
2017-06-14T17:13:03 * gtirloni has quit
2017-06-14T17:14:48 * gtirloni joined the channel
2017-06-14T17:16:28 * colinclark has quit
2017-06-14T17:18:06 <cindyli> Bosmon, Bosmon7, simonjb: we have 2 options: 1. with an extra middleware and use GPII own custom grant type to accept 3 parameters; 2. nothing special, continuing with what oauth2orize lib has: accept 4 parameters and explain in the doc that the password field must be sent in with a value of any string but it\'s dummy due to the limitation of oauth2orize lib
2017-06-14T17:18:18 <cindyli> which do you prefer? i\'m ok with either
2017-06-14T17:19:33 <cindyli> or suggestions on other options?
2017-06-14T17:20:00 <simonjb> I guess there\'s a third option: see how much work it would be to add custom grant type support to oauth2orize and implement it, if feasible
2017-06-14T17:26:35 <cindyli> simonjb: then send a pull request to oauth2orize and wait for it to be merged?
2017-06-14T17:27:40 <cindyli> or fork our own division
2017-06-14T17:29:12 <simonjb> cindyli: Implement the feature in our own fork initiallly, make a pull request against the main project, and use our fork until it\'s merged
2017-06-14T17:29:25 <simonjb> I don\'t know how feasible this is but it\'s an option
2017-06-14T17:29:43 <simonjb> and there\'s definitely risk that the main project would reject the work
2017-06-14T17:29:44 <Bosmon7> I think we\'re probably a little pressed for time these days
2017-06-14T17:29:57 <Bosmon7> We should definitely note our support for this feature on the open issue they have
2017-06-14T17:30:07 <Bosmon7> But I think we should go with the "nothing special plus docs" option
2017-06-14T17:30:47 <simonjb> I think that I agree with Bosmon7 -- of the 2 options, I think I prefer the second
2017-06-14T17:31:30 <cindyli> cool. great. thanks guys
2017-06-14T17:44:23 * danayo joined the channel
2017-06-14T17:53:29 * avtar joined the channel
2017-06-14T17:59:20 * colinclark joined the channel
2017-06-14T18:05:43 * simonjb has quit
2017-06-14T18:06:55 * stegru has quit
2017-06-14T18:20:08 * stegru joined the channel
2017-06-14T18:25:23 * stegru has quit
2017-06-14T18:29:21 * avtar joined the channel
2017-06-14T18:33:24 * michelled joined the channel
2017-06-14T18:33:30 * kathy_ joined the channel
2017-06-14T18:44:38 * simonjb joined the channel
2017-06-14T19:02:41 * the-t-in-rtf1 has quit
2017-06-14T19:02:56 * the-t-in-rtf joined the channel
2017-06-14T19:19:37 * cindyli has quit
2017-06-14T19:23:50 * simonjb has quit
2017-06-14T19:24:01 * simonjb joined the channel
2017-06-14T19:36:39 * simonjb joined the channel
2017-06-14T19:45:52 * cindyli joined the channel
2017-06-14T19:45:52 * simonjb has quit
2017-06-14T19:46:41 * stegru joined the channel
2017-06-14T19:47:36 * simonjb joined the channel
2017-06-14T19:48:01 * jhung has quit
2017-06-14T19:58:03 * jhung joined the channel
2017-06-14T20:11:50 * cindyli has quit
2017-06-14T20:17:37 * Caren joined the channel
2017-06-14T20:19:04 * cindyli joined the channel
2017-06-14T20:26:37 * michelled has quit
2017-06-14T20:29:54 * simonjb has quit
2017-06-14T20:31:15 * jhung has quit
2017-06-14T20:36:07 * cindyli has quit
2017-06-14T20:43:08 * simonjb joined the channel
2017-06-14T20:59:15 * simonjb has quit
2017-06-14T21:03:07 * kathy_ has quit
2017-06-14T21:08:27 * clown has quit
2017-06-14T21:09:16 * Caren has quit
2017-06-14T22:05:43 * danayo has quit
2017-06-14T22:09:10 * danayo joined the channel
2017-06-14T22:37:04 * Justin_o has quit
2017-06-14T23:13:49 * danayo has quit
2017-06-14T23:44:02 * colinclark_ joined the channel
2017-06-14T23:44:02 * colinclark_ has quit
2017-06-14T23:46:12 * stegru has quit
'

b'2017-06-14T00:16:09 * colinclark joined the channel
2017-06-14T01:41:55 * michelled has quit
2017-06-14T02:28:16 * jhernandez has quit
2017-06-14T06:53:18 * the-t-in-rtf joined the channel
2017-06-14T07:32:22 * kasparnet joined the channel
2017-06-14T07:36:41 * kasparnet has quit
2017-06-14T07:41:46 * kasparnet joined the channel
2017-06-14T08:19:50 * kasparnet has quit
2017-06-14T08:19:54 * kasparne_ joined the channel
2017-06-14T08:58:39 <the-t-in-rtf> OK, who changed the gpii-bot icon to H.E.R.B.I.E.?
2017-06-14T08:58:48 <the-t-in-rtf> Whoever you are, you are awesome.
2017-06-14T08:59:07 <the-t-in-rtf> Sorry, V.I.N.C.E.N.T.!
2017-06-14T08:59:19 <the-t-in-rtf> Herbie was the Fantastic Four\'s robot.
2017-06-14T09:15:01 * gtirloni joined the channel
2017-06-14T09:48:47 * jhernandez joined the channel
2017-06-14T10:04:27 * stegru joined the channel
2017-06-14T10:17:27 * jhernandez has quit
2017-06-14T12:04:13 * the-t-in-rtf has quit
2017-06-14T12:05:49 * michelled joined the channel
2017-06-14T12:17:57 * Justin_o joined the channel
2017-06-14T12:38:54 * cindyli joined the channel
2017-06-14T12:44:42 * the-t-in-rtf joined the channel
2017-06-14T12:57:26 * jessm joined the channel
2017-06-14T13:06:28 * jhung joined the channel
2017-06-14T13:06:45 * jhernandez joined the channel
2017-06-14T13:17:37 * Bosmon7 has quit
2017-06-14T13:35:10 * the-t-in-rtf has quit
2017-06-14T13:35:24 * the-t-in-rtf joined the channel
2017-06-14T13:39:13 * jhung is now known as jhung_away
2017-06-14T13:46:49 * simonjb joined the channel
2017-06-14T13:47:17 * Bosmon7 joined the channel
2017-06-14T13:52:59 * Caren joined the channel
2017-06-14T13:53:24 <cindyli> Bosmon, Bosmon7, simonjb, there\'s one issue I\'d like to discuss with you. as you know, I\'m working on the auth server to add the support for oauth2 resource owner password credentials grant. more specifically, i\'m implementing step 2 & 3 in this design - https://wiki.gpii.net/w/Designs_of_Using_a_Dedicated_Process_to_Protect_the_Client_Secret_Assigned_to_GPII_Local_Installation#Workflow
2017-06-14T13:53:51 <cindyli> according to oauth2 spec, the step 2 expects 4 request parameters: client_id, client_secret, username and password
2017-06-14T13:54:25 <Bosmon7> Argh, an OAuth 2 question
2017-06-14T13:54:27 <cindyli> in terms of username and password, GPII only needs to provide one value of GPII token
2017-06-14T13:54:32 <Bosmon7> From the person most qualified to answer them : P
2017-06-14T13:54:39 <cindyli> not really an oauth2 question
2017-06-14T13:55:33 <cindyli> what i\'m thinking is to have "username" being sent in with the GPII token, and "password" value can be empty
2017-06-14T13:56:09 <cindyli> btw, "password" is a required parameter so we cannot dismiss it
2017-06-14T13:56:16 <Bosmon7> Required by whom!
2017-06-14T13:56:23 <cindyli> required by oauth2 spec
2017-06-14T13:57:00 <Bosmon7> I didn\'t know that the spec really specified anything : P
2017-06-14T13:57:02 <cindyli> here\'s the spec for resource owner grant request parameters: https://tools.ietf.org/html/rfc6749#section-4.3.1
2017-06-14T13:57:44 <cindyli> we are using "oauth2orize" library to support all kinds of oauth2 grant types
2017-06-14T13:57:57 <Bosmon7> Yes, I see
2017-06-14T13:58:23 <cindyli> and this libray requires the "password" param must have a value
2017-06-14T13:58:37 <cindyli> https://github.com/jaredhanson/oauth2orize/blob/master/lib/exchange/password.js#L90
2017-06-14T13:58:37 <Bosmon7> Is this therefore the wrong grant type?
2017-06-14T13:59:10 <cindyli> nah, i believe we are using the correct grant type, but our use case is slightly different
2017-06-14T13:59:44 <cindyli> in our use case, gpii tokens represent "username + password" in the grant
2017-06-14T14:01:05 <cindyli> back to the "oauth2orize" library, it requires the "password" field to have a value, this value could be an empty string or anything, but cannot be a null, which is treated as "undefined" and will not pass the validation in this library
2017-06-14T14:01:24 <Bosmon7> How does the GPII token represent username + password?
2017-06-14T14:02:05 * colinclark joined the channel
2017-06-14T14:02:06 <cindyli> the combination of username and password is the user credential that\'s to identify this user
2017-06-14T14:02:21 <cindyli> in our case, GPII token is for that
2017-06-14T14:02:52 <Bosmon7> Well, I understand what you are saying in abstract
2017-06-14T14:02:56 <Bosmon7> But I wonder what is happening in detail
2017-06-14T14:03:05 <Bosmon7> Because clearly this is a GPII user token like any other
2017-06-14T14:04:10 <cindyli> what do you mean "in detail"?
2017-06-14T14:04:44 <Bosmon7> It does seem a little odd to be using a grant type named "password" when there is no password
2017-06-14T14:04:52 * michelled joined the channel
2017-06-14T14:05:00 <Bosmon7> Well, by "in detail" I mean, obviously the GPII token doesn\'t actually represent a username + password at all
2017-06-14T14:05:10 * danayo joined the channel
2017-06-14T14:05:12 <cindyli> i see
2017-06-14T14:05:13 <Bosmon7> Not in the wider sense - it is just a token
2017-06-14T14:05:40 <Bosmon7> I know I am being a bit dim, and that we could just carry on with a dummy password or something
2017-06-14T14:05:52 <Bosmon7> But it would be nice to understand in detail the analogy between this use of the grant workflow and the intended one
2017-06-14T14:06:02 <Bosmon7> How, exactly, is it that the password has "gone missing"?
2017-06-14T14:06:49 <cindyli> oauth2 spec says: The resource owner password credentials grant type is suitable in
2017-06-14T14:06:49 <cindyli> cases where the resource owner has a trust relationship with the
2017-06-14T14:06:49 <cindyli> client, such as the device operating system or a highly privileged application.
2017-06-14T14:07:09 <cindyli> i think this fits our use case
2017-06-14T14:07:22 <Bosmon7> How, exactly?
2017-06-14T14:07:23 <cindyli> but i agree with you it\'s odd to have a missing password
2017-06-14T14:07:43 <Bosmon7> Sorry to be dim again, but who exactly is the "resource owner" in this case, and what constitutes their trust relationship with the client?
2017-06-14T14:07:58 <cindyli> the resource owner is the user doing the key in and key out
2017-06-14T14:08:16 <cindyli> the trusted client is our GPII app installed on the user\'s device
2017-06-14T14:08:37 <Bosmon7> Ah wow
2017-06-14T14:08:40 <Bosmon7> I\'m glad I asked :)
2017-06-14T14:09:01 <Bosmon7> If I had been asked this question during a security review, I would have given completely the wrong answer :)
2017-06-14T14:09:11 <cindyli> haha
2017-06-14T14:09:36 <cindyli> do you think this grant fits our use case?
2017-06-14T14:10:30 <Bosmon7> I don\'t know yet
2017-06-14T14:10:45 <Bosmon7> I am busy pointing at the screen, repeating to myself fragments like "The trust client *IS*..."
2017-06-14T14:10:50 <Bosmon7> trusted client
2017-06-14T14:11:30 <Bosmon7> Have we used this grant type elsewhere in our workflow in its more accepted sense?
2017-06-14T14:11:38 <cindyli> no
2017-06-14T14:11:38 <Bosmon7> So perhaps I could get a better sense of what the analogy is like?
2017-06-14T14:11:46 <Bosmon7> ok
2017-06-14T14:12:00 <Bosmon7> I mean, elsewhere anywhere in our architecture
2017-06-14T14:12:10 <cindyli> not yet
2017-06-14T14:12:32 <cindyli> this is the first time we bring in this grant type into PGII
2017-06-14T14:12:33 <cindyli> GPII
2017-06-14T14:13:10 <Bosmon7> Well ok
2017-06-14T14:13:38 <cindyli> shall i carry on with my question?
2017-06-14T14:14:02 <cindyli> my question is basically how we should deal with and document this "password" field
2017-06-14T14:14:32 <cindyli> it\'s not really needed as the gpii token has been provided by the "username" field
2017-06-14T14:14:55 <cindyli> shall we let the client sends in the same gpii token in the "password" field?
2017-06-14T14:15:12 <cindyli> shall it be an whitespace, or any random string?
2017-06-14T14:15:24 <cindyli> and we\'ll need to explain this in the documentation
2017-06-14T14:19:07 * mrtyler joined the channel
2017-06-14T14:20:54 <Bosmon7> cindyli - sure
2017-06-14T14:21:10 <Bosmon7> Well, my first thought was to wonder whether this might be better handled through implementing a custom grant type
2017-06-14T14:21:18 <Bosmon7> But then I didn\'t find anything in the oauth2orize documentation about how to do this
2017-06-14T14:21:58 <cindyli> i was thinking about that too, reading "extension grants" section - https://tools.ietf.org/html/rfc6749#section-4.5
2017-06-14T14:22:24 <simonjb> and https://tools.ietf.org/html/rfc6749#section-8.3
2017-06-14T14:23:24 <cindyli> simonjb: thanks, read about that too, but it seems that process is to register new grant type with oauth2 committee, instead of creating an own customized grant
2017-06-14T14:23:44 <cindyli> the spec says: they MUST be registered in the OAuth Parameters registry as described
2017-06-14T14:23:44 <cindyli> by https://tools.ietf.org/html/rfc6749#section-11.2
2017-06-14T14:24:26 <simonjb> "_If_ the extension grant type requires additional token endpoint parameters"
2017-06-14T14:24:48 <simonjb> do we need additional token endpoint parameters?
2017-06-14T14:25:04 <cindyli> we need less parameters :)
2017-06-14T14:25:39 <simonjb> indeed :) maybe it\'s enough to use a custom grant_type
2017-06-14T14:26:12 <simonjb> but we should look at oauth2orize to see if we can extend easily with custom grant_type
2017-06-14T14:26:23 <Bosmon7> My quick pass showed nothing in the docs or examples
2017-06-14T14:26:24 <cindyli> either way, very likely we won\'t be able to use "oauth2orize" library to support the custom grant
2017-06-14T14:27:22 <simonjb> https://github.com/jaredhanson/oauth2orize/issues/202
2017-06-14T14:28:51 <cindyli> good finding. same requirement from other ppl
2017-06-14T14:29:09 * danayo joined the channel
2017-06-14T14:29:55 * clown joined the channel
2017-06-14T14:32:08 * kasparne_ has quit
2017-06-14T14:32:50 * kasparnet joined the channel
2017-06-14T14:33:58 <Bosmon7> Ok
2017-06-14T14:34:05 <Bosmon7> Well then, I guess this answers our question
2017-06-14T14:34:31 <Bosmon7> We can site this open issue as we continue to use a somewhat inappropriate grant type with a fixed dummy password
2017-06-14T14:34:43 <Bosmon7> The password may as well be "dummy password" or so : P
2017-06-14T14:35:45 <cindyli> i\'m thinking to add a middleware action to set the dummy password before the request reaches the "oauth2orize" library
2017-06-14T14:36:25 <cindyli> of course, with the code comment pointing to this open issue for why this action is needed
2017-06-14T14:36:36 <simonjb> just for that one particular endpoint, cindyli?
2017-06-14T14:37:02 <cindyli> yes, simonjb, this action can check the "grant_type" value
2017-06-14T14:37:41 <cindyli> that endpoint /access_token is shared by all oauth2 grant types for requesting an access token
2017-06-14T14:38:02 <cindyli> so, need to be carefully not be disturb other grant types
2017-06-14T14:38:38 <simonjb> ok, so here\'s a wacky idea maybe -- implement our new grant_type as middleware that rewrites it to the username-password-credentials type plus dummy password before oauth2orize sees it?
2017-06-14T14:39:04 <cindyli> right
2017-06-14T14:39:12 <simonjb> that is, go ahead and use a custom grant_type
2017-06-14T14:39:28 <simonjb> but modify it before oauth2orize sees it
2017-06-14T14:39:54 <simonjb> the middleware checks for the custom grant_type value
2017-06-14T14:40:17 <Bosmon7> wow
2017-06-14T14:40:31 <Bosmon7> How does middleware rewrite or modify things?
2017-06-14T14:40:53 <cindyli> i don\'t know yet. need to look it up ;)
2017-06-14T14:42:24 * jhung joined the channel
2017-06-14T14:44:53 * gtirloni_ joined the channel
2017-06-14T14:46:54 <Bosmon7> Sorry kasparnet I got distracted halfway my review since there is a lot going on here : P
2017-06-14T14:47:13 <kasparnet> no worries Bosmon7
2017-06-14T14:47:23 <kasparnet> I addressed the first part of your comments
2017-06-14T14:48:15 * gtirloni has quit
2017-06-14T14:50:15 <Justin_o> jessm: here\'s some info on the swac program i was mentioning http://www.tdsb.on.ca/HighSchool/GoingtoHighSchool/SpecializedSchoolsandPrograms/SchoolWithinaCollege.aspx
2017-06-14T14:50:30 <jessm> ah, thanks Justin_o !
2017-06-14T14:50:31 <Justin_o> jessm: there\'s a video about it here as well https://sites.google.com/a/tdsb.on.ca/ssl18/swac
'

