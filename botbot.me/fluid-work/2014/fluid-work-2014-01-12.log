b'2014-01-12T22:53:14 <Bosmon> colinclark - I also get Bad Gateway from the rbmm
2014-01-12T22:53:20 <colinclark> ok
2014-01-12T22:53:34 <kasparnet> colinclark: shit - sorry to hear that ... not seeing nick/clauda or andy here, I\'ll blame them for that :)
2014-01-12T22:53:59 <colinclark> they\'ve all been very helpful
2014-01-12T22:54:45 <colinclark> Bosmon: No, I think you are correct
2014-01-12T22:55:05 <Justin_o_> cindyli: I have to go again. i\'m not sure I\'ll be able to come back online tonight. I didn\'t really get anywhere with the save button in pcp :(
2014-01-12T22:55:10 <Bosmon> colinclark - change all of them?
2014-01-12T22:55:12 <colinclark> yzen: We\'re still confused, I\'m sorry to distract you
2014-01-12T22:55:33 <cindyli> Justin_o_: i know, that\'s not a easy task
2014-01-12T22:55:36 <colinclark> but is it correct that in the case of matchmaker/configs/production.json and development.json, the matchmaker server will bind to port 8080?
2014-01-12T22:55:37 <yzen> colinclark: np
2014-01-12T22:55:53 <colinclark> Justin_o_: You\'ve been an immense help
2014-01-12T22:55:57 <colinclark> Don\'t sweat it
2014-01-12T22:56:24 <colinclark> Justin_o_: Just before you leave, does kasparnet have everything he needs to run the PCP/PMT as it is currently implemented?
2014-01-12T22:56:29 <colinclark> is there anything he needs to know?
2014-01-12T22:58:00 <yzen> so colinclark neither production nor development is used when we deploy proxy.json
2014-01-12T22:58:06 <colinclark> right
2014-01-12T22:58:18 <colinclark> but if we\'re changing one configuration, does it make sense to change them all to not bind on 8080?
2014-01-12T22:58:34 <colinclark> assuming in production and development, there is indeed a server that binds on 8080?
2014-01-12T22:58:34 <colinclark> I guess that\'s the part I\'m still fuzzy on
2014-01-12T23:00:23 <yzen> colinclark: it probably makes sense but that won\'t make avtar\'s life easier with deployment i guess
2014-01-12T23:00:26 <Justin_o_> colinclark: thanks.. and I replied to one or your e-mails yesterday with the info about the node based web server i used to run the PMT/PCP. Although he could use any he likes.. Also i\'m not sure if he knows that we created a new demo in the demos/prefsEditors directory for the review
2014-01-12T23:01:36 <colinclark> kasparnet: ^^
2014-01-12T23:02:10 <avtar> colinclark: just saw your bad gateway message
2014-01-12T23:02:15 <colinclark> ok, thanks for clarifying, yzen
2014-01-12T23:02:41 <avtar> my bad
2014-01-12T23:02:53 <avtar> development.json uses port 80
2014-01-12T23:02:54 <avtar> one sec
2014-01-12T23:03:36 <colinclark> ok
2014-01-12T23:03:36 <avtar> colinclark: please try again
2014-01-12T23:03:43 <colinclark> ok
2014-01-12T23:03:45 <Justin_o_> good everyone and good luck
2014-01-12T23:03:51 <colinclark> thanks, Justin_o_
2014-01-12T23:03:54 <colinclark> You are amazing
2014-01-12T23:03:59 <colinclark> I really, really appreciate all your hard work
2014-01-12T23:04:12 <Justin_o_> thanks, sorry i couldn\'t do more.. hit a bunch of walls today :(
2014-01-12T23:04:20 <colinclark> Hey, you did great
2014-01-12T23:04:29 <avtar> stand tall, gentle justin
2014-01-12T23:04:44 <kasparnet> yeah - thanks Justin_o_! I\'ll try everything out tonight
2014-01-12T23:04:46 <colinclark> avtar: Can you see what the CPU is up to on that RBMM box?
2014-01-12T23:04:51 <colinclark> this request is SLOOOOW
2014-01-12T23:05:14 <colinclark> 504 Gateway Time-out
2014-01-12T23:05:28 <Justin_o_> colinclark: thanks
2014-01-12T23:05:40 <avtar> colinclark: interesting. i just saw this "fs: missing callback Error: EACCES, mkdir \'/logs\'"
2014-01-12T23:05:52 <colinclark> kasparnet: Just so you have this, here\'s how to manually PROBE a matchmaker with curl: http://pastebin.com/hckBZxZQ
2014-01-12T23:05:55 <avtar> which wasn\'t being reported earlier
2014-01-12T23:05:56 <avtar> one sec
2014-01-12T23:05:59 <yzen> Bosmon: sweet :)
2014-01-12T23:06:02 <Bosmon> colinclark - I\'ve issued my pull request
2014-01-12T23:06:05 <Bosmon> to the review2 branch
2014-01-12T23:06:15 <colinclark> thanks Bosmon
2014-01-12T23:06:17 <Bosmon> I have omitted changes to the base ports for the matchmakers
2014-01-12T23:06:20 <colinclark> have a great chat with Clayton
2014-01-12T23:06:20 <Bosmon> I will be off to TTEA now
2014-01-12T23:06:24 <Bosmon> Back in perhaps 90 mins
2014-01-12T23:06:28 <colinclark> cool
2014-01-12T23:06:36 <colinclark> So kasparnet, we\'re just about on the verge of a working system
2014-01-12T23:06:53 <colinclark> We believe the STMM is now deployed correctly, but michelled was unable to get her Windows system working to test it
2014-01-12T23:06:54 <Justin_o_> kasparnet: great.. hope you get it working.. and cindy is doing some more work now to try to get the pcp working a bit better.
2014-01-12T23:07:10 <colinclark> Bosmon\'s pull request should configure the Flow Manager correctly for both Matchmakers
2014-01-12T23:07:11 <kasparnet> thanks Justin_o_
2014-01-12T23:07:22 <colinclark> it looks like we need to resolve a small issue with the RBMM right now
2014-01-12T23:07:34 <yzen> Bosmon: kasparnet colinclark ill be back in 45min
2014-01-12T23:07:48 <colinclark> thanks, yzen
2014-01-12T23:07:55 <colinclark> but I think it may fall to you to verify that, in practice, your preferences sets work with both MMs
2014-01-12T23:08:19 <colinclark> you\'ll note that Bosmon\'s pull request also corrects the matchmaker preference for some of these key preference sets
2014-01-12T23:08:20 <kasparnet> avtar, colinclark: yeah - I seem to remember nick mentioning something about the /logs dir (that one might have to create it manually) - perhaps it was on his github page
2014-01-12T23:08:33 <colinclark> but you\'ll need to double-check them
2014-01-12T23:09:01 <colinclark> avtar: https://github.com/NickKaklanis/RuleBased_MatchMaker
2014-01-12T23:09:17 <colinclark> "When executing the Rule-based MatchMaker, a new directory (/logs) is automatically created. If there are limited permissions, an exception will be thrown. In this case, try to manually create the "logs" directory at the root of the hard drive."
2014-01-12T23:09:17 <kasparnet> colinclark: yeah - I was going to do that anyway
2014-01-12T23:09:27 * cindyli has quit
2014-01-12T23:09:34 <avtar> oh wow
2014-01-12T23:09:36 <avtar> that\'s horrible
2014-01-12T23:09:36 <michelled> kasparnet, colinclark: I\'m off to a play soon. I\'ll be back online when I get back. kasparnet, I guess the issues I was seeing on my windows box yesterday were environmental. I\'ll need to look more deeply into how it\'s setup.
2014-01-12T23:09:37 <kasparnet> (actually I was going to have andy and claudia do it, but I\'m not sure they\'re gonna see their mail tonight)
2014-01-12T23:09:53 <colinclark> ok
2014-01-12T23:09:55 <colinclark> avtar: yes
2014-01-12T23:10:04 <colinclark> yes it is
2014-01-12T23:10:12 <kasparnet> i +1 that
2014-01-12T23:10:20 * michelled has quit
2014-01-12T23:11:14 <colinclark> avtar: if this ends up being too awful or fatal, we can just go with their version of the RBMM
2014-01-12T23:11:30 <avtar> well
2014-01-12T23:12:05 <avtar> i created /logs and it\'s owned by the nodejs user account
2014-01-12T23:12:32 <colinclark> shall I try again?
2014-01-12T23:12:47 <avtar> sure
2014-01-12T23:13:07 <colinclark> SUCCESS
2014-01-12T23:13:19 <colinclark> and it\'s about 1000x faster than the other server
2014-01-12T23:13:30 <colinclark> kasparnet: I\'m curious about network latency from Lux
2014-01-12T23:13:34 <colinclark> can you do me a quick favour?
2014-01-12T23:13:45 <colinclark> can you compare the speeds of curling to both servers?
2014-01-12T23:13:52 <colinclark> curl -X POST -d "@mmpost.txt" http://160.40.50.130/match --header "Content-Type:application/json"
2014-01-12T23:13:59 <avtar> you  know what
2014-01-12T23:13:59 <colinclark> and curl -X POST -d "@mmpost.txt" http://rbmm.gpii.net/match--header "Content-Type:application/json"
2014-01-12T23:14:02 <colinclark> what?
2014-01-12T23:14:11 <avtar> they probably either ran this as root or /logs was world writeable
2014-01-12T23:14:17 <colinclark> yes
2014-01-12T23:14:30 <avtar> because i think the java app wants to write to that directory as well
2014-01-12T23:14:34 <colinclark> I would not be even the tiniest bit surprised
2014-01-12T23:20:20 <colinclark> avtar: So the preferences server is now deployed too, right?
2014-01-12T23:20:31 <avtar> yes
2014-01-12T23:20:32 <colinclark> we\'ve got STMM and RBMM running nicely
2014-01-12T23:20:40 <avtar> nicely heh
2014-01-12T23:20:48 <colinclark> ;)
2014-01-12T23:20:49 <colinclark> Cloud-Based Flow Manager, what about him?
2014-01-12T23:21:01 <avtar> the java process does spike processor usage up to 99%
2014-01-12T23:21:06 <colinclark> lol
2014-01-12T23:21:44 <avtar> we might not be able to fit all this on one droplet
2014-01-12T23:22:53 <avtar> regarding flowmanager, i think i\'m waiting on a configuration
2014-01-12T23:23:27 <colinclark> the one from Bosmon?
2014-01-12T23:23:42 <avtar> yes
2014-01-12T23:24:49 <kasparnet> avtar: shit man -- that\'s quite the difference in server speed
2014-01-12T23:25:28 <colinclark> avtar: I\'ll review and push that change to the review2 branch now
2014-01-12T23:25:30 <colinclark> and then we can test it out
2014-01-12T23:29:04 <avtar> kasparnet: nothing but the best for you
2014-01-12T23:33:17 <colinclark> avtar: I\'ll be a bit slow in getting that pull in
2014-01-12T23:33:20 <colinclark> gregg is on the phone
2014-01-12T23:37:21 <avtar> no worries
2014-01-12T23:37:57 <avtar> i\'m going to tackle tony\'s tasks until you get back
2014-01-12T23:38:14 <colinclark> ok
2014-01-12T23:49:54 * yzen has quit
2014-01-12T23:59:24 * cindyli joined the channel
'

b'2014-01-12T22:12:45 <Bosmon> I will produce a pull request of such a kind
2014-01-12T22:12:54 <colinclark> But I\'m worried about one thing
2014-01-12T22:13:02 <colinclark> what about non-cloud-based flow managers?
2014-01-12T22:13:16 <colinclark> don\'t they also use a Matchmaker Proxy
2014-01-12T22:13:17 <colinclark> ?
2014-01-12T22:13:24 <colinclark> presumably it\'s defined locally
2014-01-12T22:13:25 <Bosmon> I\'m not sure I even understand the term "cloudBased"
2014-01-12T22:13:31 <Bosmon> So you will have to unpack this question :)
2014-01-12T22:13:40 <colinclark> it\'s an instance of the Flow Manager that runs entirely on a server
2014-01-12T22:14:05 <colinclark> Such that a web application or a Java "simple phone" or other non-native-local-Flow Manager device can be personalized
2014-01-12T22:14:26 <Bosmon> So by my reading, all the other configurations take their port numbers from "base.json"
2014-01-12T22:14:34 <colinclark> Very soon, we will cut off direct access to the Preferences Server by clients who aren\'t the Flow Manager or the preferences editors
2014-01-12T22:14:35 <Bosmon> Which causes them all to form a single server, listening on port 8081
2014-01-12T22:14:41 <colinclark> ok
2014-01-12T22:14:51 <colinclark> meaning they\'re all running locally within that flow manager instance
2014-01-12T22:15:13 <Bosmon> This is what I seem to understand
2014-01-12T22:15:15 <colinclark> I\'m not entirely sure why the Cloud-Based instance doesn\'t use this same approach
2014-01-12T22:15:22 <colinclark> with the exception, of course, of the MMs themselves
2014-01-12T22:18:01 <colinclark> Bosmon: Are you okay to make this pull request?
2014-01-12T22:18:18 <Bosmon> colinclark - yes
2014-01-12T22:18:27 <colinclark> thanks
2014-01-12T22:18:28 <Bosmon> I will also correct those profiles which make corrupt references to the statistical matchmaker
2014-01-12T22:18:33 <colinclark> thanks
2014-01-12T22:18:44 <colinclark> Assuming that squares us away at least until michelled can test that the STMM is indeed working correctly on Windows
2014-01-12T22:18:50 <colinclark> which means I will head back to my slow demo
2014-01-12T22:19:02 <colinclark> and stop panicking :)
2014-01-12T22:21:00 <Bosmon> colinclark - what am I to bind the reference to the rulebased matchmaker onto?
2014-01-12T22:21:26 <colinclark> in the preference sets or in proxy.json?
2014-01-12T22:21:34 <Bosmon> !!!!
2014-01-12T22:21:47 <colinclark> four exclamation marks!
2014-01-12T22:21:55 <colinclark> here\'s five
2014-01-12T22:21:57 <colinclark> IIIII
2014-01-12T22:22:04 <Bosmon> 1111111!
2014-01-12T22:22:15 <colinclark> here are some pipes
2014-01-12T22:22:16 <colinclark> |||||||
2014-01-12T22:22:25 <Bosmon> ONEONEONEONEONEONEONEONEONE!
2014-01-12T22:22:39 <Bosmon> so, I\'m not sure what you meant, "in the preference sets"
2014-01-12T22:22:49 <Bosmon> But I did mean proxy.json
2014-01-12T22:22:59 <colinclark> rbmm.gpii.net port 80
2014-01-12T22:23:06 <Bosmon> thanks
2014-01-12T22:23:09 <colinclark> presumably once Avtar redeploys it in development mode, it will actually work
2014-01-12T22:23:50 <colinclark> I guess we should also make a pull request to Andy\'s STMM repo once we\'ve confirmed that it works
2014-01-12T22:24:06 <colinclark> But I am going to stop, now, being that guy who lists things that need to get done
2014-01-12T22:24:17 <Bosmon> It\'s a completely vital function
2014-01-12T22:24:28 <Bosmon> Woe betide us if we ever find ourselves devoid of a guy who lists things that need to get done
2014-01-12T22:25:14 * michelled joined the channel
2014-01-12T22:26:31 <colinclark> michelled is back!
2014-01-12T22:26:35 <colinclark> how was your late late lunch?
2014-01-12T22:27:02 <michelled> it is good :)
2014-01-12T22:27:18 <michelled> so, I hate to ask this again, but what version of node and npm should I have?
2014-01-12T22:27:35 <michelled> I\'ve got 0.8.23 and 1.2.18
2014-01-12T22:27:58 <michelled> and npm is complaining with the clean review branch
2014-01-12T22:29:04 <colinclark> that should be just fine on windows, michelled
2014-01-12T22:29:08 <colinclark> complaining how?
2014-01-12T22:31:08 <Bosmon> colinclark - I have been trying to prepare the pull request, but have unfortunately run into something mysterious
2014-01-12T22:31:15 <colinclark> oh, ok
2014-01-12T22:31:17 <colinclark> what is it?
2014-01-12T22:31:19 <Bosmon> In that it seems that a server corresponding to the "matchMakerProxy" is never started
2014-01-12T22:31:41 <Bosmon> I don\'t see any log messages for it, and netstat shows no server listening either on the port I chose (8083) or the default port 8080
2014-01-12T22:31:42 <colinclark> which config are you testing with?
2014-01-12T22:31:51 <Bosmon> multipleMatchMakers
2014-01-12T22:32:05 <colinclark> yzen: Does this mean anything to you? ^
2014-01-12T22:32:30 <colinclark> Are we doing some kind of local dispatch in this configuration instead? As I always dreamed we might?
2014-01-12T22:32:33 <michelled> colinclark: http://pastie.org/8627616
2014-01-12T22:32:57 <colinclark> michelled: Can you find out which package has the wrong version number>?
2014-01-12T22:33:13 <colinclark> perhaps it\'s listed in C:\\Users\\colin\\code\\gpii\\windows\
pm-debug.log
2014-01-12T22:34:15 <yzen> Bosmon: are you actually modifying multipleMatchMakers? because that is not what avtar will be deploying
2014-01-12T22:34:35 <Bosmon> yzen - I modifying proxy.json
2014-01-12T22:34:41 <avtar> Bosmon, colinclark, yzen: rbmm is running development mode now
2014-01-12T22:34:42 <Bosmon> In order to add a port number to the matchMakerProxy server
2014-01-12T22:34:46 <Bosmon> But actually I see no such server starting up
2014-01-12T22:35:18 <colinclark> thank you, avtar
2014-01-12T22:36:07 <yzen> Bosmon: let met try
2014-01-12T22:36:23 <Bosmon> yzen - thanks
2014-01-12T22:36:32 <Bosmon> I\'ll commit my pull request anyway, since it seems to be working
2014-01-12T22:36:35 <Bosmon> But not for reasons I can understand
2014-01-12T22:36:42 <colinclark> ok
2014-01-12T22:36:54 <Bosmon> So which config will avtar be deploying, if not this one?
2014-01-12T22:37:00 <colinclark> michelled: Bosmon\'s pull request may help with your testing, in that it sets up proxy.json for you
2014-01-12T22:37:12 <colinclark> cloudBased, Bosmon
2014-01-12T22:37:19 <yzen> Bosmon: he will deploy 2 proxy for match maker and cloudBased for flowmanager
2014-01-12T22:37:25 <yzen> ports in both need to be in sync
2014-01-12T22:39:09 <yzen> so Bosmon when i do NODE_ENV=proxy node node_modules/kettle/lib/init.js gpii/node_modules/matchMaker/configs/ i see in log
2014-01-12T22:39:10 <yzen> 17:28:06.761:   Kettle Server is running on port:  8080
2014-01-12T22:39:12 <yzen> 17:28:06.761:   Firing event onListen of component with typename kettle.server and id 8stdvg62-7 to list of 1 listeners
2014-01-12T22:39:13 <yzen> 17:28:06.762:   Kettle Server is running on port:  8079
2014-01-12T22:39:13 <yzen> 17:28:06.762:   Firing event onListen of component with typename kettle.server and id 8stdvg62-39 to list of 1 listeners
2014-01-12T22:39:50 <Bosmon> yzen - never had any idea about NODE_ENV=proxy since I don\'t see such an entry in gpii/configs
2014-01-12T22:39:50 <Bosmon> How does this work?
2014-01-12T22:40:32 <Bosmon> Ah I see, it is just a standalone matchmaker
2014-01-12T22:40:42 <yzen> Bosmon: yes
2014-01-12T22:40:48 <Bosmon> But my question is, why do I not see this server start up when I fire up multipleMatchMakers
2014-01-12T22:41:14 <Bosmon> Since as far as I see, that one includes matchMaker/configs/proxy.json
2014-01-12T22:41:22 <yzen> Bosmon: because in that config it is hosted alongside the flowManager
2014-01-12T22:41:26 <yzen> the same server
2014-01-12T22:41:28 <yzen> instance
2014-01-12T22:41:58 <Bosmon> yzen - how does it know to to do that, and ignore the server material in proxy.json?
2014-01-12T22:43:07 <yzen> Bosmon: because of how configs become grades for the top level config grade
2014-01-12T22:43:21 <Bosmon> I see
2014-01-12T22:43:25 <yzen> so the server subcomponent material is just merged without change
2014-01-12T22:44:35 <colinclark> So, Andy just responded
2014-01-12T22:44:45 <colinclark> with an answer that is worrisome
2014-01-12T22:45:13 <colinclark> Oh, thanks for that. I must admit that I just tried to redo what yura set up for the rbmm, without a documentation what those functions actually do =^^= Yep, the version of the smm (there are 2) that we send to the review requires the transformers. I thought that the matchpost function does that.
2014-01-12T22:45:14 <Bosmon> He just sent a followup
2014-01-12T22:45:22 <colinclark> PHEW
2014-01-12T22:45:23 <colinclark> thank you
2014-01-12T22:45:39 <colinclark> ok
2014-01-12T22:45:52 <colinclark> well, if michelled is able to overcome her environmental difficulties, I think we\'re very very close
2014-01-12T22:46:03 <colinclark> I guess we still need to PROBE the RBMM
2014-01-12T22:46:10 <colinclark> which I can do right now
2014-01-12T22:47:23 <michelled> sigh. the environmental difficulties are confusing me. so package.json has version \'0.1\' for gpii which seems to be what the error is complaining about.
2014-01-12T22:47:33 <colinclark> oh dear
2014-01-12T22:47:37 <michelled> but I just did a fresh checkout
2014-01-12T22:47:37 <colinclark> that seems very strange
2014-01-12T22:47:48 <colinclark> 0.1 isn\'t a valid semver format, is it?
2014-01-12T22:47:59 <colinclark> is your fresh checkout still complaining?
2014-01-12T22:48:09 <Bosmon> It should read "0.1.0"
2014-01-12T22:48:13 <Bosmon> I wonder what has happened to michelled
2014-01-12T22:49:08 <michelled> well, it says 0.1 in the windows package.json
2014-01-12T22:49:14 <colinclark> avtar: your version of the RBMM is running at http://rbmm.gpii.net, is that correct?
2014-01-12T22:49:20 <michelled> I too wonder what has happened :(
2014-01-12T22:49:21 <avtar> yes
2014-01-12T22:49:36 <colinclark> does this curl command look correct:
2014-01-12T22:49:38 <colinclark> curl -X POST -d "@mmpost.txt" http://rbmm.gpii.net/match --header "Content-Type:application/json"
2014-01-12T22:49:42 * kasparnet joined the channel
2014-01-12T22:49:48 <colinclark> ooh, it\'s kasparnet!
2014-01-12T22:49:55 <colinclark> Did you manage to get to your destination, dude?
2014-01-12T22:50:01 <kasparnet> heya colinclark
2014-01-12T22:50:03 <kasparnet> I did
2014-01-12T22:50:04 <colinclark> It sounds like a lot of flights were cancelled/delayed
2014-01-12T22:50:04 <Bosmon> colinclark - that looks correct
2014-01-12T22:50:07 <colinclark> that\'s great
2014-01-12T22:50:21 <kasparnet> colinclark: yeah - they had some problems with the fog I think
2014-01-12T22:50:22 <Bosmon> colinclark - to be honest, I don\'t fully understand what I am doing with these port numbers
2014-01-12T22:50:31 <colinclark> I\'m getting a 502 Bad Gateway
2014-01-12T22:50:34 <colinclark> avtar: ^
2014-01-12T22:50:35 <Bosmon> But I have basically just converted anything I found without a port number specified to 8083
2014-01-12T22:50:43 <colinclark> kasparnet: We\'re getting really close
2014-01-12T22:50:50 <colinclark> anything related to the proxy, you mean?
2014-01-12T22:51:00 <Bosmon> colinclark - any matchMaker
2014-01-12T22:51:02 <kasparnet> colinclark: awesome! Glad to hear that
2014-01-12T22:51:32 <colinclark> Bosmon: I\'m not sure that\'s right
2014-01-12T22:51:36 <colinclark> but perhaps I\'m also puzzled
2014-01-12T22:51:48 <colinclark> I THINK the only server at issue is the Proxy
2014-01-12T22:51:55 <Bosmon> colinclark - perhaps the ones in matchMaker/configs/production.json and development.json should be left alone
2014-01-12T22:52:03 <colinclark> let me check
2014-01-12T22:52:15 <Bosmon> What was the reason we wanted to avoid 8080, in any case?
2014-01-12T22:52:25 <colinclark> kasparnet: Your matchMakerType preferences are in the wrong format
2014-01-12T22:52:27 <colinclark> which caused a few issues
2014-01-12T22:52:45 <colinclark> and there were a lot of tricky details with the remote Matchmakers and the Proxy which we are just nearly resolving
'

b'2014-01-12T21:35:52 <Bosmon> I\'m sure avtar\'s disks will not fill up over the week :)
2014-01-12T21:36:09 <avtar> Bosmon: they\'re slow though
2014-01-12T21:36:33 <colinclark> I don\'t see any reason not to turn logging off once we\'ve verified that this works
2014-01-12T21:36:47 <avtar> but i guess these urls aren\'t going to show up on hacker news
2014-01-12T21:37:10 <colinclark> no
2014-01-12T21:37:24 <colinclark> yzen: Okay, so the matchmaker also accesses the solutions registry
2014-01-12T21:37:36 <colinclark> which presumably is populated with identical data to the deployed version?
2014-01-12T21:38:11 <yzen> colinclark: it would as long as the universal has the same revision
2014-01-12T21:38:25 <colinclark> ok
2014-01-12T21:38:46 <colinclark> avtar: My impression is that we should just go ahead with using the development configuration
2014-01-12T21:38:49 <avtar> Bosmon: i guess it\'s okay for me to remove public access to port 8077 then?
2014-01-12T21:38:52 <colinclark> for both MMs
2014-01-12T21:38:53 <colinclark> avtar: yes
2014-01-12T21:38:55 <Bosmon> avtar - yes
2014-01-12T21:38:57 <Bosmon> Go ahead
2014-01-12T21:39:00 <colinclark> back to your lovely reverse proxy
2014-01-12T21:39:02 <Bosmon> Let me just verify the front-end URL
2014-01-12T21:39:22 <Bosmon> avtar - yup, verified
2014-01-12T21:39:34 <avtar> nooice
2014-01-12T21:39:36 <colinclark> avtar: So next, let\'s get to your question
2014-01-12T21:40:00 <colinclark> So, it sounds like we will redeploy both the STMM and the RBMM in the development configuration
2014-01-12T21:40:09 <colinclark> You\'ve already done the STMM, I guess
2014-01-12T21:40:14 <avtar> yes
2014-01-12T21:40:20 <avtar> one sec
2014-01-12T21:40:22 <colinclark> does that, theoretically, mean we are cool as far as the Matchmakers themselves?
2014-01-12T21:40:27 <avtar> no
2014-01-12T21:40:33 <colinclark> ok
2014-01-12T21:40:34 <avtar> there\'s matchmaker.gpii.net
2014-01-12T21:40:47 <colinclark> what is matchmaker.gpii.net?
2014-01-12T21:41:20 <colinclark> I\'m dumb, I know
2014-01-12T21:41:31 <colinclark> I\'m clearly missing one component in how our services are laid out
2014-01-12T21:41:33 <avtar> colinclark: https://github.com/GPII/universal/tree/v0.2/gpii/node_modules/matchMaker
2014-01-12T21:41:34 <colinclark> is it the proxy itself?
2014-01-12T21:41:49 <avtar> the v0.2 branch
2014-01-12T21:42:14 <colinclark> yzen: It\'s the thing we call a "matchmaker," but which actually uses the Matchmaker Proxy to delegate to a remote Matchmaker (STMM, etc.) to do the matching, is that correct?
2014-01-12T21:45:31 <yzen> colinclark, avtar so we have several so called stand alone match makers and one match maker proxy that should be deployed alongside the cloud based match maker
2014-01-12T21:46:08 <colinclark> Ok, so this thing avtar is calling "the matchmaker" is actually the Matchmaker Proxy?
2014-01-12T21:46:09 <yzen> avtar: I\'m not sure what v0.2 is about
2014-01-12T21:46:17 <colinclark> And needs to be deployed itself as a standalone service?
2014-01-12T21:46:23 <yzen> yes
2014-01-12T21:46:31 <colinclark> ok
2014-01-12T21:46:32 <yzen> but i m confused by 0.2 thing
2014-01-12T21:47:01 <avtar> yzen: kasper and you asked me to deploy 0.2 when we first set up flowmanager.gpii.net and matchmaker.gpii.net
2014-01-12T21:47:10 <avtar> i believe when you were in europe
2014-01-12T21:47:41 <avtar> the workshop in portugal, i think
2014-01-12T21:48:31 <yzen> avtar: right but now that branch is irrelevant. we need to deploy the match maker with proxy.json from the latest universal and i m guessing that is review2 branch, colinclark ?
2014-01-12T21:50:06 <avtar> which brings me to the config and possible changes https://github.com/GPII/universal/blob/review2/gpii/node_modules/matchMaker/configs/proxy.json
2014-01-12T21:50:26 <colinclark> yes, definitely the review2 branch
2014-01-12T21:50:44 <colinclark> avtar: So in proxy.json, you\'re saying we should commit configuration for the two matchmakers, right?
2014-01-12T21:50:55 <avtar> yes
2014-01-12T21:51:19 <colinclark> ok
2014-01-12T21:51:20 <avtar> and preferably include a reference to the default port that the service expects to bind to
2014-01-12T21:51:32 <colinclark> ok
2014-01-12T21:52:01 <colinclark> yzen: to confirm, the latter issue--the default port--would just entail adding a "port" option to the matchMakerProxy\'s options?
2014-01-12T21:52:25 <colinclark> avtar: By default, would you like this file to be configured to hit http://rbmm.gpii.net and http://stmm.gpii.net
2014-01-12T21:52:26 <colinclark> ?
2014-01-12T21:52:39 <colinclark> And is the flat one configured correctly?
2014-01-12T21:53:02 <avtar> i\'m not sure what the flat one is
2014-01-12T21:53:31 <yzen> colinclark: yes if you want to specify port you just add "port": XXXX options as a "kettle.server" component\'s option
2014-01-12T21:54:36 <colinclark> yura, so couple more questions
2014-01-12T21:54:59 <colinclark> When Kasper is using a flow manager with the "multiple matchmakers" configured, he will have a flat matchmaker running on the local host with it?
2014-01-12T21:55:02 <yzen> colinclark: https://github.com/GPII/universal/blob/review2/gpii/node_modules/matchMaker/configs/proxy.json#L25 i m hoping it is correct
2014-01-12T21:55:14 <yzen> colinclark: yes correct
2014-01-12T21:55:34 <yzen> both are listed in proxy.json config
2014-01-12T21:55:54 <colinclark> ok
2014-01-12T21:56:13 <colinclark> so avtar, you\'re basically just asking us to update review2 and/or master to include the declarations for the ruleBased and statistical matchmakers
2014-01-12T21:56:22 <colinclark> such that we won\'t all have to do so manually each time we redeploy, is that correct?
2014-01-12T21:56:50 <colinclark> and to add a default port to the matchmaker proxy server, yes?
2014-01-12T21:57:01 <colinclark> such that it won\'t bind to 8080 by default
2014-01-12T21:57:12 <avtar> it\'s more so for documenting the config so that we don\'t wonder what\'s happening a few months from now
2014-01-12T21:57:35 <avtar> i\'ll still have to change the port numbers based on where and how the components are being hosted
2014-01-12T21:58:06 <Bosmon> avtar - right idea!
2014-01-12T21:58:12 <Bosmon> Always best to avoid surprising our future selves
2014-01-12T21:58:38 <Bosmon> I just came upon a fairly long JIRA I\'d written only 9 months ago and I couldn\'t remember a thing about it
2014-01-12T21:59:00 <Bosmon> I read it with extreme interest :)
2014-01-12T21:59:01 <avtar> you gave birth to knowledge, Bosmon
2014-01-12T21:59:03 <Justin_o_> cindyli: do you think we should make a new pcp demo file like we did for pmt.. that is to make pcp.html file in the prefsEditor directory of the demos folder
2014-01-12T21:59:49 <avtar> colinclark, yzen: after the matchmakers i\'ll redeploy flowmanager from the review2 branch
2014-01-12T21:59:50 <yzen> avtar: colinclark if match maker related ports change cloud based one for the flow manage needs to change too https://github.com/GPII/universal/blob/master/gpii/node_modules/flowManager/configs/cloudBased.json#L22
2014-01-12T22:00:40 <cindyli> good idea, Justin_o_, to keep the original pcp demo code clean, even though we\'ve touched internal scripts :P
2014-01-12T22:00:45 <avtar> yzen: only the matchmaker proxy edition gets mentioned there?
2014-01-12T22:00:52 <Justin_o_> cindyli: yes :)
2014-01-12T22:00:56 <yzen> avtar: yes
2014-01-12T22:01:00 <avtar> ok cool
2014-01-12T22:01:14 <Justin_o_> I figure it will be easier for people to know what\'s being demoed that way too
2014-01-12T22:01:24 <Justin_o_> cindyli: i\'ll try to quickly make that
2014-01-12T22:01:29 <cindyli> that\'s right. thanks, Justin_o_
2014-01-12T22:01:44 <avtar> colinclark, yzen: i\'ll be back in 5
2014-01-12T22:02:00 <avtar> gonna stretch out my old man body
2014-01-12T22:03:21 <Justin_o_> colinclark: can you remind me what PCP stands for
2014-01-12T22:03:35 <colinclark> Bosmon: So I\'m just trying to tie up mental loose ends here
2014-01-12T22:03:53 <colinclark> Are you willing to make a pull request that modifies proxy.json based on avtar\'s requests?
2014-01-12T22:04:09 <colinclark> presumably it would including giving a real, non-8080 port to the matchmakerProxy
2014-01-12T22:04:23 <colinclark> and adding configurations for STMM and RBMM that point to his deployed services
2014-01-12T22:04:26 <colinclark> Do have that correct?
2014-01-12T22:05:10 <Bosmon> The latter two I understand
2014-01-12T22:05:20 <Bosmon> The former I don\'t
2014-01-12T22:05:25 <Bosmon> "presumably it would including giving a real, non-8080 port to the matchmakerProxy"
2014-01-12T22:05:41 <colinclark> sorry, it was ungrammatical
2014-01-12T22:05:50 <colinclark> I\'m rushing and I shouldn\'t
2014-01-12T22:05:50 <colinclark> ok
2014-01-12T22:05:55 <Bosmon> The grammar is fine
2014-01-12T22:06:01 <Bosmon> It\'s just the underlying meaning I have problems with :)
2014-01-12T22:06:08 <Bosmon> Or more precisely, the underlying purpose
2014-01-12T22:06:09 <colinclark> So, I believe that by default, a Kettle server will bind to port 8080
2014-01-12T22:06:18 <colinclark> if a port isn\'t explicitly defined for the server
2014-01-12T22:06:26 <Bosmon> ok
2014-01-12T22:06:40 <colinclark> If you look here, you\'ll see that no port is defined: https://github.com/GPII/universal/blob/master/gpii/node_modules/matchMaker/configs/proxy.json#L9
2014-01-12T22:07:55 <Bosmon> Oh yes
2014-01-12T22:08:01 <Bosmon> I think I am beginning to understand
2014-01-12T22:08:11 <Bosmon> All this time, these matchmakers have already been dispatched internally via HTTP?
2014-01-12T22:08:37 <Bosmon> I guess I never read this configuration carefully
2014-01-12T22:08:45 <colinclark> The Matchmaker Proxy is itself a server that is dispatched to from the Flow Manager
2014-01-12T22:08:49 <Bosmon> Ok
2014-01-12T22:08:58 <Bosmon> But somehow THIS one defaults to 8080?
2014-01-12T22:08:59 <colinclark> The Proxy, in turn, resolves and dispatches to a particular MM instance
2014-01-12T22:09:06 <colinclark> yes, that\'s right, Bosmon
2014-01-12T22:09:11 <colinclark> I believe because it fails to define any port at all
2014-01-12T22:09:12 <Bosmon> And the Flow Manager doesn\'t
2014-01-12T22:09:21 <Bosmon> That is, doesn\'t default, but is fixed to 8081
2014-01-12T22:09:22 <Bosmon> Ok
2014-01-12T22:09:28 <colinclark> Am I making sense?
2014-01-12T22:09:33 <Bosmon> So I assume that there will need to be a yet further modification
2014-01-12T22:09:38 <colinclark> What\'s that?
2014-01-12T22:09:45 <Bosmon> Affecting the binding of the FlowManager itself onto this matchMakerProxy
2014-01-12T22:09:53 <colinclark> ah yes
2014-01-12T22:09:55 <colinclark> that must be true
2014-01-12T22:10:22 <Bosmon> At present I see this in the file named "cloudBased.json"
2014-01-12T22:10:41 <colinclark> in the top-level configs directory?
2014-01-12T22:10:51 <Bosmon> in flowManager\'s configs
2014-01-12T22:10:58 <colinclark> ah yes
2014-01-12T22:11:03 <colinclark> now I see it
2014-01-12T22:11:13 <Bosmon> NOW
2014-01-12T22:11:15 <Bosmon> YOU
2014-01-12T22:11:15 <colinclark> matcha matcha matchmaker
2014-01-12T22:11:17 <colinclark> ME
2014-01-12T22:11:19 <Bosmon> SEE
2014-01-12T22:11:22 <Bosmon> IT
2014-01-12T22:11:33 <colinclark> yes, those are the changes that need to be made
2014-01-12T22:11:34 <colinclark> to summarize
2014-01-12T22:11:43 <colinclark> bind to something other than 8080 here https://github.com/GPII/universal/blob/master/gpii/node_modules/flowManager/configs/cloudBased.json#L22
2014-01-12T22:12:13 <Justin_o_> cindyli: pushed up the new demo file
2014-01-12T22:12:15 <colinclark> 2. define said port here https://github.com/GPII/universal/blob/review2/gpii/node_modules/matchMaker/configs/proxy.json#L9
2014-01-12T22:12:25 <cindyli> thanks, Justin_o_
2014-01-12T22:12:27 <colinclark> 3. add proper MM entries here https://github.com/GPII/universal/blob/review2/gpii/node_modules/matchMaker/configs/proxy.json#L15
2014-01-12T22:12:28 <cindyli> will merge in
2014-01-12T22:12:33 <Justin_o_> cindyli: thanks
2014-01-12T22:12:37 <Bosmon> Ok
2014-01-12T22:12:37 <cindyli> np
2014-01-12T22:12:39 <colinclark> and 4. issue a pull request to both master and review2
'

b'2014-01-12T21:04:36 <michelled> thx
2014-01-12T21:04:50 * FerranGaallego has quit
2014-01-12T21:06:39 <colinclark> Bosmon: So as I read this, Andy didn\'t quite have his matchPost component wired up properly
2014-01-12T21:07:40 <colinclark> and as a result, no transformation
2014-01-12T21:08:08 <colinclark> I don\'t quite even understand the function of the matchPost component
2014-01-12T21:08:37 <colinclark> as opposed to directly binding the statistical matchmaker\'s match invoker to gpii.matchMaker.statistical.matchPostMatch
2014-01-12T21:09:01 <michelled> Bosmon: once I\'ve got your branch and run npm install, what do I need to do?
2014-01-12T21:09:38 <Bosmon> michelled - the next step is to adjust your file proxy.json within your universal to point to this matchmaker
2014-01-12T21:10:11 <Bosmon> On line 16, it should have:
2014-01-12T21:10:12 <Bosmon> "statistical": "http://localhost:8077"
2014-01-12T21:10:28 <Bosmon> After that all you need to do is to correct the entries in the preferences sets as I mentioned above
2014-01-12T21:10:46 <Bosmon> Incorrectly, on line 2, these read
2014-01-12T21:10:47 <Bosmon> \t  "matchMakerType": "statistical",
2014-01-12T21:10:50 <Bosmon> Whereas they should have:
2014-01-12T21:10:58 <Bosmon> "http://registry.gpii.org/common/matchMakerType": [{ "value": "statistical" }],
2014-01-12T21:11:17 <yzen> colinclark: i don\'t thing that you need any of the code i deleted, actually
2014-01-12T21:11:23 <yzen> only rule based match maker needed it
2014-01-12T21:11:35 <Bosmon> Oh yes, final step: you need to set your NODE_ENV environment variable
2014-01-12T21:11:42 <colinclark> yzen: ok, I\'m just confused about the output that Bosmon was getting from the STMM
2014-01-12T21:11:49 <colinclark> maybe I\'m just being terribly forgetful
2014-01-12T21:11:56 <colinclark> but doesn\'t it look like it needs to be transformed?
2014-01-12T21:12:04 <Bosmon> set NODE_ENV=fm.ps.sr.dr.mm.os.lms.multipleMatchMakers
2014-01-12T21:12:10 <Bosmon> Or Linux equivalent thereof
2014-01-12T21:12:10 <colinclark> this is it, yzen: http://pastebin.com/L2AsetBS
2014-01-12T21:12:37 <Bosmon> I believe that is the total set of requirements
2014-01-12T21:12:44 <colinclark> I mean, yzen, it\'s doing the right thing in terms of mapping orca to nvda
2014-01-12T21:13:07 <Bosmon> i) proxy.json ii) corrected preference sets, iii) NODE_ENV variable
2014-01-12T21:13:24 <colinclark> oh, perhaps I\'m wrong, yzen
2014-01-12T21:13:30 <colinclark> line 351
2014-01-12T21:13:44 <colinclark> I guess we\'ll have to wait to see what michelled finds in practice
2014-01-12T21:13:51 <colinclark> but these look more or less right, don\'t they?
2014-01-12T21:14:25 <colinclark> in the paste bin file, I mean
2014-01-12T21:17:20 <Bosmon> avtar
2014-01-12T21:17:24 <Bosmon> Sorry for the delay
2014-01-12T21:17:34 <Bosmon> colinclark has reminded me that I am now due to test your STMM deployments
2014-01-12T21:17:38 <Bosmon> Could you tell me the details?
2014-01-12T21:17:54 <avtar> sure
2014-01-12T21:18:00 <avtar> i\'m using your repo and branch
2014-01-12T21:18:19 <avtar> this one https://github.com/amb26/GPII_StatisticalMatchmaker1/tree/GPII-275
2014-01-12T21:18:23 <Bosmon> ok
2014-01-12T21:18:37 <avtar> currently it still has nginx sitting in front of it
2014-01-12T21:18:42 <Bosmon> ok
2014-01-12T21:18:43 <avtar> accepting requests on port 80
2014-01-12T21:18:47 <avtar> stmm is using 8077
2014-01-12T21:18:52 <Bosmon> Ok
2014-01-12T21:19:00 <Bosmon> Port 80 is still giving the ECONNREFUSED payload
2014-01-12T21:19:04 <Bosmon> Port 8077 doesn\'t seem to be open
2014-01-12T21:19:10 <avtar> i\'ll open 8077 now
2014-01-12T21:20:33 <avtar> http://205.211.169.179:8077/match
2014-01-12T21:21:32 <Bosmon> Ok
2014-01-12T21:21:39 <Bosmon> This shows the same payload as the front end
2014-01-12T21:21:48 <Bosmon> So I guess we can free the nginx layer from all blame
2014-01-12T21:21:58 <colinclark> vindication, avtar!
2014-01-12T21:22:11 <Bosmon> Can you get me some logs from the node server?
2014-01-12T21:22:12 <avtar> sweet sweetness
2014-01-12T21:22:49 <avtar> sure
2014-01-12T21:22:52 <avtar> cat /var/log/nodejs/statistical_matchmaker.log
2014-01-12T21:22:52 <avtar> function
2014-01-12T21:22:52 <avtar> function
2014-01-12T21:23:02 <Bosmon> glah
2014-01-12T21:23:06 <Bosmon> That\'s it?
2014-01-12T21:23:10 <avtar> yup :/
2014-01-12T21:23:15 <Bosmon> Well clearly it never started : P
2014-01-12T21:23:19 <Bosmon> Much like your preferences server
2014-01-12T21:23:23 <avtar> hey
2014-01-12T21:23:27 <avtar> you know what started now?
2014-01-12T21:23:31 <avtar> the pref server!
2014-01-12T21:23:34 <Bosmon> oh cool
2014-01-12T21:23:34 <colinclark> yay
2014-01-12T21:23:45 <colinclark> Bosmon: How do you know it didn\'t start?
2014-01-12T21:23:50 <avtar> i had to delete infusion from the kettle directory
2014-01-12T21:23:53 <Bosmon> Because there would be something in the logs!
2014-01-12T21:23:54 <colinclark> Because it didn\'t emit the connect deprecation warning?
2014-01-12T21:23:59 <Bosmon> And all the other junk, yes
2014-01-12T21:24:16 <avtar> deleted these ones
2014-01-12T21:24:16 <avtar> ./node_modules/kettle/node_modules/infusion
2014-01-12T21:24:17 <avtar> ./node_modules/jqUnit/node_modules/infusion
2014-01-12T21:24:17 <Bosmon> And these things always end with the annotation "Kettle server listening on port Xxxxx"
2014-01-12T21:24:23 <avtar> and left ./node_modules/infusion
2014-01-12T21:24:32 <colinclark> ah, because even production mode doesn\'t silence the logs for the STMM
2014-01-12T21:24:48 <Bosmon> I never actually tested production mode
2014-01-12T21:24:57 <Bosmon> I can\'t say I know what the difference would be in this case
2014-01-12T21:24:59 <Bosmon> Hopefully nothing
2014-01-12T21:25:02 <avtar> yzen: http://preferences.gpii.net/user/carla
2014-01-12T21:25:03 <colinclark> they look identical to me
2014-01-12T21:25:10 <avtar> looks like we won\'t have to chat after all
2014-01-12T21:25:28 <yzen> looks good
2014-01-12T21:25:45 <Bosmon> ok - avtar - all that description just now was for the prefs server? Rather than for the STMM?
2014-01-12T21:25:50 <yzen> avtar: wait so any other deployment stuff you need from me?
2014-01-12T21:26:13 <michelled> sigh. I\'m back to a misbehaving system :( I\'m reckoning
2014-01-12T21:26:22 <avtar> Bosmon: yes. only the function, function was related to stmm
2014-01-12T21:26:23 <michelled> re-cloning. and going to eat some lunch
2014-01-12T21:26:26 <colinclark> michelled just said reckoning
2014-01-12T21:26:29 <colinclark> which is a great word
2014-01-12T21:26:48 <Bosmon> ok - so how did you start the STMM, avtar?
2014-01-12T21:27:09 <colinclark> michelled: Do you want me to order you a pizza?
2014-01-12T21:27:16 <Bosmon> And I\'m wondering whether you might need to do infusion deduplication on that one too
2014-01-12T21:27:27 <colinclark> or anyone else?
2014-01-12T21:27:34 <avtar> Bosmon: NODE_ENV=production node /opt/statistical_matchmaker/bin/statisticalMatchMaker.js
2014-01-12T21:27:40 <colinclark> bicycle tacos?
2014-01-12T21:27:42 <Bosmon> ok
2014-01-12T21:27:59 <Bosmon> avtar - could you just change that to NODE_ENF=development and see if we get any logs
2014-01-12T21:28:02 <avtar> sure
2014-01-12T21:28:07 <Bosmon> And also check if you have any duplicate infusions as with prefs
2014-01-12T21:28:23 <Bosmon> I fear you will have to go on a cruel mission once more
2014-01-12T21:28:47 <avtar> Bosmon: only ./node_modules/universal/node_modules/infusion
2014-01-12T21:29:09 <Bosmon> ok
2014-01-12T21:29:27 <Bosmon> Well let me know once you have started up development configuration and lets see if we get any logs out of it
2014-01-12T21:29:32 <avtar> Bosmon: looking better http://pastie.org/pastes/8627423/text
2014-01-12T21:29:35 <Bosmon> ok
2014-01-12T21:29:50 <Bosmon> Seems reasonable
2014-01-12T21:29:53 <Bosmon> I will try to connect now
2014-01-12T21:29:56 <Bosmon> And it should generate further logs
2014-01-12T21:30:08 <Bosmon> UGGHHHH!
2014-01-12T21:30:09 <Bosmon> It worked
2014-01-12T21:30:10 <Bosmon> Ok
2014-01-12T21:30:15 <Bosmon> So fault is somewhere in production config
2014-01-12T21:31:41 <avtar> Bosmon: http://pastie.org/pastes/8627431/text
2014-01-12T21:31:58 * michelled has quit
2014-01-12T21:32:00 <Bosmon> avtar thanks, yes
2014-01-12T21:32:05 <Bosmon> It seems to have worked
2014-01-12T21:32:16 <Bosmon> And I can confirm that the "production" config is broken locally too
2014-01-12T21:32:20 <Bosmon> Although it gives a different error
2014-01-12T21:32:24 <yzen> Bosmon, avtar are you deploying stats match maker ?
2014-01-12T21:32:30 <Bosmon> yzen - yes
2014-01-12T21:32:41 <Bosmon> Only "development" config is working
2014-01-12T21:32:48 <avtar> colinclark, yzen: could we agree on a config for flowmanager and/or universal\'s matchmaker?
2014-01-12T21:32:54 <yzen> Bosmon: how come you want to use production ?
2014-01-12T21:33:10 <Bosmon> yzen - avtar thought it seemed a reasonable choice
2014-01-12T21:33:11 <avtar> there was some talk about missing matchmaker entries in the current flowmanager config
2014-01-12T21:33:15 <Bosmon> I had only tested with development
2014-01-12T21:33:31 <Bosmon> Since we are deploying a live service, it seems that "production" should be non-broken
2014-01-12T21:33:39 <avtar> :)
2014-01-12T21:33:41 <yzen> it should be development, but reference should be to the latest correct universal
2014-01-12T21:33:44 <colinclark> avtar: Yes, it sounds like we need to make a commit to universal and push it also to review2
2014-01-12T21:34:08 <yzen> production requires live ontology server
2014-01-12T21:34:13 <Bosmon> I see
2014-01-12T21:34:15 <Bosmon> Good to know
2014-01-12T21:34:21 <avtar> i feel this should be in readmes though
2014-01-12T21:34:27 <Bosmon> Ok well, that seems we have made some progress
2014-01-12T21:34:27 <colinclark> yes
2014-01-12T21:34:32 <colinclark> avtar: you hit the nail on the head
2014-01-12T21:34:47 <colinclark> so could we get away with deploying in development mode?
2014-01-12T21:34:53 <colinclark> and stifling the logs with a setLogging: false?
2014-01-12T21:35:33 <yzen> as long as universal is the one that everyone is using
2014-01-12T21:35:37 <Bosmon> Yes
2014-01-12T21:35:40 <colinclark> A Matchmaker server need not make any requests to anything other than the ontology server, is that right?
2014-01-12T21:35:44 <Bosmon> To be honest I don\'t see the logging as hazardous anyway
2014-01-12T21:35:49 <colinclark> so it doesn\'t matter if the ontology server is local
2014-01-12T21:35:51 <yzen> solutions registry
'

b'2014-01-12T20:27:28 <avtar> let\'s try it with Bosmon\'s version first as-is
2014-01-12T20:27:31 <Bosmon> But in that case, what on earth could Kettle be trying to connect to that it is refused?
2014-01-12T20:27:34 <colinclark> ok
2014-01-12T20:27:40 <avtar> and then if that doesn\'t work i\'ll open the port
2014-01-12T20:28:02 <colinclark> can you paste me the response you\'re getting from your local STMM, Bosmon?
2014-01-12T20:28:13 <Bosmon> colinclark, michelled: Here is my payload response from my local STMM for the prefs set review2_demo2.json
2014-01-12T20:28:18 <avtar> something to keep in mind though is that the preferences server is currently offline
2014-01-12T20:28:18 <Bosmon> http://pastebin.com/cSC6LjF5
2014-01-12T20:28:26 <avtar> it wasn\'t when we were trying this earlier
2014-01-12T20:28:34 <colinclark> avtar: that should be fine for this particular component
2014-01-12T20:28:37 <avtar> ok
2014-01-12T20:28:59 <colinclark> we\'re still only getting easy one, Bosmon
2014-01-12T20:29:01 <colinclark> which has no settings
2014-01-12T20:29:14 <Bosmon> ok
2014-01-12T20:29:21 <colinclark> let\'s just see
2014-01-12T20:29:23 <Bosmon> Let me know which other set I can try
2014-01-12T20:29:48 <colinclark> yeah, review2_demo2 is just a collection of random preferences that we don\'t have easy access to the physical hardware for
2014-01-12T20:30:01 <colinclark> i.e. the pixel sense and android
2014-01-12T20:30:12 <colinclark> let\'s see if "blind" is more appropriate
2014-01-12T20:30:16 <colinclark> yes
2014-01-12T20:30:24 <colinclark> can you try this one, Bosmon? https://github.com/GPII/universal/blob/review2/testData/preferences/review2_demo3b_blind.json
2014-01-12T20:30:29 <Bosmon> ok
2014-01-12T20:30:52 <colinclark> My impression, though, is that none of these preferences sets actually exercise the Matchmaker\'s capacity to, well, match things
2014-01-12T20:30:57 <colinclark> which actually serves us very well
2014-01-12T20:31:14 <colinclark> michelled: Are those the only two preference sets that include   "matchMakerType": "statistical"?
2014-01-12T20:31:26 <michelled> no, there are a couple more - one sec
2014-01-12T20:31:50 <colinclark> thank you
2014-01-12T20:31:52 <michelled> https://github.com/GPII/universal/blob/review2/testData/preferences/review2_demo3c_elderly.json
2014-01-12T20:32:13 <michelled> https://github.com/GPII/universal/blob/review2/testData/preferences/review2_demo3d_adult.json
2014-01-12T20:32:20 <avtar> Bosmon: your version is up
2014-01-12T20:32:25 <michelled> https://github.com/GPII/universal/blob/review2/testData/preferences/review2_demo3d_young.json
2014-01-12T20:33:12 <colinclark> the orca one should be very effective
2014-01-12T20:33:25 <colinclark> since it has application-specific preferences for a solution that runs only on Linux
2014-01-12T20:33:44 <colinclark> Bosmon, given that your payload specifies that you\'re on Windows, it should return back settings for NVDA if it is successful
2014-01-12T20:33:56 <colinclark> real, full-on application-specific preferences
2014-01-12T20:34:17 <Bosmon> So yes, it seems that these "cannot call method fire of undefined" messages are caused by having a corrupt specification for the matchmaker in these profiles
2014-01-12T20:34:36 <colinclark> the wrong name, you mean?
2014-01-12T20:34:37 <Bosmon> This profile, review2_demo3b_blind.json simply has the entry as \t  "matchMakerType": "statistical",
2014-01-12T20:34:41 <Bosmon> Which is not correct
2014-01-12T20:34:46 <colinclark> what should it be?
2014-01-12T20:34:56 <Bosmon> The entry should read     "http://registry.gpii.org/common/matchMakerType": [{ "value": "statistical" }],
2014-01-12T20:35:17 <Bosmon> "don\'t ask me why" : P
2014-01-12T20:35:27 <Bosmon> Or how it is that matchMakerType has come to be considered a "common term".....
2014-01-12T20:36:06 <colinclark> yes, this was an issue I started to try to talk through before the holidays
2014-01-12T20:36:09 <colinclark> but it\'s too late
2014-01-12T20:36:33 <Bosmon> Urgh :(
2014-01-12T20:36:34 <colinclark> Bosmon: should michelled go ahead an prepare a pull request to fix this?
2014-01-12T20:36:40 <colinclark> in the sets that we\'ve got?
2014-01-12T20:36:40 <Bosmon> Now I am getting the ECONNREFUSED message locally...............
2014-01-12T20:36:45 <colinclark> wooah
2014-01-12T20:37:07 <Bosmon> Oh
2014-01-12T20:37:10 <Bosmon> It\'s because it is not running :)
2014-01-12T20:37:17 <Bosmon> Well, that seems straightforward enough.......
2014-01-12T20:37:19 <avtar> heh
2014-01-12T20:37:32 <Bosmon> And that also explains the source of avtar\'s messages
2014-01-12T20:37:51 <avtar> nothing can explain the source of my messages :|
2014-01-12T20:37:56 <Bosmon> shush
2014-01-12T20:38:13 <colinclark> ooooh, avtar just got shushed!
2014-01-12T20:38:14 <Bosmon> Well ok in this case it is a REAL upstream ECONNREFUSED
2014-01-12T20:38:25 <colinclark> unshush, AVTAR!
2014-01-12T20:38:41 <colinclark> upstream to where, Bosmon?
2014-01-12T20:38:43 <Bosmon> But interestingly the returned JSON payload from the overall system is exactly the same as the one I get from avtar\'s deployed MMs
2014-01-12T20:38:50 <avtar> Bosmon: i haven\'t seen any traffic on port 8077 yet
2014-01-12T20:39:03 <Bosmon> The flowManager, talking to my local STMM, receives a REAL ECONNREFUSED
2014-01-12T20:39:24 <Bosmon> Which then, from the point of view of user login, reports exactly the payload which avtar\'s MMs seem to return
2014-01-12T20:39:24 <colinclark> but when you poke the STMM directly, this isn\'t the case?
2014-01-12T20:39:32 <Bosmon> No, it genuinely wasn\'t running
2014-01-12T20:39:40 <Bosmon> Sorry avtar, still testing locally
2014-01-12T20:39:42 <Bosmon> Give me a minute or so
2014-01-12T20:39:52 <avtar> np
2014-01-12T20:39:57 <avtar> i\'m about to put all sorts of tacos in my mouth
2014-01-12T20:40:07 <Bosmon> ok
2014-01-12T20:40:08 <avtar> typing will affected
2014-01-12T20:40:12 <avtar> be
2014-01-12T20:40:18 <avtar> already it seems
2014-01-12T20:40:26 <Bosmon> colinclark - I can\'t test review2_demo3_blind.json since I don\'t have NVDA installed
2014-01-12T20:40:42 <Bosmon> During logon the flowmanager bombs out with Error: ENOENT, no such file or directory \'C:\\Users\\Bosmon\\AppData\\Roaming\
vda\
vda.ini\'
2014-01-12T20:40:58 <Bosmon> This of course is also completely unacceptable behaviour since this results in a completely incomprehensible message from user logon
2014-01-12T20:41:01 <colinclark> can you at least probe the STMM directly with this preference set?
2014-01-12T20:41:17 <colinclark> I JUST SAID PROBE, GUYS
2014-01-12T20:41:30 <Bosmon> simmer down, chaps : P
2014-01-12T20:41:36 <avtar> lol
2014-01-12T20:42:20 <colinclark> so serious and british
2014-01-12T20:46:12 <avtar> \'british bosmon\'
2014-01-12T20:46:14 * the-t-in-rtf has quit
2014-01-12T20:46:16 <avtar> colinclark: you came up with that one
2014-01-12T20:46:26 <colinclark> ye-ah
2014-01-12T20:46:27 <Bosmon> Unfortunately my local STMM, given the payload from review2_demo3b_blind.json fails with a new kind of error
2014-01-12T20:46:49 <Bosmon> Which looks a bit like this:
2014-01-12T20:46:51 <Bosmon> 13:35:07.339:   INFO urlExpander expanded: file://E:\\Source\\gits\\GPII_StatisticalMatchmaker1\
ode_modules\\universal\\gpii\
od
2014-01-12T20:46:51 <Bosmon> e_modules\\matchMaker/../../../testData/solutions/undefined.json
2014-01-12T20:46:51 <Bosmon> TypeError: Cannot read property \'from\' of undefined
2014-01-12T20:46:51 <Bosmon> at gpii.ontologyServer.development.set (E:\\Source\\gits\\GPII_StatisticalMatchmaker1\
ode_modules\\universal\\gpii\
ode_modu
2014-01-12T20:46:51 <Bosmon> les\\ontologyServer\\src\\ontologyServer.js:89:19)
2014-01-12T20:46:55 <colinclark> it\'s not your best, though, avtar
2014-01-12T20:46:56 <colinclark> or my best
2014-01-12T20:47:20 <colinclark> Why is the ontology server involved at all?
2014-01-12T20:47:33 <Bosmon> I can\'t explain that
2014-01-12T20:47:59 <Bosmon> But it seems somehow "left behind" because yzen\'s strategy in these proxy integrations seems to be to reuse some parts of the MatchMaker server back in universal
2014-01-12T20:48:16 <Bosmon> This was no doubt the reason that in earlier days he was agitating for us to break these out as separate modules
2014-01-12T20:48:31 <Bosmon> But it seems somehow that a bit of the ontology server workflow is "left behind" in this matching process
2014-01-12T20:49:03 <colinclark> I don\'t know what to do
2014-01-12T20:49:40 * FerranGaallego joined the channel
2014-01-12T20:49:44 <Bosmon> I think we will just have to axe this part of the demo
2014-01-12T20:49:46 * cindyli joined the channel
2014-01-12T20:49:47 <colinclark> ok
2014-01-12T20:49:52 <colinclark> Can we spend some time with the RBMM?
2014-01-12T20:50:00 <Bosmon> Especially if yzen is gone, it doesn\'t seem feasible to get the STMM working on this evidence
2014-01-12T20:50:02 <colinclark> They say they\'ve tested it with the whole system
2014-01-12T20:51:00 <colinclark> is it possible to spend some time trying to get our server deployment of it working, and to verify that their version is working somehow?
2014-01-12T20:53:23 <Bosmon> Oh wait, I think my payload for the last test is wrong
2014-01-12T20:53:31 <Bosmon> So I have to back up and answer your previous question with "no"
2014-01-12T20:53:40 <Bosmon> That is, "no, I can\'t probe the STMM directly with this preference set"
2014-01-12T20:54:15 <Bosmon> No wait
2014-01-12T20:54:20 <Bosmon> let me back up completely :)
2014-01-12T20:54:28 <avtar> colinclark: i\'m waiting on yzen at the moment for some assistance with the pref server
2014-01-12T20:54:28 <Bosmon> Sorry to be so confused
2014-01-12T20:54:34 <Bosmon> The answer to your question is YES
2014-01-12T20:54:45 <avtar> but i\'ll move onto redeploying flowmanager and matchmaker like we discussed earlier
2014-01-12T20:54:55 <avtar> from the official gpii repo
2014-01-12T20:55:34 * yzen joined the channel
2014-01-12T20:55:54 <avtar> yay!
2014-01-12T20:56:12 <avtar> yzen: screenhero time?
2014-01-12T20:57:01 <colinclark> Bosmon: Can you elaborate, sorry?
2014-01-12T20:57:08 <Bosmon> colinclark - so here is the response from the STMM to review2_demo3b_blind preferences:
2014-01-12T20:57:09 <Bosmon> http://pastebin.com/L2AsetBS
2014-01-12T20:57:49 <colinclark> this looks correct
2014-01-12T20:57:59 <colinclark> michelled: Do you still have your windows laptop?
2014-01-12T20:58:03 <michelled> yes
2014-01-12T20:58:11 <Bosmon> Which, if I\'m not mistaken, reflects far more the results of our own matchmaking processing than anything done by the STMM : P
2014-01-12T20:58:25 <colinclark> yes
2014-01-12T20:58:27 <colinclark> How hard would it be for you to get to the point where Bosmon is and test it with a full stack and with NVDA installed?
2014-01-12T20:58:27 <Bosmon> yzen - I corrected the error in your STMM pull and have pushed it to my own GPII-275 fork
2014-01-12T20:58:46 <colinclark> thank you thank you Bosmon
2014-01-12T20:59:11 <colinclark> my impression is that the STMM does indeed need the transformation stage here
2014-01-12T20:59:22 <Bosmon> Right
2014-01-12T20:59:26 <Bosmon> But it is being done, right?
2014-01-12T20:59:28 <colinclark> since the results, as they\'re returned, won\'t set correctly
2014-01-12T20:59:32 <colinclark> no, yzen removed it
2014-01-12T20:59:36 <Bosmon> ah ok
2014-01-12T20:59:54 <colinclark> Bosmon: Any chance you could look at what yzen did and undo most of it?
2014-01-12T21:00:17 <colinclark> My impression is that we need the matchPost function that he removed
2014-01-12T21:00:17 <michelled> Bosmon: what do I need to do to get to point where you are?
2014-01-12T21:01:20 <Bosmon> michelled - all you really need is my fork of the STMM
2014-01-12T21:01:32 <Bosmon> And then you need a set of slightly hacked preferences sets
2014-01-12T21:01:40 <Bosmon> And modifications to the proxy.json inside your universal
2014-01-12T21:02:22 <Bosmon> It is times like these that one has sympathy for KASPARNET\'s tendency to work with a "random bunch of uncommitted files" .....
2014-01-12T21:02:53 <Bosmon> I should probably commit my lightly hacked universal fork as well, but only about 3 lines have been edited
2014-01-12T21:04:26 <Bosmon> michelled - my STMM branch is here
2014-01-12T21:04:27 <Bosmon> https://github.com/amb26/GPII_StatisticalMatchmaker1/tree/GPII-275
'

b'2014-01-12T19:31:01 <avtar> ./node_modules/kettle/node_modules/infusion
2014-01-12T19:31:01 <avtar> ./node_modules/jqUnit/node_modules/infusion
2014-01-12T19:31:01 <avtar> ./node_modules/infusion
2014-01-12T19:31:03 <yzen> colinclark: i wonder if andy\'s stuff is out of date where we did not use inverse rules
2014-01-12T19:31:12 <colinclark> the top one, avtar
2014-01-12T19:31:14 <avtar> ok
2014-01-12T19:31:46 <avtar> michelled: one sec
2014-01-12T19:32:46 <Bosmon> Ok
2014-01-12T19:32:56 <Bosmon> I see that yours and colin\'s branches refer to different revisions of universal
2014-01-12T19:33:04 <Bosmon> Although somehow this didn\'t show up in the pull request diff
2014-01-12T19:33:55 <Bosmon> Which revision of univeral actually is this, yzen? "universal": "git://github.com/GPII/universal.git#a03b5e4512691cad032186434bd3e8151ad23a6d"
2014-01-12T19:34:18 <Bosmon> Ok
2014-01-12T19:34:19 <colinclark> They look the same to me, Bosmon
2014-01-12T19:34:27 <colinclark> that should be the latest universal master
2014-01-12T19:34:30 <Bosmon> I\'m completely confused now since both of these files have colin as their most recent committer
2014-01-12T19:34:31 <colinclark> as of last night
2014-01-12T19:34:50 <Bosmon> colinclark - the one in your own GPII-275 branch reads as follows: "universal": "git://github.com/GPII/universal.git#d5bf97ffff988cb7cbe3f0ce40a3bce5b44b639d",
2014-01-12T19:35:14 <colinclark> FFFFF
2014-01-12T19:35:29 <colinclark> this is such a mess
2014-01-12T19:35:31 <colinclark> what did I do?>
2014-01-12T19:35:33 <Bosmon> ok, let me revert to yzen\'s revision and retest
2014-01-12T19:35:34 <colinclark> sad;fijasdfai;edf xdvlj
2014-01-12T19:36:08 <colinclark> ok
2014-01-12T19:36:14 <colinclark> my GPII-275 branch is correct
2014-01-12T19:36:31 <Bosmon> urgh
2014-01-12T19:36:34 <colinclark> d5bf9 is second-to-latest
2014-01-12T19:36:36 <Bosmon> Ok, worse things are happening
2014-01-12T19:36:57 <Bosmon> In that I checked out yzen\'s branch, and yet I got your revision number still
2014-01-12T19:36:57 <colinclark> yzen\'s GPII-275 branch seems consisted with this
2014-01-12T19:37:06 <colinclark> are you using his master or his GPII-275 branch?
2014-01-12T19:37:25 <Bosmon> Sorry, you\'re right, sorry
2014-01-12T19:37:27 <colinclark> consistent
2014-01-12T19:37:32 <Bosmon> I fucked up, both of your rev numbers are the same
2014-01-12T19:37:33 <colinclark> phew
2014-01-12T19:37:37 <colinclark> sorry for the random characters
2014-01-12T19:37:40 <colinclark> it felt good, anyway :)
2014-01-12T19:37:42 <Bosmon> d5bf9 it is
2014-01-12T19:37:42 <yzen> :)
2014-01-12T19:37:59 <Bosmon> So this now heightens the mystery of why my test fails and yzen\'s succeeds
2014-01-12T19:38:09 <yzen> colinclark, avtar , Bosmon , michelled what would be the next thing i should take a look at ?
2014-01-12T19:38:21 <colinclark> make sure you delete node_modules and npm install again, Bosmon
2014-01-12T19:38:42 <colinclark> Ok, so we need to resolve this issue, which it sounds like Bosmon is now looking at
2014-01-12T19:38:46 <avtar> yzen: i deployed review2 on the pref server and can\'t start the process now
2014-01-12T19:38:49 <avtar> could you help with that?
2014-01-12T19:39:10 <yzen> avtar: sure
2014-01-12T19:39:19 <yzen> anything i can test locally ?
2014-01-12T19:39:51 <avtar> i\'m running with the stock config https://github.com/GPII/universal/blob/review2/gpii/node_modules/preferencesServer/configs/production.json
2014-01-12T19:40:10 <avtar> i just enabled logging https://github.com/GPII/universal/blob/review2/gpii/node_modules/preferencesServer/configs/production.json#L9
2014-01-12T19:40:24 <avtar> but even without that i would invoke the process like this:
2014-01-12T19:40:38 <avtar> NODE_ENV=production node /srv/nodejs/gpii_pref_server/node_modules/kettle/lib/init.js /srv/nodejs/gpii_pref_server/gpii/node_modules/preferencesServer/configs/
2014-01-12T19:40:56 <avtar> it outputs \'function\' and then dies
2014-01-12T19:41:09 <avtar> any idea what i\'m doing wrong?
2014-01-12T19:41:28 <colinclark> kettle has a magical talent for this when its configuration files aren\'t quite right
2014-01-12T19:41:37 * kasparnet joined the channel
2014-01-12T19:41:42 <colinclark> i.e. outputting "function" and then silently stopping
2014-01-12T19:42:31 <Bosmon> As described by http://issues.fluidproject.org/browse/KETTLE-17 : P
2014-01-12T19:42:43 <Bosmon> Although it appears that the behaviour has improved from outputting nothing at all : P
2014-01-12T19:43:04 * nanook_ has quit
2014-01-12T19:43:05 <colinclark> :)
2014-01-12T19:44:38 * nanook_ joined the channel
2014-01-12T19:46:05 <avtar> Bosmon: i took a look at the description but in this case i haven\'t modified the relative path to the configs directory
2014-01-12T19:46:55 <avtar> npm install finished its work successfully then i deleted the two extra infusion directories that i mentioned above
2014-01-12T19:47:14 <Bosmon> two extra!
2014-01-12T19:47:42 <Bosmon> Surely there should be just one extra ....
2014-01-12T19:47:47 <yzen> avtar: my deploys but with this warnings:
2014-01-12T19:47:51 <yzen> function
2014-01-12T19:47:51 <yzen> connect.multipart() will be removed in connect 3.0
2014-01-12T19:47:53 <yzen> visit https://github.com/senchalabs/connect/wiki/Connect-3.0 for alternatives
2014-01-12T19:47:53 <yzen> connect.limit() will be removed in connect 3.0
2014-01-12T19:47:59 <Bosmon> Ok, I see
2014-01-12T19:48:17 <Bosmon> There\'s an extra jqUnit one now
2014-01-12T19:49:44 <Bosmon> To add to our problems - I\'ve done a completely fresh install of yzen\'s STMM repo and it still fails
2014-01-12T19:50:16 <Bosmon> Could you also do an rm -rf node_modules on yours too, yzen?
2014-01-12T19:50:29 <yzen> yes
2014-01-12T19:50:34 <Bosmon> Thanks
2014-01-12T19:52:06 <colinclark> any further luck, avtar? or are you still stuck and waiting for more help?
2014-01-12T19:52:38 <avtar> i\'m trying to think about what i missed
2014-01-12T19:52:46 <avtar> going to do a fresh deploy again
2014-01-12T19:53:14 <yzen> yes i get the error
2014-01-12T19:53:21 <yzen> i guess i had masters package.json
2014-01-12T19:53:24 <Bosmon> yzen - the invoker error?
2014-01-12T19:53:25 <Bosmon> Cool
2014-01-12T19:53:33 <avtar> yzen: were you using 0.10.24 when you just tested?
2014-01-12T19:53:50 <yzen> avtar: 0.10.24 of what , sorry ?
2014-01-12T19:53:52 <Bosmon> Although I\'m baffled at how you managed to do a npm install in only 3 minutes :)
2014-01-12T19:53:54 <avtar> nodejs
2014-01-12T19:55:14 <colinclark> and what version of nom nom nom are you both using?
2014-01-12T19:55:58 <avtar> 1.3.21
2014-01-12T19:56:33 <colinclark> ok, so that explains why you\'re getting infusion multiples, avtar
2014-01-12T19:57:03 <colinclark> and I think, based on the silence that you\'re experiencing, it\'s definitely an issue with the configuration
2014-01-12T19:57:04 <avtar> i love them all equally
2014-01-12T19:57:09 <colinclark> :) :)
2014-01-12T19:57:21 <colinclark> would it help to screenshare with yzen so he can see the server you\'re working on?
2014-01-12T19:57:23 <Bosmon> Sadly you will need to choose a favorite one : P
2014-01-12T19:57:39 <avtar> yzen: screenhero time?
2014-01-12T19:57:51 <yzen> give me 10min
2014-01-12T19:57:56 <yzen> brb
2014-01-12T19:57:59 <avtar> 10-4
2014-01-12T19:58:02 * yzen has quit
2014-01-12T19:58:44 <avtar> Bosmon: forcing me to choose a favourite is just cruel
2014-01-12T19:59:11 <avtar> i want to nurture each one and see what they bring into the world
2014-01-12T19:59:23 <avtar> alright i\'ll stop now
2014-01-12T19:59:24 <avtar> brb
2014-01-12T20:02:37 <Bosmon> If there were any differences between them other than their FS location, there might be something to that
2014-01-12T20:02:42 <Bosmon> But sadly, they are all just clones : P
2014-01-12T20:03:08 <avtar> Bosmon: i should know in a min or two
2014-01-12T20:12:47 * kasparnet has quit
2014-01-12T20:16:17 <Bosmon> Ok
2014-01-12T20:16:21 <Bosmon> I\'ve resolved the error with the STMM
2014-01-12T20:16:30 <Bosmon> It seems like a simple mishandling of the global namespaces
2014-01-12T20:16:40 <Bosmon> Although as one often says, "I can\'t see how this ever worked" : P
2014-01-12T20:17:05 <Bosmon> That is, I can\'t see how this ever ran with any possible version of universal
2014-01-12T20:18:40 * FerranGaallego has quit
2014-01-12T20:19:00 <colinclark> can you elaborate, Bosmon?
2014-01-12T20:19:47 <Bosmon> I\'ve pushed a version which "seems to work for me" to https://github.com/amb26/GPII_StatisticalMatchmaker1/tree/GPII-275
2014-01-12T20:20:55 <Bosmon> colinclark so, in the following sequence: https://github.com/yzen/GPII_StatisticalMatchmaker1/blob/79449e33d88d1c441c1d24b9fa9ea9d209e18640/lib/StatisticalMatchMaker.js#L4-L16
2014-01-12T20:21:10 <Bosmon> This is in yzen\'s "fixed, condensed" version which he committed a few hours ago
2014-01-12T20:21:45 <colinclark> ah yes
2014-01-12T20:21:49 <Bosmon> He i) allocated the global namespace "gpii.matchMaker.statistical", ii) constructs a component with the same global name "gpii.matchMaker.statistical" but then iii) continues to use the SAME object reference he received in step i)
2014-01-12T20:21:56 <colinclark> ok
2014-01-12T20:22:09 <Bosmon> However, step ii) has necessarily modified the value at the namespace since it now consists of a component creator function
2014-01-12T20:22:16 <Bosmon> Rather than the original {} which was allocated
2014-01-12T20:22:25 <Bosmon> You\'ll be glad to hear that the fix involves a step away from single-var-ism : P
2014-01-12T20:22:45 <colinclark> michelled: Were you able to find any preference sets that a) actually need the STMM and b) has some preferences in them?
2014-01-12T20:23:22 <avtar> i\'m seeing the same issue with a new deployment of the pref server
2014-01-12T20:23:24 <michelled> ah, sorry colinclark yes the prefs for demos 2 and 3 require STMM
2014-01-12T20:23:36 <colinclark> which ones are those, michelled?
2014-01-12T20:23:42 <Bosmon> colinclark - I am testing with the prefs set called "review2_demo2.json"
2014-01-12T20:23:46 <colinclark> ah, ok
2014-01-12T20:23:53 <avtar> should i deploy Bosmon\'s stmm?
2014-01-12T20:24:06 <Bosmon> And I do get some kind of intelligible JSON response out of it at the end
2014-01-12T20:24:12 <michelled> https://github.com/GPII/universal/blob/review2/testData/preferences/review2_demo2.json
2014-01-12T20:24:12 <colinclark> can you paste the reponse?
2014-01-12T20:24:29 <Bosmon> avtar - you could deploy it, yes - but so far the issues with every MM you\'ve deployed seem the same, and different from any issues we have seen locally
2014-01-12T20:24:30 <colinclark> avtar: I\'m thinking the answer is yes, but let me just get some further clarity on what we\'re seeing
2014-01-12T20:24:40 <avtar> ok
2014-01-12T20:24:41 <michelled> https://github.com/GPII/universal/blob/review2/testData/preferences/review2_demo3b_blind.json
2014-01-12T20:24:48 <colinclark> Bosmon: and you think it\'s the nginx reverse proxy that is at issue?
2014-01-12T20:24:56 <Bosmon> colinclark - that is my belief
2014-01-12T20:25:13 <Bosmon> The response actually consists of a JSON payload holding the string "ECONNREFUSED"
2014-01-12T20:25:24 <Bosmon> Which was it what confused me at first into believing that was the direct HTTP error
2014-01-12T20:25:51 <avtar> i could make stmm\'s port accessible directly to the internet so we could test that instead
2014-01-12T20:25:52 <Bosmon> But in fact there is no HTTP error from the proxy front-end, it in fact returns a valid JSON payload presumably indicating that it received an upstream error
2014-01-12T20:26:02 <colinclark> avtar, that would be a good place to start
2014-01-12T20:26:12 <colinclark> deploy Bosmon\'s branch and expose it directly to the world
2014-01-12T20:26:31 <colinclark> It seems to me that if you\'re getting a JSON error response, wouldn\'t it actually be coming from Kettle?
2014-01-12T20:26:42 <colinclark> I can\'t imagine that nginx displays its errors as JSON
2014-01-12T20:27:00 <Bosmon> colinclark - yes, that is certainly suspicious
2014-01-12T20:27:13 <colinclark> let\'s simplify the situation a bit and see what happens, avtar
2014-01-12T20:27:17 <colinclark> if it isn\'t too much trouble
'

b'2014-01-12T18:30:30 <Bosmon> That is, we get an ECONNREFUSED error in a payload
2014-01-12T18:30:46 <Bosmon> So I believe it must be that the nginx layer is misconfigured in the same way
2014-01-12T18:30:54 <yzen> avtar: now what i m wondering i guess is do we expect the cloud based flow manager to work with the proxy ?
2014-01-12T18:31:05 <yzen> colinclark ^
2014-01-12T18:31:24 <yzen> or proxy demo is separate ?
2014-01-12T18:32:25 <colinclark> I suppose kasparnet or michelled might well be able to answer that question from the functional perspecitve--i.e. based on what the preference sets actually look like
2014-01-12T18:32:41 <colinclark> but I was assuming that the Cloud-based Flow Manager would work the same as the local Flow Manager
2014-01-12T18:32:54 <colinclark> i.e. that it would be capable of making requests to any of the three Matchmakers
2014-01-12T18:33:19 <colinclark> Do you think that is going to be difficult?
2014-01-12T18:34:11 <yzen> colinclark: well it is not , we just need to make sure that the matchmaker for the cloud based one is deployed as a proxy rather than in dev mode. (avtar ^)
2014-01-12T18:37:22 <colinclark> Will that require further config changes?
2014-01-12T18:40:47 <colinclark> I\'m assuming, yzen, that this might involve some kind of merging of the cloudBased.json config with fm.ps.sr.dr.mm.os.lms.multipleMatchmakers.json?
2014-01-12T18:41:50 * cindyli joined the channel
2014-01-12T18:42:50 <yzen> colinclark: well not really, and avtar can confirm, we deploy cloud based flow manager and the match maker as 2 separate server (with independent configs). The flow manager points to the match maker and that\'s all it knows about it. Now if we deploy the match maker with correct proxy.json and not development.json that would do, it will just proxy to the real ones.
2014-01-12T18:43:24 <colinclark> Once you\'ve had the chance to fix the STMM bug, can you adjust that config?
2014-01-12T18:43:24 <avtar> confirmed ^
2014-01-12T18:43:29 <colinclark> cool
2014-01-12T18:43:39 <colinclark> We\'re actually getting somewhere here :)
2014-01-12T18:43:40 <colinclark> thanks yzen
2014-01-12T18:44:47 <yzen> colinclark: well only the ips for the match makers would need to be updated so if avtar needs help with that (he\'d know the actual ips), i m here:)
2014-01-12T18:45:09 <colinclark> avtar: Does that make sense to you, and do you know what you have to do?
2014-01-12T18:45:25 <avtar> yzen: so the config is getting changed to proxy.json?
2014-01-12T18:45:29 * kasparnet joined the channel
2014-01-12T18:45:50 <yzen> avtar: yes for the alongside match maker yes
2014-01-12T18:46:44 <colinclark> Just so I\'m clear
2014-01-12T18:46:50 <colinclark> are we changing the contents of proxy.json?
2014-01-12T18:47:00 <colinclark> or change some configuration TO proxy.json?
2014-01-12T18:47:19 <yzen> colinclark: yes we are slightly changing the contents of proxy.json only
2014-01-12T18:47:41 <colinclark> avtar: make sense? ^
2014-01-12T18:47:45 <yzen> changes related to the correct ips
2014-01-12T18:48:10 <yzen> colinclark: is there a request i can make to the local stats matchmaker to see if it works ?
2014-01-12T18:48:42 <colinclark> yes, Bosmon had a pastie with the request that he logged from the FM
2014-01-12T18:48:46 <avtar> colinclark, yzen: the original matchmaker has not been in the list of components that\'s been redeployed using the review2 branch. should that be included now as well?
2014-01-12T18:49:18 <colinclark> http://pastie.org/8626927
2014-01-12T18:49:34 <avtar> yzen: we used your repo for flowmanager. do we now switch to the official gpii/universal repo with the review2 branch?
2014-01-12T18:50:18 <yzen> avtar: that stuff is not in master of GPII/universal
2014-01-12T18:50:50 <yzen> colinclark: right did you do it with curl?
2014-01-12T18:51:18 <yzen> i was just wondering if you have the line saved in your terminal\'s history or something
2014-01-12T18:51:19 <colinclark> yes, Bosmon used the information in that pastie to construct a payload and sent it via curl
2014-01-12T18:51:26 <colinclark> It wasn\'t me, unfortunately
2014-01-12T18:51:35 <colinclark> he\'ll be back soonish
2014-01-12T18:51:51 * cindyli has quit
2014-01-12T18:52:41 <yzen> ok
2014-01-12T18:52:46 <michelled> so yzen, is there something related to the flow manager that needs to get into the review2 branch?
2014-01-12T18:53:22 <yzen> michelled: I\'m  not sure
2014-01-12T18:53:33 <yzen> you mean the cloud based flow manager?
2014-01-12T18:54:28 <colinclark> "yzen: avtar: that stuff is not in master of GPII/universal"
2014-01-12T18:54:31 <colinclark> what did you mean by that?
2014-01-12T18:54:38 <colinclark> that\'s what michelled is asking, I think
2014-01-12T18:54:39 <michelled> yes, it unnerves me that we have deployed your repo instead of the review2 repo. I\'m hoping we can get to the point where there is a well known and consistent set of branches in github
2014-01-12T18:57:33 <yzen> colinclark: s/now/not
2014-01-12T18:57:36 <yzen> not/now
2014-01-12T18:57:41 <colinclark> oh
2014-01-12T18:57:44 <colinclark> phew :)
2014-01-12T18:57:59 <yzen> colinclark: i think the match maker is all good now
2014-01-12T18:58:03 <yzen> i sent you a pull
2014-01-12T18:58:06 <michelled> ah great :)
2014-01-12T18:58:13 <colinclark> So it sounds like we should indeed be deploying off the review2 branch
2014-01-12T18:58:14 <colinclark> thanks, yzen
2014-01-12T18:58:35 <avtar> so to summarize
2014-01-12T18:59:21 <avtar> i should be switching flowmanager to gpii/universal\'s review2 branch
2014-01-12T18:59:43 <michelled> yes
2014-01-12T18:59:44 <avtar> the same goes for the standard matchmaker in the universal repo
2014-01-12T18:59:58 <avtar> but it should now use the proxy config
2014-01-12T19:01:11 <colinclark> sound right, yzen? ^
2014-01-12T19:01:30 <yzen> colinclark: yes
2014-01-12T19:01:47 <colinclark> yzen: Why did you ditch matchPost and its match invoker from the STMM?
2014-01-12T19:01:54 <colinclark> Is it just boilerplate he didn\'t need?
2014-01-12T19:02:20 <michelled> avtar: does using the proxy config require code changes?
2014-01-12T19:02:20 <yzen> colinclark: i yes from what i could tell his match signature is the same as the default one so he needs no other args
2014-01-12T19:02:39 <colinclark> You\'re sure he doesn\'t need transformation to occur at the end of the process?
2014-01-12T19:03:11 <avtar> michelled: i don\'t think so
2014-01-12T19:03:44 <avtar> michelled: this though http://pastie.org/pastes/8627054/text
2014-01-12T19:04:11 <avtar> those preference sets weren\'t uploaded to couch running on the pref server
2014-01-12T19:04:23 <avtar> wonky json
2014-01-12T19:04:42 <michelled> ok, I\'ll fix them up
2014-01-12T19:08:02 <avtar> yzen: https://github.com/GPII/universal/blob/review2/gpii/node_modules/matchMaker/configs/proxy.json
2014-01-12T19:08:15 <avtar> does this mean matchmaker won\'t use port 8080 now?
2014-01-12T19:08:44 <avtar> or is 8080 still implied and now 8078 and 8079 will also be used?
2014-01-12T19:08:57 <yzen> 8080 is default
2014-01-12T19:09:09 <avtar> ok
2014-01-12T19:09:13 <avtar> that will need to be changed
2014-01-12T19:09:17 <yzen> yes 8079 only, flat and rule based depends on where you put them
2014-01-12T19:09:24 <yzen> avtar: that should be fine
2014-01-12T19:10:06 <colinclark> avtar: Some invalid JSON in kasparnet\'s preference sets?
2014-01-12T19:10:14 <avtar> colinclark: yes
2014-01-12T19:10:26 <avtar> yzen: could you please expand on that?
2014-01-12T19:10:48 <avtar> so it\'s going to be 8080 and just 8079?
2014-01-12T19:10:57 <avtar> or 8080, 8078, and 8079?
2014-01-12T19:11:10 <avtar> ah nm
2014-01-12T19:11:22 <avtar> https://github.com/GPII/universal/blob/review2/gpii/node_modules/matchMaker/configs/proxy.json#L15 this is nick\'s app?
2014-01-12T19:11:42 <yzen> avtar: ok so the default for this server: https://github.com/GPII/universal/blob/review2/gpii/node_modules/matchMaker/configs/proxy.json#L10 is 8080
2014-01-12T19:11:55 <yzen> if you want to change it you can do it under https://github.com/GPII/universal/blob/review2/gpii/node_modules/matchMaker/configs/proxy.json#L8
2014-01-12T19:11:56 <kasparnet> hmmm.. weird - are those from the review2 or master branch?
2014-01-12T19:12:22 <yzen> avtar: the default for https://github.com/GPII/universal/blob/review2/gpii/node_modules/matchMaker/configs/proxy.json#L22 is 8079 you can change it right there to anything you want
2014-01-12T19:12:38 <avtar> yzen: ok
2014-01-12T19:12:40 <yzen> mind you that that port should correspond to https://github.com/GPII/universal/blob/review2/gpii/node_modules/matchMaker/configs/proxy.json#L14
2014-01-12T19:12:55 <avtar> colinclark: i feel the port option should be in the config by default ^
2014-01-12T19:13:00 <kasparnet> hmmm.. weird - are those from the review2 or master branch? <-- colinclark / avtar
2014-01-12T19:13:02 <avtar> could that be included at some point?
2014-01-12T19:13:15 <yzen> rule based https://github.com/GPII/universal/blob/review2/gpii/node_modules/matchMaker/configs/proxy.json#L15 should point to wherever you have the rule based matchmaker, local or external. the same goes for the stats match maker
2014-01-12T19:13:18 <michelled> I just looked at review 2 and jsonlint finds them valid
2014-01-12T19:13:22 <michelled> kasparnet: ^
2014-01-12T19:13:23 <avtar> kasparnet: review2
2014-01-12T19:14:44 <avtar> yzen: do you mean line 16?
2014-01-12T19:15:10 <avtar> sorry, line 14 for the stats matchmaker
2014-01-12T19:15:20 <avtar> ?
2014-01-12T19:15:50 <yzen> avtar: not sure i understand
2014-01-12T19:16:02 <avtar> " the same goes for the stats match maker"
2014-01-12T19:16:06 <yzen> stats matcha maker intro is not there yet
2014-01-12T19:16:17 <yzen> but i assume we would need to add it along flat and ruleBased
2014-01-12T19:16:35 <colinclark> we might as well configure the system with URLs for all three matchmakers
2014-01-12T19:16:39 <yzen> colinclark: so you weren\'t sure about the stats match maker ?
2014-01-12T19:16:39 <colinclark> since we know what they are
2014-01-12T19:16:47 <Bosmon> In case anyone is interested, I have created a pastie explaining how to quickly test a web-based matchmaker using CURL:
2014-01-12T19:16:48 <Bosmon> http://pastebin.com/hckBZxZQ
2014-01-12T19:16:52 <colinclark> thank you Bosmon
2014-01-12T19:16:55 <colinclark> you are a lifesaver
2014-01-12T19:17:13 <colinclark> yzen: I just don\'t know what Andy actually intends, versus what he has just cut and pasted
2014-01-12T19:17:51 <colinclark> I guess we will have to evaluate what kind of a payload it returns with this modification
2014-01-12T19:17:58 * kasparnet has quit
2014-01-12T19:18:20 <yzen> colinclark: well it returns something valid from what i can tell , not sure if stats part does it\'s job though
2014-01-12T19:22:13 <michelled> avtar: as far as I can tell, those json files are valid
2014-01-12T19:22:26 <Bosmon> Hi yzen - to me, your pull request still fails - same invoker error as before
2014-01-12T19:22:29 <Bosmon> I\'ll try to get more details
2014-01-12T19:22:55 <yzen> Bosmon: can you give me the exact curl line i can try on my machine ?
2014-01-12T19:23:08 <Bosmon> yzen: http://pastebin.com/hckBZxZQ
2014-01-12T19:25:57 <yzen> Bosmon: works for me
2014-01-12T19:26:27 <colinclark> what does the output look like, yzen?
2014-01-12T19:26:35 <yzen> Bosmon: this http://pastie.org/8627099
2014-01-12T19:26:37 <yzen> colinclark: ^
2014-01-12T19:28:13 <colinclark> Ok, do we have any payloads that actually contain settings?
2014-01-12T19:28:37 <colinclark> michelled: Do you know of some preference sets that require the STMM?
2014-01-12T19:28:55 <Bosmon> I\'ve improved the logging in Kettle so it tells me the following:
2014-01-12T19:29:06 <Bosmon> ASSERTION FAILED:  Error in invoker record: could not resolve members func, funcName or method to a function implementation
2014-01-12T19:29:06 <Bosmon> - got undefined from  { funcName: \'gpii.matchMaker.statistical.match\',
2014-01-12T19:29:06 <Bosmon> args:
2014-01-12T19:29:06 <Bosmon> [ \'{arguments}.0\',
2014-01-12T19:29:06 <Bosmon> \'{arguments}.1\',
2014-01-12T19:29:06 <Bosmon> \'{arguments}.2\',
2014-01-12T19:29:06 <Bosmon> \'{that}.options.inverseRules\' ] } { type: \'dispatchListener\',
2014-01-12T19:29:28 <yzen> Bosmon: how do you deploy the match maker ?
2014-01-12T19:29:53 <Bosmon> I run node bin/statisticalMatchMaker.js
2014-01-12T19:30:25 <yzen> you are sure you trying with my code, smb ?
2014-01-12T19:30:29 <yzen> Bosmon:
2014-01-12T19:30:33 <Bosmon> Something is odd though since this message doesn\'t seem to correspond to the code I have ......
2014-01-12T19:30:34 <Bosmon> Yes
2014-01-12T19:30:39 <Bosmon> I have your code
2014-01-12T19:30:44 <Bosmon> Let me see what is up
2014-01-12T19:31:00 <avtar> colinclark: i forget, which instance of infusion did you say should be kept?
'

b'2014-01-12T17:22:25 <Bosmon> So I assume that the nginx instances are broken
2014-01-12T17:23:48 <avtar> i should have mentioned that\'s not a live running capture
2014-01-12T17:24:09 <avtar> i ran tcpdump and uploaded the captured data so that it could be rendered using a browser
2014-01-12T17:24:26 <Bosmon> Ok
2014-01-12T17:24:30 <Bosmon> How does this help us?
2014-01-12T17:25:01 <avtar> i guess it\'s more so to rule out connection issues leading to the app
2014-01-12T17:25:30 <Bosmon> At the moment it\'s unclear to me even what paths the server is meant to be listening on
2014-01-12T17:25:35 <Bosmon> Can you shed any light on this?
2014-01-12T17:25:40 <Bosmon> Should /match be a valid URL?
2014-01-12T17:26:34 <avtar> i can\'t comment on stmm\'s functionality
2014-01-12T17:27:15 <avtar> it would help if someone could provide more info on what should be happening with the app so that i can troubleshoot the deployment
2014-01-12T17:29:26 <avtar> the log it\'s generated so far just says \'function\'
2014-01-12T17:30:26 * kasparnet joined the channel
2014-01-12T17:31:12 <avtar> brb, looking into michelled\'s pref server request
2014-01-12T17:31:55 <colinclark> kasparnet\'s back! Are you at the airport now?
2014-01-12T17:32:42 <kasparnet> not yet.. in the train
2014-01-12T17:32:46 <colinclark> cool
2014-01-12T17:33:04 <colinclark> it seems like avtar and Bosmon and yzen are starting to tackle the Matchmaker issues
2014-01-12T17:33:15 <kasparnet> ooh, glad to hear that
2014-01-12T17:33:19 <colinclark> so hopefully we\'ll have something working by the time you alnd
2014-01-12T17:33:38 <kasparnet> perfect  - that\'ll give me some time to try out some of the NP sets
2014-01-12T17:33:42 <colinclark> kasparnet: What do you think are the odds of Gregg and Manuel being willing to do the dress rehearsal for the slow demo on Tuesday?
2014-01-12T17:34:19 <kasparnet> colinclark: I think they\'re pretty decent ... if they know we\'re pressed with the demos
2014-01-12T17:34:37 <colinclark> Can you mention it to Gregg if you see him tonight?
2014-01-12T17:34:43 <kasparnet> yup, I will
2014-01-12T17:34:46 <colinclark> I\'ll send him a note when I know more about how well I\'m progressing
2014-01-12T17:34:58 <colinclark> tell him I\'m deathly ill, making progress, but need some time
2014-01-12T17:35:09 <colinclark> fortunately I\'m not actually deathly ill
2014-01-12T17:35:10 <kasparnet> yup will do :)
2014-01-12T17:35:15 <colinclark> thanks dude
2014-01-12T17:35:19 <colinclark> good luck
2014-01-12T17:35:25 <kasparnet> "gregg... Colin is dying"
2014-01-12T17:35:28 <colinclark> lol
2014-01-12T17:35:32 <kasparnet> then I\'ll leave that hanging for a few minutes
2014-01-12T17:35:35 <colinclark> yes
2014-01-12T17:35:35 <colinclark> do that
2014-01-12T17:35:41 <kasparnet> hehe
2014-01-12T17:36:07 <colinclark> safe travels, kasparnet
2014-01-12T17:36:17 <colinclark> and thank you for your dogged persistence
2014-01-12T17:36:21 <colinclark> catted persistence
2014-01-12T17:37:54 <Bosmon> avtar: I\'ve created a pastie holding the HTTP request and response, as seen from the app end
2014-01-12T17:37:55 <Bosmon> http://pastie.org/8626851
2014-01-12T17:38:00 <Bosmon> Is this the info you were asking for?
2014-01-12T17:43:27 <avtar> Bosmon: no, i meant it would be helpful if someone could run the stmm locally and issue a request against it so that i could use that as a reference for its intended behaviour and troubleshoot the cloud deployment
2014-01-12T17:43:35 <Bosmon> pl
2014-01-12T17:43:37 <Bosmon> ok
2014-01-12T17:43:46 <Bosmon> perhaps someone can point me to instructions on how I can run the stmm locally
2014-01-12T17:43:54 <colinclark> Bosmon: It\'s just a node app
2014-01-12T17:43:59 <colinclark> clone it, npm install it, and then run it
2014-01-12T17:44:14 <avtar> i used colinclark\'s repo https://github.com/colinbdclark/GPII_StatisticalMatchmaker1
2014-01-12T17:44:36 <colinclark> updating your proxy.json config to point at localhost:8077
2014-01-12T17:44:51 <Bosmon> Thanks, colinclark and avtar
2014-01-12T17:44:52 <avtar> Bosmon: https://github.com/colinbdclark/GPII_StatisticalMatchmaker1/tree/GPII-275
2014-01-12T17:44:58 <avtar> that branch
2014-01-12T17:44:59 * kasparnet has quit
2014-01-12T17:45:09 <colinclark> Either one is fine, in that tI accidentally committed to master first :P
2014-01-12T17:45:21 <colinclark> I believe Andy has merged my pull request into his repo, too
2014-01-12T17:45:42 <colinclark> Bosmon: Did you add extra logging statements to get this payload output?
2014-01-12T17:45:54 <Bosmon> colinclark - I did, yes
2014-01-12T17:49:02 <avtar> yzen: are you free to test flowmanager?
2014-01-12T17:49:14 * colinclark has quit
2014-01-12T17:49:19 <yzen> you mean sockets?
2014-01-12T17:49:31 <avtar> in its entirety :)
2014-01-12T17:49:48 <yzen> oh you mean the cloud based one ?
2014-01-12T17:49:51 <avtar> i\'m assuming stmm relies on flowmanager as well
2014-01-12T17:49:54 <avtar> yup
2014-01-12T17:50:18 <yzen> yes i can help out with that
2014-01-12T17:50:28 <avtar> *hugs*
2014-01-12T17:58:44 * yzen has quit
2014-01-12T18:04:21 * yzen joined the channel
2014-01-12T18:05:57 * kasparnet joined the channel
2014-01-12T18:08:17 * colinclark joined the channel
2014-01-12T18:08:40 <Bosmon> I\'ve been running colinclark\'s GPII-275 branch of the STMM
2014-01-12T18:08:43 <Bosmon> And get the following errors:
2014-01-12T18:08:45 <Bosmon> http://pastie.org/8626927
2014-01-12T18:08:53 <Bosmon> It seems there is an undefined invoker at the STMM end
2014-01-12T18:09:00 <Bosmon> And the logs from that end are quite worrying
2014-01-12T18:09:06 <Bosmon> There\'s all kinds of irrelevant-seeming universal-like material
2014-01-12T18:09:24 <Bosmon> For example, an onOntologyServer call
2014-01-12T18:10:00 <Bosmon> And userLogin and userUpdate material
2014-01-12T18:10:07 <colinclark> yzen: ^
2014-01-12T18:10:24 <Bosmon> Did someone test this last night as working?
2014-01-12T18:10:39 <Bosmon> I\'ll look into what the undefined invoker is now
2014-01-12T18:10:44 <colinclark> No, no one has ever tested this
2014-01-12T18:10:49 <Bosmon> But I imagine there is still some kind of version mismatch
2014-01-12T18:10:58 <colinclark> Andy confirmed in email that he\'s never tested the app version of the STMM
2014-01-12T18:11:06 <colinclark> and the best we were able to do last night is get the thing running
2014-01-12T18:11:10 <Bosmon> yzen - have you ever tested a version of this repository?
2014-01-12T18:11:22 <colinclark> you\'ve pushed further than anyone except yzen in this regard, Bosmon
2014-01-12T18:11:44 <yzen> Bosmon: no i have not touched stmm
2014-01-12T18:14:02 <colinclark> is there an example of a similarly-structured matchmaker that you have tested, yzen?
2014-01-12T18:14:10 <colinclark> so that we can compare?
2014-01-12T18:14:20 <yzen> colinclark: well rule based match maker afaik works ?
2014-01-12T18:14:30 <colinclark> They say it works, yes
2014-01-12T18:14:37 <colinclark> I don\'t believe avtar\'s quite gotten to a point where he can deploy it
2014-01-12T18:14:44 <colinclark> though we can try it on the server running in Greece
2014-01-12T18:16:57 <colinclark> Bosmon: Do you want to try against the RBMM running in Greece?
2014-01-12T18:17:49 <colinclark> It\'s apparently running here: http://160.40.50.130/
2014-01-12T18:17:51 <colinclark> on port 80
2014-01-12T18:18:11 <yzen> colinclark: well from what i can tell the statistical match maker code is not right
2014-01-12T18:18:12 <colinclark> So you\'ll just have to configure it in proxy.json and use one of Kasper\'s RBMM-based sets
2014-01-12T18:18:23 <colinclark> How so, yzen?
2014-01-12T18:18:37 <Bosmon> I guess that\'s possible, given it provides exactly the same output (i.e. empty) to GET requests as avtar\'s instance :)
2014-01-12T18:19:14 <Bosmon> I will work on the assumption that the payload sent to it by the review2 universal is correct and try prodding it with CURL
2014-01-12T18:19:27 <yzen> sure so the most basic thing i see is here: https://github.com/colinbdclark/GPII_StatisticalMatchmaker1/blob/GPII-275/lib/StatisticalMatchMaker.js#L10-L14 this invoker has args that are not what they supposed to be based on the function definition: https://github.com/colinbdclark/GPII_StatisticalMatchmaker1/blob/GPII-275/lib/StatisticalMatchMaker.js#L48
2014-01-12T18:20:26 <yzen> this is most likely a copy of the rbmm example but it is not what the stats matchmaker needs from what i can see
2014-01-12T18:20:43 <colinclark> Yes, Andy mentioned completely copy-pasting the RBMM implementation
2014-01-12T18:20:48 <colinclark> and said "I don\'t know what it means"
2014-01-12T18:21:44 * kasparnet has quit
2014-01-12T18:22:29 <colinclark> yzen: Is it much work to fork his repo and fix it up?
2014-01-12T18:22:33 <yzen> no
2014-01-12T18:22:38 <colinclark> phew
2014-01-12T18:22:39 <Bosmon> colinclark - I\'ve verified that the RBMM in Greece is working, if slow
2014-01-12T18:22:42 <colinclark> yes
2014-01-12T18:22:50 <colinclark> that\'s why I wanted to ensure that avtar deployed a copy
2014-01-12T18:23:13 <Bosmon> If we can get the STMM working locally, the ground is then cleared for avtar to get the cloud version working
2014-01-12T18:23:22 <colinclark> yep
2014-01-12T18:23:35 <avtar> it\'s almost there
2014-01-12T18:23:41 <avtar> waiting for npm to finish doing its thing
2014-01-12T18:23:58 <Bosmon> We\'re thinking, I think, of setting up an institutional mirror for npm
2014-01-12T18:24:02 <Bosmon> Or I could just try doing it privately
2014-01-12T18:24:10 <Bosmon> Since it seems the team collectively wastes more time on this than anything else
2014-01-12T18:24:48 <Bosmon> I\'ll hop in the shower whilst your npm finishes :)
2014-01-12T18:25:01 <colinclark> Ok, so the evidence is that the RBMM is indeed working
2014-01-12T18:25:10 <colinclark> and avtar, you\'re close to having it deployed on our servers?
2014-01-12T18:25:33 <colinclark> and yzen, you\'re going to fork the STMM and fix the erroneous binding to .match()
2014-01-12T18:25:37 <colinclark> is that correct?
2014-01-12T18:25:39 <avtar> colinclark: nick\'s node and java app have been deployed
2014-01-12T18:25:52 <avtar> i\'m deploying review2 on the preferences server
2014-01-12T18:25:52 <colinclark> wonderful
2014-01-12T18:25:55 <colinclark> ah, great
2014-01-12T18:26:16 <yzen> colinclark: yes
2014-01-12T18:26:21 <avtar> any thoughts on the matchmaker port issue that i mentioned in my email?
2014-01-12T18:26:25 <colinclark> so Bosmon should be able to equally "prod" http://rbmm.gpii.net with curl and see the same result when he tried with the server in Greece?
2014-01-12T18:26:30 <colinclark> I didn\'t understand it, avtar
2014-01-12T18:26:32 <colinclark> can you elaborate?
2014-01-12T18:26:42 <avtar> i need to make matchmaker use a port other than 8080
2014-01-12T18:26:45 <avtar> that it defaults to
2014-01-12T18:26:50 <colinclark> Which Matchmaker?
2014-01-12T18:26:59 <colinclark> the Java side of the RBMM?
2014-01-12T18:27:54 <avtar> no, the o.g. matchmaker that flowmanager uses
2014-01-12T18:27:55 <avtar> https://github.com/GPII/universal/tree/master/gpii/node_modules/matchMaker
2014-01-12T18:29:18 <avtar> this is the config that it\'s been using since it was first deployed for kasper and yzen https://github.com/GPII/universal/blob/master/gpii/node_modules/matchMaker/configs/development.json
2014-01-12T18:29:48 <yzen> avtar: you are talking about the cloud based flow manager right ?
2014-01-12T18:29:50 <colinclark> avtar: You should be able to override the port it\'s running on here: https://github.com/GPII/universal/blob/master/gpii/node_modules/matchMaker/configs/development.json#L9
2014-01-12T18:30:01 <colinclark> is that correct, yzen?
2014-01-12T18:30:14 <Bosmon> avtar\'s version of the Greek RBMM I can verify as not working
2014-01-12T18:30:15 <avtar> yzen: yes, the cloud one
2014-01-12T18:30:18 <yzen> yes , avtar similar to what we did ..
2014-01-12T18:30:23 <Bosmon> It\'s behaviour is the same as his STMM one
'

b'2014-01-12T16:27:52 <Bosmon> Which branch is it in?
2014-01-12T16:28:01 <michelled> it\'s in the review2 branch
2014-01-12T16:28:10 <Bosmon> ok
2014-01-12T16:28:20 <Bosmon> Just for reference, is there a pull request which put it there?
2014-01-12T16:28:27 <Bosmon> Or has it just been applied blind to the branch
2014-01-12T16:28:41 <colinclark> Kasper was issuing large pulls against review2
2014-01-12T16:28:46 <colinclark> and immediately pushing them
2014-01-12T16:28:53 <Bosmon> Oh yes
2014-01-12T16:28:58 <Bosmon> I saw a lot of that happening
2014-01-12T16:28:58 <michelled> this is the pull to universal: https://github.com/GPII/universal/pull/181
2014-01-12T16:29:02 <colinclark> Are you cool to give it a shot, Bosmon, while I continue with the slow demo preparations?
2014-01-12T16:29:04 <colinclark> nicely done, michelled
2014-01-12T16:29:06 <Bosmon> colinclark - yes
2014-01-12T16:29:08 <colinclark> thank you
2014-01-12T16:30:10 <michelled> Bosmon: if it helps, kasparnet has been tracking his pulls to review2 on this JIRA: http://issues.gpii.net/browse/GPII-505
2014-01-12T16:30:20 <Bosmon> Thanks, michelled
2014-01-12T16:30:24 <michelled> np
2014-01-12T16:30:38 <colinclark> The biggest thing I\'m worried about, in addition to web sockets, is Avtar\'s email
2014-01-12T16:30:40 <colinclark> which I don\'t undersatnd
2014-01-12T16:30:58 <Bosmon> which one, colinclark
2014-01-12T16:31:01 <Bosmon> I don\'t see one recently
2014-01-12T16:31:24 <colinclark> it\'s off list
2014-01-12T16:31:27 <colinclark> i\'ll forward it to you
2014-01-12T16:32:00 <Bosmon> michelled - I\'m noticing that the way that review2_demo2.json refers to its matchmaker type is completely different to the way that GPII-270-rbmm-demo.json refers to its one
2014-01-12T16:32:59 <michelled> Bosmon: kasparnet has *not* tested these preference sets yet, so there\'s a good change they aren\'t quite right
2014-01-12T16:33:05 <michelled> kasparnet: are you there?
2014-01-12T16:33:16 <Bosmon> michelled - well presumably he has tested them in some sense in order to paste his exception message
2014-01-12T16:33:24 <Bosmon> But presumably the versions he has tested are not these ones
2014-01-12T16:33:41 <michelled> I didn\'t double check that with him this morning, so I\'m not sure
2014-01-12T16:33:41 <Bosmon> It would have helped a lot, of course, if he could have communicated what preferences he had tested in order to get his exception
2014-01-12T16:33:57 <kasparnet> michelled, Bosmon: i\'m here - but gotta leave in 5 mins to go to the airport - but I\'ll be online there again (should take me 45 mins or so)
2014-01-12T16:34:09 <Bosmon> Similarly, if andreas had communicated what means he had used to verify that the stmm is working
2014-01-12T16:34:27 <michelled> quick question kasparnet - what preferences are you using when testing STMM and RBMM?
2014-01-12T16:34:32 <Bosmon> kasparnet - shall I just add a new MM entry in the proxy.json file like the current one?
2014-01-12T16:34:33 <kasparnet> yeah - I\'m in the process of testing the last backup sets (bak_*)
2014-01-12T16:34:35 <Bosmon> Is that what you did?
2014-01-12T16:34:47 <michelled> also, do you have *any* uncommitted changes in your working directory?
2014-01-12T16:35:07 <kasparnet> michelled: no uncommitted changes no
2014-01-12T16:35:35 <Bosmon> kasparnet - how did you test the stmm?
2014-01-12T16:35:36 <kasparnet> Bosmon, michelled: I tried getting the damn proxy to work with the MMs (running everything but the MMs locally) but got an error message that I couldn\'t figure out
2014-01-12T16:35:43 <Bosmon> kasparnet - we know
2014-01-12T16:35:45 <Bosmon> What did you do!
2014-01-12T16:35:50 <kasparnet> Bosmon: only testing I did was with the flat MM
2014-01-12T16:35:54 <Bosmon> ah
2014-01-12T16:35:59 <Bosmon> You got the error even without the stmm configured?
2014-01-12T16:36:04 <kasparnet> which is our backup plan
2014-01-12T16:36:31 <Bosmon> Please say in your last 3 minutes exactly what you did to receive the error :)
2014-01-12T16:36:35 <kasparnet> well - in my attempt I added a "statistical" entry in the proxy.json file under the matchmaker/config dir
2014-01-12T16:36:39 <kasparnet> ok
2014-01-12T16:39:19 <kasparnet> so I tried to set it to use this config file: https://github.com/GPII/universal/blob/master/gpii/configs/fm.ps.sr.dr.mm.os.lms.multipleMatchMakers.json
2014-01-12T16:39:43 <kasparnet> (under windows that would be: SET NODE_ENV=fm.ps.sr.dr.mm.os.lms.multipleMatchMakers)
2014-01-12T16:39:56 <kasparnet> in the same console I run the node gpii.js command
2014-01-12T16:40:54 <kasparnet> and added the statistical MM (and modified RB MM) entries in this file https://github.com/GPII/universal/blob/master/gpii/node_modules/matchMaker/configs/proxy.json#L15
2014-01-12T16:41:01 <kasparnet> and that should\'ve worked
2014-01-12T16:41:06 <kasparnet> ... except it didnt :)
2014-01-12T16:41:51 <kasparnet> and then I tried doing some debugging to figure out where it went wrong, but got lost
2014-01-12T16:42:39 <kasparnet> also tried running the a local version of the cloudbased FM and connect to a proxied MM pointing to the online MMs - but with just as little success
2014-01-12T16:43:09 <kasparnet> (following the instructions on this page: http://wiki.gpii.net/index.php/Flow_Manager_API)
2014-01-12T16:43:18 <kasparnet> Bosmon, michelled ^
2014-01-12T16:43:48 <Bosmon> kasparnet - thanks
2014-01-12T16:43:53 <Bosmon> So I have just tested this out now
2014-01-12T16:44:07 <Bosmon> And the universal logic seems to work
2014-01-12T16:44:13 <Bosmon> But in fact I get an ECONNREFUSED from http://stmm.gpii.net:80/match
2014-01-12T16:45:17 <Bosmon> colinclark - do you have any evidence that the stmm is in fact deployed, and what form does it take?
2014-01-12T16:45:21 <kasparnet> hmm... dont think I saw any ECONNREFUSED on my end
2014-01-12T16:45:31 <kasparnet> anyway, I really gotta run now.. will reconnect asap
2014-01-12T16:45:34 * kasparnet has quit
2014-01-12T16:48:05 * yzen joined the channel
2014-01-12T16:49:40 <Bosmon> yzen !!!
2014-01-12T16:49:46 <Bosmon> You just missed KASPARNET by 2 minutes :)
2014-01-12T16:49:53 <yzen> Bosmon: hi
2014-01-12T16:49:54 <Bosmon> We are trying to get the STMM working
2014-01-12T16:49:57 <colinclark> It\'s the great YURA
2014-01-12T16:50:18 <Bosmon> kasparnet claims that he gets an exception during event dispatching in Kettle middleware
2014-01-12T16:50:22 <Bosmon> Which so far I\'m unable to reproduce
2014-01-12T16:50:36 <yzen> Bosmon: so does it mean it is actually working for you ?
2014-01-12T16:50:39 <Bosmon> I do, however, get an ECONNREFUSED from the real STMM at http://stmm.gpii.net/match
2014-01-12T16:50:53 <Bosmon> yzen - I am so far unable to demonstrate it working since I don\'t see that the STMM is really online
2014-01-12T16:51:42 <yzen> well it\'s hard to see what\'s going on without the access to logs or debugger, it looks like node is runnin
2014-01-12T16:51:48 <yzen> but not handling the match url
2014-01-12T16:51:55 <Bosmon> Apparently avtar is on his way shortly
2014-01-12T16:52:40 <yzen> Bosmon: do you want me to try to deploy it locally ?
2014-01-12T16:53:57 <Bosmon> yzen - locally for you, or for me :)
2014-01-12T16:54:05 <Bosmon> Do we have instructions on how to deploy it locally?
2014-01-12T16:54:16 <yzen> for me
2014-01-12T16:54:26 <yzen> well is it harder than the rule based ?
2014-01-12T16:54:53 <Bosmon> I guess it would help - colinclark, do you think that would be a good use of yzen\'s time, or should we try to deal with the socket.io issues until avtar arrives?
2014-01-12T16:55:05 <Bosmon> Do we even have enough information on Boyan about his socket.io problems?
2014-01-12T16:56:07 <yzen> Bosmon: well it looks like it does not work for some reason , the server doesn\'t even get hit when i try to open a socket
2014-01-12T16:56:14 <yzen> but still trying to investigate
2014-01-12T16:56:46 <Bosmon> Ok
2014-01-12T16:56:49 <Bosmon> that seems more urgent then
2014-01-12T16:57:05 <yzen> ok
2014-01-12T16:57:44 <Bosmon> So far the balance of evidence seems to be that our cloud version of the STMM isn\'t properly installed, so we\'ll wait for avtar
2014-01-12T16:57:59 <yzen> another thing i found is that for some reason cookie is not set when logging in even though the header is not there, would anybody know if firefox for example even let you save a cookie for localhost ?
2014-01-12T16:58:38 <Bosmon> yzen - we\'ve been able to save cookie for localhost in general, since a lot of our UIO demos have relied on this
2014-01-12T16:58:49 <Bosmon> But there may be oddities with it
2014-01-12T16:58:52 <yzen> Bosmon: you mean from the client side
2014-01-12T16:58:56 <yzen> not through the header
2014-01-12T16:59:04 <Bosmon> For example I think that every localhost URL corresponds to a different "domain" from its point of view
2014-01-12T16:59:33 <Bosmon> yzen - can you explain what you mean?
2014-01-12T16:59:45 <yzen> yes but again , i m fairly certain you can\'t set cookies to localhost in chrome
2014-01-12T17:00:04 <yzen> http://code.google.com/p/chromium/issues/detail?id=56211
2014-01-12T17:00:28 <yzen> so I\'m wondering if it\'s the same case for firefox
2014-01-12T17:01:22 <Bosmon> I believe firefox has different rules
2014-01-12T17:01:28 * avtar joined the channel
2014-01-12T17:01:50 <Bosmon> But I think you can achieve consistent behaviour on both of them by using the workaround at the base of the Chrome issue report
2014-01-12T17:01:54 <Bosmon> I.e. a fake hosts entry
2014-01-12T17:02:04 <Bosmon> That would also be valuable for testing real CORS support : P
2014-01-12T17:02:28 <yzen> Bosmon: yep
2014-01-12T17:02:38 <Bosmon> Welcome, avtar!
2014-01-12T17:02:55 <Bosmon> We\'re having problems verifying that the cloud-based stmm is working correctly
2014-01-12T17:03:16 <Bosmon> In particular both http://stmm.gpii.net/match and http://stmm.gpii.net/ are giving ECONNREFUSED on port 80
2014-01-12T17:03:38 <avtar> hmm
2014-01-12T17:03:40 <avtar> one sec
2014-01-12T17:04:30 <colinclark> hi, sorry, i was just eating pancakes
2014-01-12T17:04:40 <colinclark> but it sounds like you guys are rocking it
2014-01-12T17:05:32 <Bosmon> I am eating "SRIRACHAMOLE (TM)"
2014-01-12T17:05:36 <Bosmon> It is a little intense ......
2014-01-12T17:06:03 <colinclark> what is it?
2014-01-12T17:06:11 <colinclark> something made with sriracha for breakfast?
2014-01-12T17:06:29 <Bosmon> yes
2014-01-12T17:06:40 <Bosmon> The stuff that is not sriracha appears to be guacamole : P
2014-01-12T17:06:49 <michelled> !
2014-01-12T17:07:21 <Bosmon> Urgh.... andreas is saying that he can reproduce kaspar\'s error
2014-01-12T17:07:22 * the-t-in-rtf joined the channel
2014-01-12T17:07:54 <colinclark> I was able to see it yesterday, too
2014-01-12T17:08:09 <colinclark> But I\'m sort of assuming it has to do with an ill-configured proxy.json
2014-01-12T17:08:35 <Bosmon> You mean, if it was well-configured, they would receive an ECONNREFUSED? : P
2014-01-12T17:10:51 <colinclark> yes, I suppose so
2014-01-12T17:15:09 <avtar> Bosmon: http://cloudshark.org/captures/ab498364e746
2014-01-12T17:15:35 <avtar> click anywhere and then select analysis tools > follow stream
2014-01-12T17:15:53 <avtar> that\'s a tcpdump capture on the vm where stmm is running
2014-01-12T17:16:32 <avtar> what type of request are you using?
2014-01-12T17:16:58 <Bosmon> Well, right now, I just type http://stmm.gpii.net/match into a browser and see what happens
2014-01-12T17:17:02 <Bosmon> What happens when you do the same?
2014-01-12T17:19:12 <Bosmon> Well, I appear to have a different IP resolved for that name than the one that appears in that capture log
2014-01-12T17:19:36 <Bosmon> I currently have Non-authoritative answer:
2014-01-12T17:19:36 <Bosmon> Name:    stmm.gpii.net
2014-01-12T17:19:36 <Bosmon> Addresses:  205.211.169.180
2014-01-12T17:19:36 <Bosmon> 205.211.169.181
2014-01-12T17:20:21 <avtar> 180 and 181 are nginx instances
2014-01-12T17:20:25 <Bosmon> ok
2014-01-12T17:20:44 <avtar> i still see a 404
2014-01-12T17:20:55 <Bosmon> Yup
2014-01-12T17:21:16 <Bosmon> Me too
2014-01-12T17:21:29 <Bosmon> Sorry I was reporting ECONNREFUSED before, I was just reporting what node.js reported
2014-01-12T17:21:38 <Bosmon> But from the browser I see a 404
2014-01-12T17:21:49 <Bosmon> So - what kind of problem do we have?
2014-01-12T17:22:18 <Bosmon> So far I\'ve seen no new activity in the tcpdump
'

b'2014-01-12T00:03:50 * kasparnet has quit
2014-01-12T00:13:25 * avtar has quit
2014-01-12T00:24:20 <cindyli> Justin_o_: I pushed up into my GPII-226 branch to add a "go to PCP" button in the PMT demo to open up the PCP demo. can you update your branch when you have a chance.
2014-01-12T00:24:48 <Justin_o_> cindyli: thanks... are you passing the token along?
2014-01-12T00:25:04 <cindyli> no, Justin_o_. that\'s the next step I\'m going to do
2014-01-12T00:25:39 <Justin_o_> okay
2014-01-12T00:29:54 <Justin_o_> cindyli: i\'ve updated my code to use language codes instead of the language  name.
2014-01-12T00:30:06 <Justin_o_> cindyli: i\'ve pushed this up to my branch. I\'ve merged in your changes too.
2014-01-12T00:30:19 <Justin_o_> cindyli: i\'m going to go test this out now and see if it will actually change the language.
2014-01-12T00:32:50 <cindyli> ok, Justin_o_, merging in ur branch...
2014-01-12T00:38:33 <Justin_o_> cindyli: thanks.. so languages other than russian are working for screen reader now.. not for the system though... and no more server error when choosing french
2014-01-12T00:38:43 <colinclark> that\'s a huge improvement
2014-01-12T00:38:58 <colinclark> I\'m not sure that we actually support OS-level language configuration yet
2014-01-12T00:41:44 <Justin_o_> colinclark: okay.. that would make sense why it doesn\'t work then
2014-01-12T00:42:40 <Justin_o_> cindyli: i tested out your go to pcp button but it can\'t find the page
2014-01-12T00:43:22 <Justin_o_> cindyli: i see.. the port number is missing
2014-01-12T00:43:36 <Justin_o_> in my browser anyways.. are you using relative paths?
2014-01-12T00:46:40 <Justin_o_> cindyli: okay, just checked the code.... i guess you don\'t use a port on your system.. can you use a relative URL here instead?
2014-01-12T00:46:46 <cindyli> Justin_o_: you might be using a different url for pcp demo than the default
2014-01-12T00:46:52 <cindyli> change this line to provide ur url: https://github.com/cindyli/prefsEditors/blob/GPII-226/demos/prefsEditor/demo.js#L34
2014-01-12T00:48:30 <Justin_o_> cindyli: okay.. i\'m going to change that to a relative url.. looks like it should work.. also i\'m going to put it right to index.html as the simple web server i\'m using from npm doesn\'t support index.html from the parent
2014-01-12T00:52:17 <FerranGaallego> Hi guys. Here Ferran G\xc3\xa1llego from Code Factory... I have silly question about Git (I\'m not an expert at all... actually, I used it for first time in Cloud4All...). I managed to commit changes to my repo and do a pull request fine, but now, when I commit more changes, it are added to the existing pull request... I would like to have different pull requests for each commit, is there any trick for that? :) ...
2014-01-12T01:00:23 <Justin_o_> FerranGaallego: you have to work in a different branch
2014-01-12T01:00:33 <Justin_o_> FerranGaallego: the pull request will take all of your commits to a branch
2014-01-12T01:00:59 <Justin_o_> FerranGaallego: I typically create a new branch for each thing i\'m working on
2014-01-12T01:01:09 <FerranGaallego> mmmh... so I need to do a new branch for each pull request I want to... ok...
2014-01-12T01:01:21 <Justin_o_> FerranGaallego: yes, that\'s correct
2014-01-12T01:01:32 <FerranGaallego> Thanks Justin!
2014-01-12T01:01:42 <Justin_o_> FerranGaallego: you\'re welcome
2014-01-12T01:02:14 <Justin_o_> cindyli: i\'ve updated the url and pushed up to my repo.. I have to leave at 8. Is there anything i can help you with till then?
2014-01-12T01:05:58 <cindyli> Justin_o_: no, enjoy the rest of the night :)
2014-01-12T01:06:13 <Justin_o_> thanks cindyli, you too
2014-01-12T01:18:45 * michelled has quit
2014-01-12T01:25:56 * cindyli has quit
2014-01-12T01:26:35 * cindyli joined the channel
2014-01-12T01:36:18 * cindyli has quit
2014-01-12T01:47:16 * sgithens has quit
2014-01-12T01:47:19 * FerranGaallego has quit
2014-01-12T02:43:53 * cindyli joined the channel
2014-01-12T02:44:27 * cindyli has quit
2014-01-12T03:16:50 * sgithens joined the channel
2014-01-12T03:16:54 <sgithens> join #fluid-tech
2014-01-12T03:17:01 <colinclark> hi sgithens
2014-01-12T03:17:19 <sgithens> colinclark: DUE!
2014-01-12T03:17:27 <sgithens> s/DUE/DUDE/
2014-01-12T03:17:32 <colinclark> :)
2014-01-12T03:50:39 * cindyli joined the channel
2014-01-12T04:01:38 * cindyli has quit
2014-01-12T04:22:23 <colinclark> Bosmon: It\'s not quite clear to me how I define a new log level
2014-01-12T04:22:59 <colinclark> It looks like I can\'t use a bare integer in a call to fluid.setLogging()
2014-01-12T04:24:01 <Bosmon> Hi colinclark
2014-01-12T04:24:05 <colinclark> hi
2014-01-12T04:24:17 <Bosmon> A logLevel is just a small structure with the following layout: {type: "fluid.marker", value: key, priority: value};
2014-01-12T04:24:21 <colinclark> yes, I see that
2014-01-12T04:24:45 <colinclark> So can I pass a structure like this to setLogging?
2014-01-12T04:24:48 <Bosmon> yes
2014-01-12T04:24:50 <colinclark> or do I have to modify the logLevel structure?
2014-01-12T04:24:51 <colinclark> ok
2014-01-12T04:36:27 <colinclark> Bosmon: Do we have any utilities to pretty print nested JSON structures?
2014-01-12T04:36:40 <Bosmon> colinclark - yes
2014-01-12T04:36:45 <Bosmon> In FluidDebugging.js
2014-01-12T04:37:04 <colinclark> wicked
2014-01-12T04:41:08 <colinclark> wow this whole symbol completion thing is far out
2014-01-12T04:41:21 <colinclark> haven\'t used this since the days of Eclipse, and it never had a really clue about JS syntax
2014-01-12T04:41:32 <colinclark> Sublime Edit seems to be constantly trying to autocomplete things for me
2014-01-12T04:41:37 <colinclark> and often correctly
2014-01-12T04:47:13 <colinclark> Hey Bosmon
2014-01-12T04:47:17 <colinclark> can I distract you again for a sec?
2014-01-12T04:47:21 <Bosmon> sure
2014-01-12T04:47:36 <colinclark> I\'m trying to think through what we actually want
2014-01-12T04:47:42 <colinclark> as opposed to what I want for this demo
2014-01-12T04:47:55 <colinclark> So the framework logs chattily at the fluid.logLevel.INFO level
2014-01-12T04:48:13 <Bosmon> What we actually want is the completion of sgithens uncommitted SCROBBLER work from last San DIEGGOO : P
2014-01-12T04:48:24 <Bosmon> We don\'t want any of this text-based logging crap at all
2014-01-12T04:48:37 <colinclark> scrobble us, sgithens!
2014-01-12T04:49:32 <colinclark> In the interim, I think we want to distinguish our "application\'s" log messages from the framework\'s own
2014-01-12T04:49:54 <colinclark> Which in practice, I guess means that the development configs should stay the same
2014-01-12T04:50:02 <colinclark> i.e. logging as much as humanly possible
2014-01-12T04:50:27 <colinclark> similarly, the production configs stay as quiet as they currently are
2014-01-12T04:50:56 <colinclark> and it\'s just this intermediate case of "show me the application\'s logs only" that we don\'t currently have
2014-01-12T04:51:20 <colinclark> Is there an argument for GPII developers not wanting to see framework-level logs typically at all?
2014-01-12T04:51:34 <Bosmon> Well, the framework-level logs are pretty much rubbish
2014-01-12T04:51:39 <Bosmon> I can barely interpret them myself
2014-01-12T04:51:43 <colinclark> ok
2014-01-12T04:51:52 <colinclark> So, separately, we\'ll improve framework-level logging
2014-01-12T04:52:17 <Bosmon> Clearly we could do a lot to improve them - but really, I think we should just axe them completely in favour of the JSON-based logs that we plan to scrobble
2014-01-12T04:52:24 <colinclark> ok
2014-01-12T04:52:27 <colinclark> scrobble scrobble
2014-01-12T04:52:28 <Bosmon> Even a couple of days work could make a roughly usable log browsing UI
2014-01-12T04:52:54 <Bosmon> I think the moment we have any time to spare to think about what we want from logging, we should scrub the text-based logs completely
2014-01-12T04:53:06 <colinclark> ok
2014-01-12T04:53:11 <colinclark> This logAndNotify utility in the Flow Manager is curious
2014-01-12T04:53:31 <colinclark> I suspect I\'m going to need it elsewhere
2014-01-12T04:54:34 <colinclark> since it seems to be the primary way that one can actually log a payload coming in asynchronously from, say, a data source
2014-01-12T05:56:37 * colinclark has quit
2014-01-12T09:01:14 * kasparnet joined the channel
2014-01-12T09:16:52 * the-t-in-rtf joined the channel
2014-01-12T10:24:31 * the-t-in-rtf has quit
2014-01-12T11:18:19 * JASIGLogBot has quit
2014-01-12T11:18:24 * Justin_o_ has quit
2014-01-12T11:58:01 * Justin_o_ joined the channel
2014-01-12T12:01:16 * JASIGLogBot joined the channel
2014-01-12T12:19:44 * kasparnet has quit
2014-01-12T12:22:17 * kasparnet joined the channel
2014-01-12T12:23:41 * kasparnet has quit
2014-01-12T14:14:24 * kasparnet joined the channel
2014-01-12T14:25:35 * kasparnet has quit
2014-01-12T14:26:36 * kasparnet joined the channel
2014-01-12T14:43:16 * michelled joined the channel
2014-01-12T14:49:05 * FerranGaallego joined the channel
2014-01-12T16:08:59 * colinclark joined the channel
2014-01-12T16:12:17 <colinclark> Bosmon: So reproducing the issue with multiple matchmakers
2014-01-12T16:12:21 <colinclark> I\'m still a bit behind on today\'s emails
2014-01-12T16:12:26 <colinclark> so I should double check
2014-01-12T16:12:36 <colinclark> but as I saw it yesterday, we were throwing an exception somewhere in the stack
2014-01-12T16:12:40 <colinclark> unable to fire an event
2014-01-12T16:12:48 <Bosmon> yes
2014-01-12T16:12:55 <colinclark> I was able to reproduce it last night simply by switching to the .multipleMatchmakers configuration
2014-01-12T16:13:16 <colinclark> We just need to update the configuration--wherever it is--for the Flow Manager so that it points to the versions of the infrastructure that Avtar has deployed
2014-01-12T16:13:22 <colinclark> probably simplest to start with the STMM
2014-01-12T16:13:31 <colinclark> which is deployed at stmm.gpii.net on port 80
2014-01-12T16:14:05 <Bosmon> Ok, so in theory I could test this out without having to do it in a VM?
2014-01-12T16:16:20 <colinclark> Yes
2014-01-12T16:16:34 <Bosmon> Ok - can you let me know what I should do?
2014-01-12T16:17:05 <colinclark> I guess the first step is to find where the configurations for the Matchmaker URLs are
2014-01-12T16:17:17 <colinclark> and also find a preference set in the testData folder that requires the STMM
2014-01-12T16:20:16 <Bosmon> It appears the URLs are in proxy.json
2014-01-12T16:20:40 <Bosmon> But I don\'t see it has an entry for the stmm
2014-01-12T16:20:54 <Bosmon> At least the on in trunk
2014-01-12T16:21:04 <Bosmon> Is this in a branch?
2014-01-12T16:23:18 <colinclark> no
2014-01-12T16:23:22 <colinclark> I suspect Kasper configured it himself
2014-01-12T16:23:32 <colinclark> we\'ll presumably need to add entries for the other MMs
2014-01-12T16:23:35 <colinclark> +                conditionPath: "catsAreDecent",
2014-01-12T16:23:39 <Bosmon> And I guess he is now off travelling .......
2014-01-12T16:23:51 <colinclark> Very close, anyway
2014-01-12T16:26:02 <colinclark> I\'m just hopping back into my VM so I can follow along, Bosmon
2014-01-12T16:26:06 <colinclark> where is proxy.json?
2014-01-12T16:26:09 <Bosmon> So, at a rough guess, what we need to do is add in a new user mirroring the existing GPII-270-rbmm-demo.json
2014-01-12T16:26:15 <Bosmon> Only with an entry for a different matchmaker
2014-01-12T16:26:21 <Bosmon> and then add a corresponding entry into proxy.json
2014-01-12T16:26:42 <colinclark> yes
2014-01-12T16:26:46 <Bosmon> universal/gpii/node_modules/matchMaker/configs/proxy.json
2014-01-12T16:26:54 <Bosmon> Don\'t you have a facility to hit the F8 key in your editor? : P
2014-01-12T16:27:16 <colinclark> I\'m completely lost in Sublime Text
2014-01-12T16:27:25 <colinclark> I don\'t even know how to search across the whole project
2014-01-12T16:27:27 <michelled> btw  review2_demo2.json is a preference that asks for STMM
2014-01-12T16:27:42 <colinclark> thanks, fish
2014-01-12T16:27:43 <colinclark> that\'s great
2014-01-12T16:27:50 <Bosmon> michelled - I don\'t have that one
'

