b'2014-02-26T17:51:12 <colinclark> but I agree that the time is not right
2014-02-26T17:51:14 <Justin_o> colinclark:  thanks :)
2014-02-26T17:51:26 <colinclark> I\'m just trying to make sure that alongside any short-term decision, we also articulate what we actually ant
2014-02-26T17:51:27 <colinclark> want
2014-02-26T17:51:47 <Justin_o> sure
2014-02-26T17:51:51 <Justin_o> that\'s reasonable
2014-02-26T17:51:58 <colinclark> It wouldn\'t be the end of the world to hardcode for production mode for the pilots
2014-02-26T17:52:13 <colinclark> in fact it might at least encourage everyone to test with the real thing
2014-02-26T17:52:24 * jhung has quit
2014-02-26T17:52:39 * yzen joined the channel
2014-02-26T17:53:06 <kasparnet> colinclark, Justin_o: I just discovered something
2014-02-26T17:53:12 <colinclark> cool
2014-02-26T17:53:21 <kasparnet> it seems the flowmanager supports a /save/<token> URL
2014-02-26T17:53:39 <kasparnet> which seems to work a bit proxy\'ish
2014-02-26T17:53:48 <Justin_o> kasparnet: would that work to create users too?
2014-02-26T17:54:05 <kasparnet> Justin_o: well, the signature is /save/:token?
2014-02-26T17:54:12 <kasparnet> which would indicate that it does
2014-02-26T17:54:19 <kasparnet> though I haven\'t actually tried it out myself yet
2014-02-26T17:54:32 <Justin_o> :token means optional?
2014-02-26T17:54:41 <kasparnet> the "?" does
2014-02-26T17:54:48 <Justin_o> kasparnet: okay.. thanks
2014-02-26T17:54:50 <kasparnet> :token means that is\'s a variable
2014-02-26T17:54:54 * jhung joined the channel
2014-02-26T17:54:58 <kasparnet> the ":" does
2014-02-26T17:55:06 <Justin_o> kasparnet: okay.. as opposed to an actual resource
2014-02-26T17:55:28 <kasparnet> yeah, exactly ... something like "/save" is static
2014-02-26T17:58:18 * jhung has quit
2014-02-26T17:58:22 * jhung joined the channel
2014-02-26T17:59:01 <kasparnet> The resource: https://github.com/GPII/universal/blob/master/gpii/node_modules/flowManager/src/FlowManager.js#L108-L111
2014-02-26T17:59:01 <kasparnet> the implementation: https://github.com/GPII/universal/blob/master/gpii/node_modules/flowManager/src/UserSave.js
2014-02-26T17:59:01 <kasparnet> Justin_o, colinclark: ^
2014-02-26T17:59:02 <Justin_o> kasparnet: thanks.. that makes sense.. i have to run for an IDRC event.. and we have a community meeting after i get back, but i\'ll try to test that save option out when i get back
2014-02-26T17:59:10 * colinclark has quit
2014-02-26T17:59:22 <kasparnet> ok cool
2014-02-26T18:02:38 * jhung has quit
2014-02-26T18:04:39 * michelled has quit
2014-02-26T18:24:37 * cindyli has quit
2014-02-26T18:32:22 * amilchev2 joined the channel
2014-02-26T18:32:44 <amilchev2> hi Justin_o
2014-02-26T18:32:51 <amilchev2> let me know if you\'re here
2014-02-26T18:33:44 * the-t-in-rtf joined the channel
2014-02-26T18:37:54 <kasparnet> amilchev2: 30 mins ago he rote: kasparnet: thanks.. that makes sense.. i have to run for an IDRC event.. and we have a community meeting after i get back, but i\'ll try to test that save option out when i get back
2014-02-26T18:38:03 <kasparnet> s/rote/wrote
2014-02-26T18:42:53 <amilchev2> oh, thanks kasparnet
2014-02-26T19:02:54 * simonjb has quit
2014-02-26T19:33:33 * cindyli joined the channel
2014-02-26T19:39:39 * [o__o] has quit
2014-02-26T19:39:39 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:40:09 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:40:29 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:41:18 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:42:21 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:44:39 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:45:30 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:45:33 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:46:13 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:46:58 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:49:39 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:50:29 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:50:34 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:51:14 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:51:18 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:52:21 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:53:12 * [o__o] joined the channel
2014-02-26T19:53:38 * cindyli has quit
2014-02-26T19:55:32 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:56:13 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:56:58 * -- BotBot disconnected, possible missing messages --
2014-02-26T19:57:11 * anvk1 joined the channel
2014-02-26T19:58:34 * Justin_o joined the channel
2014-02-26T19:59:14 * Justin_o has quit
2014-02-26T20:00:06 * yzen_ joined the channel
2014-02-26T20:01:38 * colinclark has quit
2014-02-26T20:01:40 * anvk has quit
2014-02-26T20:02:17 * Bosmon has quit
2014-02-26T20:02:48 * yzen has quit
2014-02-26T20:04:24 * Bosmon joined the channel
2014-02-26T20:05:40 * Justin_o joined the channel
2014-02-26T20:06:20 <Justin_o> amilchev2, kasparne_: I\'m back now.. i had some connectivity issues with irc
2014-02-26T20:07:00 * michelled has quit
2014-02-26T20:07:32 * jhung has quit
2014-02-26T20:07:42 * jhung joined the channel
2014-02-26T20:09:18 * the-t-in-rtf joined the channel
2014-02-26T20:11:13 * jessm_ joined the channel
2014-02-26T20:15:09 * amilchev2 has quit
2014-02-26T20:15:30 * amilchev2 joined the channel
2014-02-26T20:19:02 * jessm has quit
2014-02-26T20:19:20 * jessm_ is now known as jessm
2014-02-26T20:20:03 * amilchev2 has quit
2014-02-26T20:21:01 * jhung has quit
2014-02-26T20:21:01 * jhung joined the channel
2014-02-26T20:21:03 * jessm has quit
2014-02-26T20:21:03 * jessm joined the channel
2014-02-26T20:21:37 * cindyli joined the channel
2014-02-26T20:21:37 * cindyli1 has quit
2014-02-26T20:22:17 * michelled joined the channel
2014-02-26T20:31:26 * amilchev2 joined the channel
2014-02-26T20:34:30 * kasparne_ has quit
2014-02-26T20:34:57 <amilchev2> hi Justin_o, may I answer here to your email?
2014-02-26T20:35:06 <Justin_o> amilchev2: sure
2014-02-26T20:35:26 <amilchev2> first, I\'m using prefsEditors master and universal master (up to date)
2014-02-26T20:36:00 * kasparnet joined the channel
2014-02-26T20:36:33 <amilchev2> here\'s what I do: open PMT, adjust contrast theme to be "white on black" for instance (contrast theme because I\'m testing on windows)
2014-02-26T20:37:45 <amilchev2> then open pcp with the following url ...pcp.html?<token> - I copy and paste the token from the dialog box in PMT
2014-02-26T20:38:26 <amilchev2> from pcp, change the contrast theme to yellow on black and click save
2014-02-26T20:41:56 <amilchev2> then I see in testData/preferences a new token being generated
2014-02-26T20:42:28 * jhung has quit
2014-02-26T20:42:42 <amilchev2> and the JSON for the OLD token is correct - with yellow-black contrast theme
2014-02-26T20:46:29 <amilchev2> is the token generation 1) something you can reprocuce 2) wanted?
2014-02-26T20:47:22 <amilchev2> also, how have you tested it and what did you get?
2014-02-26T20:48:52 * jhung joined the channel
2014-02-26T20:58:20 * the-t-in-rtf has quit
2014-02-26T20:58:59 * amilchev2 has left the channel
2014-02-26T20:59:06 * anastasiac has quit
2014-02-26T20:59:07 * michelled has quit
2014-02-26T20:59:44 * jhung has quit
2014-02-26T21:00:53 * michelled joined the channel
2014-02-26T21:01:57 * jhung joined the channel
2014-02-26T21:02:01 * anastasiac joined the channel
2014-02-26T21:04:41 * simonjb joined the channel
2014-02-26T21:32:13 * danaayotte joined the channel
2014-02-26T21:35:45 * Bosmon has quit
2014-02-26T21:35:50 * kasparnet has quit
2014-02-26T21:35:58 * Bosmon joined the channel
2014-02-26T21:38:38 * jhung has quit
2014-02-26T21:41:49 * anastasiac has quit
2014-02-26T21:46:03 * anastasiac joined the channel
2014-02-26T21:47:18 * vjoanna1 has quit
2014-02-26T22:00:12 * vjoanna joined the channel
2014-02-26T22:01:51 * danaayotte has quit
2014-02-26T22:03:02 * kasparnet joined the channel
2014-02-26T22:03:52 * anvk1 has quit
2014-02-26T22:07:18 * yzen_ has quit
2014-02-26T22:07:40 * clown has left the channel
2014-02-26T22:10:43 * kasparnet has quit
2014-02-26T22:12:29 * kasparnet joined the channel
2014-02-26T22:12:33 * kasparnet has quit
2014-02-26T22:23:43 * jessm has quit
2014-02-26T22:28:11 * simonjb has quit
2014-02-26T22:34:07 * cindyli has quit
2014-02-26T22:37:36 * colinclark joined the channel
2014-02-26T22:56:46 * anastasiac has quit
2014-02-26T23:49:59 * vjoanna has quit
'

b'2014-02-26T16:07:13 <colinclark> I guess that\'s the question, yes
2014-02-26T16:07:25 <colinclark> although it already starts to presume an answer
2014-02-26T16:07:35 <colinclark> but I think we can probably safely presume
2014-02-26T16:07:39 <colinclark> So, to put it another way
2014-02-26T16:07:53 <colinclark> if this "accidental API" had never been used
2014-02-26T16:08:06 <colinclark> say, everyone was testing in production mode as you\'d expect they might do
2014-02-26T16:08:10 <colinclark> what would the do?
2014-02-26T16:08:16 <colinclark> they do
2014-02-26T16:08:41 <colinclark> Presumably they\'d make calls to the Preferences Server to deal with the issue of preference set persistence
2014-02-26T16:08:57 <colinclark> i.e. retrieving and saving and initial creation
2014-02-26T16:09:32 <colinclark> and they\'d make calls to a (potentially not active) Flow Manager to deal with concerns related to a device\'s transient state
2014-02-26T16:09:41 <Justin_o> colinclark: i guess the issue here is less of not wanting to use more than one url but one of communication and expectation...
2014-02-26T16:09:56 <colinclark> I don\'t doubt it, but can you elaborate?
2014-02-26T16:11:47 <Justin_o> 1) the way the local dev instance is set up to hide the fact that these are different urls 2) the api documentation. 3) personal conversations that have mentioned that the flow manager acted as a proxy. I can\'t speak for what chris and alex were told, but for me that\'s what i\'ve seen.. so i can understand why it wouldn\'t be implemented as two separate urls
2014-02-26T16:13:39 <colinclark> #2 is less than two weeks old
2014-02-26T16:13:48 <colinclark> so I don\'t imagine it\'s a source of any kind of systemic issue
2014-02-26T16:13:55 <colinclark> and we can\'t really address #2 until we finish having this conversation
2014-02-26T16:13:58 <Justin_o> colinclark: sure, but that\'s why the other two points were so much more important
2014-02-26T16:14:14 <colinclark> #3 I don\'t know so much about
2014-02-26T16:14:21 <colinclark> but it\'s probably all kasparnet\'s fault :P
2014-02-26T16:14:29 <Justin_o> colinclark: the only way for people on the PMT/PCP side to know how to use things is by asking question and seeing what the dev instance did
2014-02-26T16:15:04 <colinclark> I\'m kidding about the above
2014-02-26T16:15:18 <Justin_o> kasparnet: ^ :)
2014-02-26T16:15:28 <colinclark> So, Justin_o, you\'re right
2014-02-26T16:15:56 <colinclark> but the question really is, what are we going to do about it?
2014-02-26T16:16:17 <colinclark> I mean, you can point out #1 as an architectural issue in Kettle or the Flow Manager
2014-02-26T16:16:47 <colinclark> #2 we need to be clear about and then it\'s as simple as updating a wiki page
2014-02-26T16:16:59 <colinclark> and #3, again, depends on having enough clarity to send a consistent message
2014-02-26T16:17:33 <Justin_o> colinclark: just to be clear, i\'m not finger pointing.. i was just answering your question "So then the question is, why does the PMT even both to try to use the "accidental API" of the Flow Manager\'s /user resource?"
2014-02-26T16:17:53 <colinclark> ok, fair enough
2014-02-26T16:18:05 <colinclark> so the answer is "because it seemed to work," presumably?
2014-02-26T16:18:10 <colinclark> which is a perfectly reasonable answer
2014-02-26T16:18:17 <colinclark> I\'m not trying to point fingers either
2014-02-26T16:18:19 <Justin_o> colinclark: that\'s probably the sum of it, yes
2014-02-26T16:18:30 <colinclark> I\'m just trying to retrace the path of thinking that led us to this conversation
2014-02-26T16:18:51 <colinclark> or lack thereof, in some cases :)
2014-02-26T16:18:59 <colinclark> such as the wiki page I posted with the words "the Flow Manager acts as a proxy for the Preferences Server"
2014-02-26T16:19:01 <Justin_o> colinclark: so we have till the end of today to get it working.. i think that\'s the deadline
2014-02-26T16:19:01 <Justin_o> okay
2014-02-26T16:19:33 <colinclark> which, as you say, was entirely based on observation
2014-02-26T16:20:10 <colinclark> rather than on intention
2014-02-26T16:20:11 <colinclark> Okay, so
2014-02-26T16:20:18 <colinclark> Can we leap to some establishing conclusions?
2014-02-26T16:20:46 <colinclark> Is it fair to say:
2014-02-26T16:20:54 <colinclark> 1. The Preferences Management Tool should use the Preferences Server directly as its source of persistence
2014-02-26T16:22:18 <Justin_o> sure
2014-02-26T16:23:04 <Justin_o> sure, locally or remotely
2014-02-26T16:23:07 <colinclark> yup
2014-02-26T16:23:09 <colinclark> 2. The PMT should use, where appropriate, a local Flow Manager instance as way to determine the current state of a user\'s particular device
2014-02-26T16:23:41 <Justin_o> login/logout, current, user.. etc..
2014-02-26T16:24:05 <Justin_o> i guess etc. is vague.. so lets just say the first two login/logout and current logged in user
2014-02-26T16:24:06 <colinclark> yup
2014-02-26T16:24:14 <colinclark> let\'s be less vague, just for fun :)
2014-02-26T16:24:49 <colinclark> a. Triggering a log in when a new user token has been established and an initial preference set has been saved by the PMT
2014-02-26T16:25:06 <colinclark> b. Determining if there is a currently logged in user
2014-02-26T16:25:37 <colinclark> c. Signalling changes in i) the user\'s persistent preference set and ii) the temporary state of the system
2014-02-26T16:25:54 <colinclark> where c i. is for the PMT and c ii. is for the PCP, typically
2014-02-26T16:26:15 <colinclark> Does the PMT or PCP provide a UI for manually logging out?
2014-02-26T16:26:36 <Justin_o> colinclark: PMT does, but the one for PCP isn\'t hooked up yet.. and it\'s not a blocker jira so it probably won\'t
2014-02-26T16:28:17 <Justin_o> in terms of c i and c ii this doesn\'t really work at the moment.. theres a hack where the user is logged out and then logged back in. This is because the flow manager or whichever server is supposed to handle this doesn\'t at the moment.
2014-02-26T16:28:58 <colinclark> yup, that\'s fair
2014-02-26T16:28:59 <colinclark> ok
2014-02-26T16:29:16 <Justin_o> or perhaps c i shouldn\'t even be a responsibility of PMT, especially if it is remote. It may be something that should be handled by the flow manager directly listening to changes from the preferences server
2014-02-26T16:29:45 <colinclark> Justin_o: That\'s possible, but it\'s awkward to make distributed event systems of this sort
2014-02-26T16:30:30 <colinclark> and it gets really complicated when you think that there might well be a dozen independent Preferences Servers being load balanced
2014-02-26T16:30:32 <Justin_o> maybe web sockets, but i agree that it\'s a discussion for another time
2014-02-26T16:31:02 <kasparnet> holy shit you two have been chatty
2014-02-26T16:31:12 <Justin_o> kasparnet: lol
2014-02-26T16:31:26 <Justin_o> you can just read the last part i think :)
2014-02-26T16:31:36 <colinclark> Yeah, I think the Flow Manager needs to be the point where these kinds of events are signalled by the component that made the change
2014-02-26T16:32:16 <colinclark> Rather than imagining that either the Flow Manager is polling for changes on the Preferences Server or that the Preferences Server is somehow signalling a potentially arbitrary set of Flow Managers
2014-02-26T16:32:25 <colinclark> anyway, you\'re right that Web Sockets are the key
2014-02-26T16:33:01 <colinclark> Okay, so let\'s imagine a utopian world where people tested with the production configuration of the Flow Manager
2014-02-26T16:33:24 <colinclark> and where I didn\'t create wiki page that promises a contract in the Flow Manager that doesn\'t in practice exist
2014-02-26T16:33:26 <colinclark> :)
2014-02-26T16:33:42 <colinclark> So the PMT needs to make direct requests to the Preferences Server for persistence
2014-02-26T16:34:11 <colinclark> and direct requests to an (optional) local Flow Manager for any kind of state-related issues
2014-02-26T16:34:21 <colinclark> I guess this gets us to our central problem
2014-02-26T16:34:49 <colinclark> which is that "it happened to work" and "it\'s the only way to make it work with our current situation" are in fact combined
2014-02-26T16:34:53 <colinclark> I think
2014-02-26T16:38:03 <colinclark> So, with the PMT having been implemented with a real server-side
2014-02-26T16:38:24 <colinclark> it really can\'t make arbitrary cross-domain requests
2014-02-26T16:43:25 <colinclark> and I\'m imagining that if we\'re deploying the PMT locally, we\'re going to have a hard time allowing the appropriate CORS origins on the Preferences Server for an arbitrary set of devices
2014-02-26T16:46:14 <Justin_o> colinclark: sorry was at standup
2014-02-26T16:46:32 <colinclark> no worries
2014-02-26T16:46:33 <Justin_o> colinclark: so i think we can make it work, i just really wanted to know how to go about doing it in the most correct way
2014-02-26T16:46:35 <colinclark> i totally forgot
2014-02-26T16:46:47 <Justin_o> colinclark: sorry, should have told you before i ran off
2014-02-26T16:47:07 <Justin_o> colinclark: anyways, so for PMT as it is today. i was able to save to the remote prefs server
2014-02-26T16:47:46 <Justin_o> colinclark: but we need to sort out the fact that it was expected for all of the urls to have the same base url..
2014-02-26T16:48:02 <Justin_o> also the switching between dev/production is an issue for PMT/PCP
2014-02-26T16:49:44 <colinclark> tell me more about these things
2014-02-26T16:49:51 <colinclark> "able to save to the remote prefs server"
2014-02-26T16:49:58 <colinclark> and "expected for all of the urls to have the same base url"
2014-02-26T16:53:14 <colinclark> In terms of the right way to do it, my impression--and I\'m perhaps jumping the gun a bit--is that all communication with the local Flow Manager needs to happen via web sockets requests, and that the PMT needs to have a proper server side, even if it\'s just minimally serving up static resources plus making HTTP calls to the Preferences Server
2014-02-26T16:53:47 * yzen has quit
2014-02-26T16:54:52 <Justin_o> colinclark: so currently the GPII store or session.. i can\'t remember which off hand, but it takes in a the base url as an option.. and this is used for all URLS throughout.. now PCP does hard code some things but they are for web sockets which aren\'t being used at the moment.
2014-02-26T16:54:52 <Justin_o> if i changed this to point at the remote preferences server, i could get the save to work, but of course the login failed
2014-02-26T16:55:23 <colinclark> ah, ok
2014-02-26T16:55:40 <colinclark> we need multiple data sources
2014-02-26T16:55:54 <Justin_o> colinclark: perhaps, yes
2014-02-26T16:55:54 <colinclark> the alternative is to write a simple set of handles for the production configuration of the Flow Manager
2014-02-26T16:55:58 <colinclark> to implement this "proxy"
2014-02-26T16:55:59 <colinclark> it\'s not hard
2014-02-26T16:56:09 <Justin_o> colinclark: exactly
2014-02-26T16:56:10 <colinclark> it just probably isn\'t what we ultimately want
2014-02-26T16:56:17 <Justin_o> right
2014-02-26T16:56:19 <colinclark> ok
2014-02-26T16:56:27 <colinclark> I\'m glad we were able to talk through this
2014-02-26T16:56:33 <colinclark> in terms of separating what\'s happening from what we want
2014-02-26T16:56:46 <colinclark> which leaves us with the question of what is most practical in time for the pilots
2014-02-26T16:57:13 <colinclark> a) refactor PCP/PMT to separate the "realtime" requests from those to the preference server
2014-02-26T16:57:39 <colinclark> b) implement handlers for /user on the Flow Manager in the production configuration, which simply defer to the remote preferences server
2014-02-26T16:57:45 <colinclark> is that right?
2014-02-26T16:58:09 <Justin_o> colinclark: that sounds right
2014-02-26T17:02:19 <clown> kasparnet:  meeting time?
2014-02-26T17:02:45 <kasparnet> clown: yeah, thanks for the reminder :)
2014-02-26T17:03:00 <clown> kasparnet:  no problem.
2014-02-26T17:05:00 <kasparnet> colinclark, Bosmon: will you be joining?
2014-02-26T17:05:25 * clown image of a conjoined colinclark and Bosmon is disturbing
2014-02-26T17:06:05 <kasparnet> :D
2014-02-26T17:11:27 <colinclark> on my way
2014-02-26T17:17:09 <Justin_o> colinclark, kasparnet: if you guys figure out what the best approach should be at your meeting, could you please let me know
2014-02-26T17:17:32 <colinclark> yes, for sure
2014-02-26T17:19:36 * yzen joined the channel
2014-02-26T17:22:01 <Justin_o> colinclark: thanks
2014-02-26T17:23:39 * yzen has quit
2014-02-26T17:33:27 * jhung has quit
2014-02-26T17:33:53 * jhung joined the channel
2014-02-26T17:42:05 * jessm joined the channel
2014-02-26T17:45:20 <Justin_o> colinclark, kasparnet: so PMT/PCP don\'t have any way to distinguish between development and production modes right now.. here are some possible solutions that cindyli
2014-02-26T17:45:24 <Justin_o> and I came up with
2014-02-26T17:45:48 <Justin_o> 1) whoever sets up the demo will have to manually change the url that it will be pointing to
2014-02-26T17:46:11 <Justin_o> 2) we use a query parameter to specify which mode we are in and have a grade for development to point at the local prefs server
2014-02-26T17:46:26 <Justin_o> 3) we have two different demos, 1 local and 1 remote
2014-02-26T17:46:49 <Justin_o> colinclark, kasparnet, michelled ^
2014-02-26T17:46:55 <Justin_o> any preference?
2014-02-26T17:47:25 <colinclark> What if the PMT and PCP only supported production mode, Justin_o?
2014-02-26T17:47:31 <colinclark> I\'m probably talking crazy
2014-02-26T17:48:17 <Justin_o> colinclark: we can do that but it will make development more difficult and you run the risk of changing users on the remote server that may be being used by others at the moment
2014-02-26T17:48:50 <Justin_o> colinclark: we could do it for now though, since it will be needed soon for the pilots and then change it back after
2014-02-26T17:48:54 <colinclark> So here\'s another:
2014-02-26T17:49:12 <Justin_o> alhtough i think it\'s still safer to leave it as dev in the repo and to just change it manually when setting up for the pilots
2014-02-26T17:49:57 <colinclark> 4) Create a proper Kettle server for the PMT, which is able to direct options blocks into HTML pages, by which the URL and other key parameters can be communicated to the client side
2014-02-26T17:50:19 <colinclark> but I realize that this isn\'t possible for the pilots
2014-02-26T17:50:26 <Justin_o> colinclark: that would have to create both PMT and PCP though since they both need this
2014-02-26T17:50:41 <Justin_o> colinclark: probably not since i have no idea how to implement it :)
2014-02-26T17:50:53 <colinclark> You\'re a very smart programmer
2014-02-26T17:50:55 <colinclark> and a fast learner
2014-02-26T17:51:06 <colinclark> so I have no doubt that, when the time is right, you\'d be able to do an amazing job of it
'

b'2014-02-26T00:04:21 * kasparnet has quit
2014-02-26T00:06:41 * kasparnet joined the channel
2014-02-26T00:07:01 * sgithens has quit
2014-02-26T00:12:22 * vjoanna joined the channel
2014-02-26T00:26:59 * vjoanna has left the channel
2014-02-26T00:27:11 * kasparnet has quit
2014-02-26T00:49:19 * michelled has quit
2014-02-26T01:04:56 * michelled joined the channel
2014-02-26T02:36:25 * colinclark joined the channel
2014-02-26T02:47:29 * michelled has quit
2014-02-26T02:50:04 * colinclark has quit
2014-02-26T03:00:40 * colinclark joined the channel
2014-02-26T04:27:33 * yzen joined the channel
2014-02-26T04:46:11 * Bosmon has quit
2014-02-26T04:51:21 * Bosmon joined the channel
2014-02-26T05:08:18 * avtar has quit
2014-02-26T05:26:40 * colinclark has quit
2014-02-26T06:23:02 * jhernandez has quit
2014-02-26T06:49:07 * yzen has quit
2014-02-26T10:04:26 * kasparnet joined the channel
2014-02-26T10:07:04 * kasparnet has quit
2014-02-26T10:08:41 * kasparnet joined the channel
2014-02-26T11:03:35 * jhernandez joined the channel
2014-02-26T12:07:26 * jhernandez has quit
2014-02-26T12:44:42 * jhung joined the channel
2014-02-26T13:13:50 * danaayotte joined the channel
2014-02-26T13:41:07 * cindyli joined the channel
2014-02-26T13:46:05 * Justin_o joined the channel
2014-02-26T14:07:46 * michelled joined the channel
2014-02-26T14:12:09 * michelled has quit
2014-02-26T14:13:43 * yzen joined the channel
2014-02-26T14:14:22 * colinclark joined the channel
2014-02-26T14:21:34 <Justin_o> kasparnet: hello, are you there?
2014-02-26T14:53:06 * anastasiac joined the channel
2014-02-26T14:55:16 <kasparnet> Justin_o: yes
2014-02-26T14:57:02 * clown joined the channel
2014-02-26T15:12:52 <Justin_o> kasparnet: hello.. i left a comment on the GPII-590 pull.. there are some minor changes needed, but you can merge in if you want and just have new jiras filed for those last few things
2014-02-26T15:13:26 <Justin_o> kasparnet: also any news on the flow manager.. i left you some comments on where i got to in the channel yesterday
2014-02-26T15:13:51 <Justin_o> don\'t know if you saw those
2014-02-26T15:17:47 <kasparnet> Justin_o:
2014-02-26T15:17:47 <kasparnet> i didn\'t
2014-02-26T15:18:03 <kasparnet> will take a look now
2014-02-26T15:18:51 <Justin_o> https://botbot.me/freenode/fluid-work/msg/11418637/
2014-02-26T15:18:51 <Justin_o> kasparnet: ^
2014-02-26T15:23:02 <kasparnet> Justin_o: so I have grown a _little_ bit wiser since our talk yesterday
2014-02-26T15:23:14 <Justin_o> kasparnet: cool
2014-02-26T15:23:28 <kasparnet> I\'m now almost certain that the flowmanager does not function as proxy
2014-02-26T15:23:41 <kasparnet> https://github.com/GPII/universal/blob/master/gpii/node_modules/preferencesServer/src/preferencesServer.js#L28-L35
2014-02-26T15:24:05 <kasparnet> you can see that in the above link that the preferences server is the one responsible for listening to those /user/token URLS
2014-02-26T15:24:40 <kasparnet> Whereas the flowmanager only listens to https://github.com/GPII/universal/blob/master/gpii/node_modules/flowManager/src/FlowManager.js#L80-L93
2014-02-26T15:26:09 <kasparnet> the urls /token, /user/<token>/login (and logout)
2014-02-26T15:26:31 <clown> pardon, anastasiac?
2014-02-26T15:26:33 <kasparnet> and finally, the preferences server is never fired up in production mode
2014-02-26T15:26:35 <clown> :-)
2014-02-26T15:26:47 <kasparnet> (which I guess isn\'t really a surprise)
2014-02-26T15:26:52 <kasparnet> https://github.com/GPII/universal/blob/master/gpii/configs/fm.ps.sr.dr.mm.os.lms.production.json
2014-02-26T15:27:38 <kasparnet> anyway, we have currently no way of communicating with the preferences server via the local GPII system
2014-02-26T15:27:56 <Justin_o> kasparnet: :(
2014-02-26T15:28:05 <kasparnet> yup
2014-02-26T15:28:22 <Justin_o> kasparnet: so the docs about the flow manager api are just wrong http://wiki.gpii.net/index.php/Flow_Manager_API#User_Preferences
2014-02-26T15:28:47 <Justin_o> or maybe better put, they aren\'t implemented?
2014-02-26T15:30:58 <kasparnet> yeah - I think the proxy would be nice to have, but right now, I guess those docs are just plain wrong :D
2014-02-26T15:32:19 * vjoanna joined the channel
2014-02-26T15:37:55 <Justin_o> kasparnet: that\'s unfortunate... will it be possible to fix the flow manager or will we have to explore other temporary work arounds?
2014-02-26T15:38:38 * michelled joined the channel
2014-02-26T15:42:18 * michelled has quit
2014-02-26T15:42:52 <colinclark> Justin_o: I was just writing an email about this
2014-02-26T15:43:27 <colinclark> keep in mind that this documentation was a product of reverse-engineering on the part of kasparnet and Bosmon and I while we were in Stuttgart, trying to figure out what the intention of the Flow Manager was
2014-02-26T15:43:58 <colinclark> so I\'d caution to you about citing them as canonical ;)
2014-02-26T15:44:00 <colinclark> "Keep in mind that this particular documentation was reverse-engineered from the actual implementation, and doesn\xe2\x80\x99t necessarily reflect the design we actually want."
2014-02-26T15:44:15 <colinclark> So we need to spend some time thinking clearly about what we have and what we want
2014-02-26T15:44:24 * michelled joined the channel
2014-02-26T15:44:31 <colinclark> So it sounds like this particular issue is related to "apps" vs. "servers" in Kettle
2014-02-26T15:44:50 <colinclark> We implemented a fairly powerful design where multiple apps can easily be deployed in the context of a single Kettle server
2014-02-26T15:45:04 <Justin_o> colinclark: it would be good to make that clear on the wiki, it\'s very misleading
2014-02-26T15:45:43 <colinclark> Justin_o: Please feel free ;)
2014-02-26T15:45:56 <colinclark> Apps in Kettle are decoupled enough from their server that they can also be deployed elsewhere
2014-02-26T15:48:05 <colinclark> So the issue here is, I believe, and this was always nagging at me--I should have asked about it sooner
2014-02-26T15:48:20 <colinclark> is that we\'ve got one configuration that deploys multiple apps in a single server
2014-02-26T15:48:27 <colinclark> and another configuration that separates these apps into different servers
2014-02-26T15:48:40 <colinclark> and thus the "apparent API" of the "Flow Manager" is different depending on whether we\'re deploying it in development or production mode
2014-02-26T15:48:44 <colinclark> I use those quotes carefully
2014-02-26T15:49:01 <colinclark> in that what we\'re saying is that, in development mode, there is a "Kettle server" that represents an amalgam of several "services"
2014-02-26T15:49:03 <colinclark> hence the long dotted configuration file names
2014-02-26T15:49:18 <colinclark> which I believe denote which services or "apps" are deployed inside a particular "server"
2014-02-26T15:49:33 <colinclark> The thing is, we need to be really clear about what the PMT needs and why
2014-02-26T15:49:39 <colinclark> So, has anyone enumerated a list of the things the PMT needs to be able to do?
2014-02-26T15:49:41 <colinclark> I imagine it looks something like:
2014-02-26T15:49:45 * simonjb joined the channel
2014-02-26T15:49:46 <colinclark> 1. Determine if there is a currently logged-in user
2014-02-26T15:52:35 <Justin_o> colinclark: i was going to cut and paste your comment "Keep in mind that this particular documentation was reverse-engineered from the actual implementation, and doesn\xe2\x80\x99t necessarily reflect the design we actually want." but realized that this is also not accurate as it is not implemented this way
2014-02-26T15:52:35 <Justin_o> colinclark: it seems like the flow manager DOES NOT work as a proxy at all. so if it\'s neither what you want nor what is actually implemented it would make more sense to just not have it mentioned
2014-02-26T15:53:08 <colinclark> 2. Provision a new user token and preference set if we\'ve got a completely new user
2014-02-26T15:53:09 <colinclark> 3. Retrieve a preference set for a currently-logged in user
2014-02-26T15:53:09 <colinclark> 4. Save updates to a preference set
2014-02-26T15:53:10 <colinclark> Anything else?
2014-02-26T15:53:11 <colinclark> 5. Signal a change in a preference set so that the Flow Manager can reapply new settings?
2014-02-26T15:53:31 <colinclark> kasparnet, Justin_o ^
2014-02-26T15:53:51 <colinclark> well, how do we know what we want? :)
2014-02-26T15:53:51 <colinclark> I\'m hoping we can determine what we want here :P
2014-02-26T15:54:03 <colinclark> okay, i hear that the channel is being weird
2014-02-26T15:54:10 <colinclark> can you hear me?
2014-02-26T15:54:19 <Justin_o> colinclark: i can read you :)
2014-02-26T15:54:26 <Justin_o> colinclark: it just all came in for me now
2014-02-26T15:54:27 <colinclark> cool :)
2014-02-26T15:54:35 <colinclark> how odd
2014-02-26T15:54:35 <colinclark> okay, sorry
2014-02-26T15:54:38 <colinclark> this makes more sense
2014-02-26T15:54:44 <colinclark> let\'s not sweat the documentation page quite yet
2014-02-26T15:54:57 <colinclark> and let\'s make sure we\'re clear on what we actually want
2014-02-26T15:55:00 <Justin_o> so 1 - 5 sound about right
2014-02-26T15:55:06 <colinclark> Is there anything else?
2014-02-26T15:55:36 * anvk joined the channel
2014-02-26T15:55:37 <colinclark> or is this a comprehensive list?
2014-02-26T15:55:46 <Justin_o> colinclark: i think that\'s about it... PCP needs to do live updates as well, which may be a slightly different mechanism than the PMT\'s
2014-02-26T15:55:58 <colinclark> right
2014-02-26T15:56:41 <colinclark> ok
2014-02-26T15:56:41 * danaayotte has quit
2014-02-26T15:57:05 <colinclark> So, the reality is that the PMT always runs on a  "remote server," whether it\'s an ad-hoc one or not
2014-02-26T15:57:12 <colinclark> currently it\'s an ad hoc server
2014-02-26T15:57:17 <colinclark> and I think this is the way we want it
2014-02-26T15:57:22 <Justin_o> colinclark: yes
2014-02-26T15:57:37 <colinclark> the PMT is a separate thing, with a separate lifecycle, function, and reliability requirements
2014-02-26T15:57:49 <Justin_o> colinclark: i\'m not sure what that means
2014-02-26T15:58:03 <colinclark> well
2014-02-26T15:58:24 <colinclark> if the PMT went down for a few hours, would it be considered a catastrophic outage of the GPII as far as a user is concerned?
2014-02-26T15:58:48 <Justin_o> colinclark: i guess it depends on what they wanted to do
2014-02-26T15:58:58 <colinclark> I think the answer is likely no
2014-02-26T15:59:02 <Justin_o> but in terms of just having their preferences applied probably not
2014-02-26T15:59:17 <colinclark> it doesn\'t represent a "I can\'t do anything" scenario
2014-02-26T15:59:41 <colinclark> Similarly, would we like to be able to make changes and upgrades to the PMT without having to push upgrades to natively-installed applications?
2014-02-26T15:59:59 <colinclark> Also, I think the answer is yes
2014-02-26T16:00:21 <colinclark> So the PMT is a separate thing
2014-02-26T16:00:35 <colinclark> it has a coupling, at least in the abstract, with two separate components
2014-02-26T16:00:53 <colinclark> The Preferences Server and a local Flow Manager
2014-02-26T16:01:02 <colinclark> the latter coupling is optional
2014-02-26T16:01:15 <Justin_o> sure
2014-02-26T16:01:23 <colinclark> i.e. we can imagine that it should be perfectly viable to use the PMT without having the GPII installed and running on the computer you are using it with
2014-02-26T16:01:43 <colinclark> for example, a clinician who is working with a user to provision an initial preference set
2014-02-26T16:02:02 <Justin_o> colinclark: working in the sense that it would save changes, but not expectation that anything would apply.. yes
2014-02-26T16:02:11 <colinclark> so at least in the post-pilots time frame, it doesn\'t make sense for the PMT to have a hard dependency on a local Flow Manager just to be able to do things like saving and retrieving preference sets
2014-02-26T16:02:14 <Justin_o> that should be save preferencs
2014-02-26T16:02:26 <colinclark> yup
2014-02-26T16:02:27 <colinclark> ok
2014-02-26T16:02:28 <colinclark> cool
2014-02-26T16:03:00 <colinclark> So then the question is, why does the PMT even both to try to use the "accidental API" of the Flow Manager\'s /user resource?
2014-02-26T16:03:45 <Justin_o> colinclark: currently the whole workflow is based around it though, for login/logout too
2014-02-26T16:04:53 <Justin_o> colinclark: i guess what you are saying is that the PMT should be using two separate urls for saving and login/logout by default? is that correct?
2014-02-26T16:06:31 <colinclark> I only asked a question :)
2014-02-26T16:06:52 <Justin_o> okay.. let me restate.. is that the question you are asking.. why not use separate urls?
'

