b'2018-04-17T18:05:30 <colinclark> the-t-in-rtf: I\'m having troubles with it too
2018-04-17T18:05:50 <cindyli> colinclark, mrtyler, this data loader would delete all snapset data, including gpiiKeys and prefsSafes, from CouchDB and reload them from a github repo directory
2018-04-17T18:06:08 <cindyli> anything i missed?
2018-04-17T18:06:19 <colinclark> how will we distinguish between snapsets and "preference safes used for demos?
2018-04-17T18:06:43 <Bosmon> https://snag.gy/tTe5C8.jpg
2018-04-17T18:06:46 <cindyli> we cannot at the moment, unless we introduce another prefsSafeType
2018-04-17T18:06:51 <Bosmon> "An Englishman\'s OS is his castle" : P
2018-04-17T18:07:06 <cindyli> colinclark: what\'s special with "preference safes used for demos"?
2018-04-17T18:07:38 <cindyli> do they act same as user keys: readable, writable
2018-04-17T18:08:17 <cindyli> or like snapsets being read only
2018-04-17T18:10:46 <the-t-in-rtf> "The Man in the High Sierra"
2018-04-17T18:20:52 <colinclark> cindyli: I believe they are entirely equivalent to "user" preference safes
2018-04-17T18:21:02 <colinclark> except that they must always be present
2018-04-17T18:21:23 <colinclark> in the fullness of time, presumably, the people who give demos will maintain these demo safes themselves
2018-04-17T18:22:08 <colinclark> but in the interim, I expect that they\'re like ordinary safes except that they are owned by "us"
2018-04-17T18:22:15 <colinclark> sorry for all the quotation marks :)
2018-04-17T18:22:31 <cindyli> colinclark: we could have 2 different directories, one for snapsets, one for demo keys
2018-04-17T18:22:40 <colinclark> yup
2018-04-17T18:22:40 <cindyli> the loader script will handle them differently
2018-04-17T18:22:49 <colinclark> how will we handle deleted demo safes?
2018-04-17T18:23:21 <cindyli> i think the simpliest way is to use special "_id"s for snapsets and demo keys
2018-04-17T18:23:32 <colinclark> ok
2018-04-17T18:23:38 <colinclark> "known keys"
2018-04-17T18:23:49 <cindyli> when loading snapsets into couchdb, they could be named as "snapset_{snapset-file-name}"
2018-04-17T18:23:52 <colinclark> i guess there are some sticky questions that will emerge very soon
2018-04-17T18:24:02 <colinclark> like, say I am using a demo preference safe
2018-04-17T18:24:12 <colinclark> and I think "yeah, let me tweak this before my demo with the PSP"
2018-04-17T18:24:18 <colinclark> and then the cluster gets rebuilt
2018-04-17T18:24:26 <colinclark> I want my changes to persist
2018-04-17T18:24:29 <colinclark> the opposite will also happen
2018-04-17T18:24:35 <colinclark> demo occurs, random changes get made
2018-04-17T18:24:45 <colinclark> demoer gets confused when those changes are still there :P
2018-04-17T18:25:53 <cindyli> i\'m confused of this use case
2018-04-17T18:26:00 <colinclark> I guess we really need sgithens\' PPT :)
2018-04-17T18:26:17 <cindyli> that would be the best
2018-04-17T18:26:34 <sgithens> !
2018-04-17T18:26:46 <sgithens> hi colinclark and cindyli
2018-04-17T18:27:24 <cindyli> hi there
2018-04-17T18:27:48 <colinclark> in the interim we\'ll treat demo safes like snapsets
2018-04-17T18:27:53 <colinclark> except that they will be writeable
2018-04-17T18:28:09 <colinclark> and so if the database ever gets dropped and restored, they will return to their original state
2018-04-17T18:28:25 <colinclark> and if a demoer wants to make a permanent change, they can do so via the workflow we described earlier
2018-04-17T18:28:34 <colinclark> UNTIL the Power Preferences Tool is unveiled
2018-04-17T18:28:44 <colinclark> at which point they can just edit them that way :)
2018-04-17T18:28:55 <colinclark> just as if they were any other preference safe\xe2\x80\x94because they will be
2018-04-17T18:29:07 <sgithens> hahahaha
2018-04-17T18:29:08 <sgithens> well
2018-04-17T18:29:21 <sgithens> I plan to unveil it on a weekly basis with updated builds
2018-04-17T18:29:40 <sgithens> although I still need to chat with mrtyler to move it over to our infrastructure
2018-04-17T18:29:57 <colinclark> yup
2018-04-17T18:30:00 <sgithens> I hoping to make stub logins for safes and an admin user this week
2018-04-17T18:30:01 <colinclark> I guess "unveiled" means:
2018-04-17T18:30:08 <colinclark> a) deployed within our infrastructure
2018-04-17T18:30:22 <colinclark> b) using a supported API (either private or OAuth-based)
2018-04-17T18:30:36 <mrtyler> sgithens: happy to chat about that whenever you like :)
2018-04-17T18:30:37 <colinclark> c) fully connected with the cloud-based flow manager
2018-04-17T18:31:27 <sgithens> mrtyler Thanks!  Have had a lot of meetings the past few days, but in a bit today, or tomorrow
2018-04-17T18:31:42 <mrtyler> sure, whenever you\'re ready :)
2018-04-17T18:35:32 * clown has quit
2018-04-17T18:41:31 * jhung has quit
2018-04-17T18:44:25 * clown joined the channel
2018-04-17T18:46:17 * alanharnum joined the channel
2018-04-17T18:56:10 * alanharnum has quit
2018-04-17T18:57:47 * sepidehshahi has quit
2018-04-17T19:02:33 * michelled has quit
2018-04-17T19:03:09 * jhung joined the channel
2018-04-17T19:06:09 * michelled joined the channel
2018-04-17T19:08:32 * cindyli has quit
2018-04-17T19:14:22 * kasparnet has quit
2018-04-17T19:16:07 * sepidehshahi joined the channel
2018-04-17T19:22:23 * michelled has quit
2018-04-17T19:27:19 * cindyli joined the channel
2018-04-17T19:29:36 * alanharnum joined the channel
2018-04-17T19:39:56 * gtirloni has quit
2018-04-17T19:40:20 * gtirloni joined the channel
2018-04-17T19:40:35 * alanharnum has quit
2018-04-17T19:47:42 * danayo has quit
2018-04-17T20:00:58 * jhung has quit
2018-04-17T20:09:32 * cindyli has quit
2018-04-17T20:12:14 * stegru has quit
2018-04-17T20:15:44 * alanharnum joined the channel
2018-04-17T20:16:33 * michelled joined the channel
2018-04-17T20:18:15 * danayo joined the channel
2018-04-17T20:21:36 * cindyli joined the channel
2018-04-17T20:23:00 * alanharnum has quit
2018-04-17T20:24:01 * cindyli has quit
2018-04-17T20:35:32 * sepidehshahi has quit
2018-04-17T20:58:58 * clown has quit
2018-04-17T21:00:17 * alanharnum joined the channel
2018-04-17T21:09:09 * alanharnum has quit
2018-04-17T21:48:07 * alanharnum joined the channel
2018-04-17T21:53:47 * danayo has quit
2018-04-17T21:57:41 * alanharnum has quit
2018-04-17T21:58:07 * alanharnum joined the channel
2018-04-17T22:02:25 * alanharnum has quit
2018-04-17T22:13:10 * YehchanP has quit
2018-04-17T22:14:40 * michelled has quit
2018-04-17T22:18:21 * gtirloni has quit
2018-04-17T22:25:23 * colinclark has quit
2018-04-17T22:28:12 * simonjb has quit
2018-04-17T22:38:11 * grrrero has quit
2018-04-17T22:57:49 * dandimitrov__ joined the channel
2018-04-17T22:57:51 * yuriy joined the channel
2018-04-17T23:01:14 * alanharnum joined the channel
2018-04-17T23:01:34 * yuriy__ has quit
2018-04-17T23:01:40 * dandimitrov_ has quit
2018-04-17T23:02:50 * avtar has quit
2018-04-17T23:08:17 * dandimitrov_ joined the channel
2018-04-17T23:08:17 * yuriy has quit
2018-04-17T23:08:18 * dandimitrov__ has quit
2018-04-17T23:08:29 * yuriy joined the channel
2018-04-17T23:09:51 * alanharnum has quit
2018-04-17T23:56:21 * alanharnum joined the channel
'

b'2018-04-17T17:38:37 <colinclark> so when get tehre
2018-04-17T17:38:42 <mrtyler> but we could drop and re-create the snapsets
2018-04-17T17:38:45 <colinclark> right
2018-04-17T17:38:55 <colinclark> so do we need any additional mechanism for handling that
2018-04-17T17:38:56 <colinclark> ?
2018-04-17T17:39:00 <mrtyler> that would take some modification to the dataloader
2018-04-17T17:39:07 <colinclark> what kinds of modifications?
2018-04-17T17:39:24 <mrtyler> it would need to know how to drop just the snapsets (hopefully in a separate database?)
2018-04-17T17:39:31 <mrtyler> and then re-load just the snapsets
2018-04-17T17:39:53 <mrtyler> i guess it would be a command-line flag (or env var, which is i think how it\'s configured today)
2018-04-17T17:40:00 <colinclark> ok
2018-04-17T17:40:07 <mrtyler> DATALOADER_RELOAD_SNAPSETS
2018-04-17T17:40:08 <mrtyler> or something
2018-04-17T17:40:13 <colinclark> I don\'t think the snapstes will be in a separate database
2018-04-17T17:40:33 <mrtyler> seems weird to co-mingle two distinct kinds of data but ok :)
2018-04-17T17:40:57 <cindyli> snapsets are flagged in the prefsSafes document structure
2018-04-17T17:41:07 <cindyli> prefsSafeType === "snapset"
2018-04-17T17:41:11 <cindyli> this is one way
2018-04-17T17:41:21 <mrtyler> that\'s fine, it\'s just more work
2018-04-17T17:41:31 <cindyli> the other way could be use special "_id" for snapsets
2018-04-17T17:41:43 <cindyli> and their prefs safes
2018-04-17T17:41:45 <mrtyler> instead of "drop database snapsets" it becomes "delete from snapsets where prefsSafeType == snapset"
2018-04-17T17:42:04 <colinclark> right, mrtyler
2018-04-17T17:42:08 <colinclark> not a big difference
2018-04-17T17:42:22 <colinclark> and there are lots of application advantages to treating these as regular preference safes
2018-04-17T17:42:26 * simonjb joined the channel
2018-04-17T17:42:28 <mrtyler> it\'s a non-trivial difference if you want to do any error handling :)
2018-04-17T17:42:51 <colinclark> what sort of error handling are you thinking of?
2018-04-17T17:43:05 <mrtyler> if i drop the database and it fails, i\'m done
2018-04-17T17:43:15 <mrtyler> if i drop the first 50 snapsets but can\'t delete the 51st... now what?
2018-04-17T17:43:33 <colinclark> ah, i see
2018-04-17T17:44:52 <cindyli> mrtyler: what could cause the problem of "cannot delete the 51st"? it is in use? or it doesn\'t exist?
2018-04-17T17:45:06 <mrtyler> those, or connection timeout
2018-04-17T17:45:13 <mrtyler> or transient ssl negotiation problem
2018-04-17T17:45:33 <mrtyler> distributed system stuff :)
2018-04-17T17:46:08 <colinclark> Given that this is a stop-gap until we have a proper concept of "users" in the GPII...
2018-04-17T17:46:24 <mrtyler> to be clear, i\'m not suggesting we re-architect the data model to facilitate this one use case :)
2018-04-17T17:46:26 <colinclark> and a working PPT that would allow users to maintain snapsets with graphical tooling
2018-04-17T17:46:27 <colinclark> ha
2018-04-17T17:46:28 <colinclark> yes
2018-04-17T17:46:32 <colinclark> I figured :)
2018-04-17T17:46:59 <colinclark> so it sounds like, pragmatically, we just need to plan to update our loader a bit
2018-04-17T17:47:02 <mrtyler> colinclark: itym maintain preference sets, not snapsets?
2018-04-17T17:47:14 <colinclark> well, no
2018-04-17T17:47:29 <mrtyler> i thought snapsets were the static, canned data upon which preference sets are built
2018-04-17T17:47:36 <colinclark> The PPT will indeed allow users to maintain their own preference safes for sure
2018-04-17T17:47:38 <mrtyler> i.e. users change preference sets, not snapsets
2018-04-17T17:47:41 * kasparnet joined the channel
2018-04-17T17:47:42 <colinclark> correct
2018-04-17T17:47:53 <colinclark> "users" cannot change snapsets
2018-04-17T17:48:03 <mrtyler> ah so admin ppt for snapsets?
2018-04-17T17:48:03 <colinclark> but "we" will need to from time to time
2018-04-17T17:48:05 <colinclark> yup
2018-04-17T17:48:40 <mrtyler> i think i\'d continue to manage snapsets as json (possibly output from the ppt)
2018-04-17T17:48:49 <mrtyler> since they are used in numerous environments
2018-04-17T17:48:53 <colinclark> ok
2018-04-17T17:48:58 <colinclark> in the fullness of time, there will have to be, at least, admin account and roles so that someone like, say, Bern, could go in and modify a snapset or add a new one or remove one
2018-04-17T17:49:10 * sepidehshahi joined the channel
2018-04-17T17:49:14 <mrtyler> where? in production?
2018-04-17T17:49:17 <colinclark> yes
2018-04-17T17:49:21 <mrtyler> how will his changes be propagated to stg? dev? local dev?
2018-04-17T17:49:31 <colinclark> that\'s a very good question
2018-04-17T17:49:45 <colinclark> I\'m not sure I can answer that question yet :)
2018-04-17T17:50:00 <mrtyler> fair enough. my answer stands then :D
2018-04-17T17:50:03 <colinclark> yes
2018-04-17T17:50:07 <colinclark> I think that\'s entirely right :)
2018-04-17T17:50:12 <colinclark> it\'s also what Bosmon was advocating for
2018-04-17T17:50:17 <colinclark> so, for now
2018-04-17T17:50:20 <mrtyler> because bern probably wants to test his changes in non-prod before they go live
2018-04-17T17:50:25 <colinclark> snapsets and demo preference safes are JSON files in the Git repo
2018-04-17T17:50:55 <colinclark> with a loader that is (when we need it) modified to be able to delete all preference safes of these type and restore them from git
2018-04-17T17:51:24 <colinclark> mrtyler: Yes, you\'re quite likely right
2018-04-17T17:51:33 <colinclark> One question...
2018-04-17T17:51:39 <colinclark> So pretend we\'re in the future a bit
2018-04-17T17:51:46 <mrtyler> i agree with the rest of your summary btw
2018-04-17T17:51:49 <colinclark> we have a preferences database with the Tyler preference safe in it
2018-04-17T17:51:53 <colinclark> as well as some snapsets
2018-04-17T17:52:32 <colinclark> and Bern says "hey cindyli and mrtyler, I want to delete the \'x\' snapset because our users hate it and introduce this new \'y\' snapet"
2018-04-17T17:52:52 <colinclark> what actually happens, at a "this person does that, this script runs here" level
2018-04-17T17:52:54 <colinclark> if you see what I mean
2018-04-17T17:53:12 <mrtyler> 1. delete x.json
2018-04-17T17:53:15 <mrtyler> 2. create y.json
2018-04-17T17:53:18 <colinclark> in the git repo
2018-04-17T17:53:21 <mrtyler> yes
2018-04-17T17:53:22 <colinclark> k
2018-04-17T17:53:34 <mrtyler> 3. drop database (or delete snapsets from db containing all preference safes + snapsets)
2018-04-17T17:53:37 <mrtyler> 4. reload from json files
2018-04-17T17:53:46 * YehchanP joined the channel
2018-04-17T17:53:54 <mrtyler> the end
2018-04-17T17:54:26 <mrtyler> steps 3 and 4 would be run automatically by CD in escalating series of envs dev -> stg -> prd
2018-04-17T17:54:28 <colinclark> :)
2018-04-17T17:54:30 <colinclark> ok
2018-04-17T17:54:33 <colinclark> tell me more about that
2018-04-17T17:54:36 <mrtyler> which?
2018-04-17T17:54:39 <colinclark> so just for fun
2018-04-17T17:54:44 * kasparnet has quit
2018-04-17T17:54:51 <colinclark> cindyli does #1 and #2 in her fork
2018-04-17T17:54:52 <colinclark> pushes
2018-04-17T17:54:56 <colinclark> Bosmon reviews and merges it
2018-04-17T17:55:01 <colinclark> CD notices the changes
2018-04-17T17:55:06 * Sunny0794 has quit
2018-04-17T17:55:07 <colinclark> and then what happens?
2018-04-17T17:55:20 <mrtyler> 1. deploy dev cluster from scratch. load data from json. smoke test.
2018-04-17T17:55:31 <mrtyler> 2. deploy stg cluster. drop/delete old records. load data from json. smoke test.
2018-04-17T17:55:40 <mrtyler> 3. deploy prd cluster. same as #2
2018-04-17T17:55:48 <mrtyler> the end :)
2018-04-17T17:55:52 <colinclark> hahaha :)
2018-04-17T17:55:54 <colinclark> this is great
2018-04-17T17:55:59 <colinclark> ok, so I guess i have a couple more questions
2018-04-17T17:56:04 * kasparnet joined the channel
2018-04-17T17:56:15 <colinclark> perhaps devil\'s advocatey, even though I hate that
2018-04-17T17:56:25 <colinclark> isn\'t doing #3 extreme for just a change in a JSON file somewhere?
2018-04-17T17:56:36 <mrtyler> meh
2018-04-17T17:56:40 <colinclark> :)
2018-04-17T17:56:51 <colinclark> it\'s certainly simpler, in the sense that it\'s the exact same behaviour required for a code change
2018-04-17T17:56:51 <mrtyler> we trust the process because we just ran it in dev (from scratch) and in stg (an upgrade)
2018-04-17T17:57:00 <colinclark> or for a change to a JSON configuration file
2018-04-17T17:57:02 <colinclark> as opposed to "data"
2018-04-17T17:57:05 <colinclark> ok
2018-04-17T17:57:06 <mrtyler> doing anything else means a difference between prod and non-prod
2018-04-17T17:57:27 <colinclark> and #3 will be done non-disruptively?
2018-04-17T17:57:56 <mrtyler> #2 and #3 are disruptive, as in the race condition cindyli mentioned
2018-04-17T17:58:20 <mrtyler> however, those race conditions are an unavoidable fact of life in distributed systems, so we\'ll need solutions for that class of problem anyway
2018-04-17T17:58:24 <colinclark> ok
2018-04-17T17:58:35 <colinclark> this is exactly the point simonjb made yesterday
2018-04-17T17:58:38 <mrtyler> if we find, through use and actual evidence, that it is "too" disruptive, then we could talk about a different strategy
2018-04-17T17:58:48 <mrtyler> but until then: YAGNI
2018-04-17T17:58:51 <mrtyler> KISS
2018-04-17T17:59:09 <colinclark> is there a way to convey to Bern, in this hypothetical situation, that the prod cluster has reached consistency with his changes in it?
2018-04-17T17:59:28 <mrtyler> sure. bern\'s changes are code, so they get a unique git commit sha
2018-04-17T17:59:44 <mrtyler> we don\'t have a good system today to inspect "what sha is running in this environment"
2018-04-17T17:59:53 <mrtyler> but the information exists
2018-04-17T18:00:12 <mrtyler> and this is a common thing people will want to know, so we\'ll probably build something to expose the information more helpfully
2018-04-17T18:00:33 <colinclark> ok
2018-04-17T18:00:35 <colinclark> that\'s great
2018-04-17T18:00:40 <colinclark> cindyli: Does this all make sense to you?
2018-04-17T18:00:43 <colinclark> and Bosmon?
2018-04-17T18:00:50 <mrtyler> (today you\'d have to do "what version of the docker image is running?" -> "what version of the code was built into this docker image")
2018-04-17T18:00:51 <Bosmon> It is all perfectly sensible, yes
2018-04-17T18:00:56 <cindyli> +1
2018-04-17T18:01:05 <Bosmon> And +1 to mrtyler \'s remarks about pragmatism in distributed systems
2018-04-17T18:01:46 <Bosmon> And yes, exposing "what sha is running in this environment" would be great
2018-04-17T18:02:19 <the-t-in-rtf> @bosmon and anyone else attending, GoToMeeting has chosen the perfect moment to force an upgrade.
2018-04-17T18:02:24 <the-t-in-rtf> I will be there as soon as I can.
2018-04-17T18:02:37 <mrtyler> moar like StrayFromMeeting amirite?
2018-04-17T18:03:15 <Bosmon> Windows 7 users always enjoy an extra level of insulation from such things :)
2018-04-17T18:03:52 <colinclark> so, cindyli :)
2018-04-17T18:04:07 <colinclark> Yesterday I asked you to speculate on the features we\'d need for a data loader
2018-04-17T18:04:17 <colinclark> after this conversation, can you summarize what they are, if any?
2018-04-17T18:04:31 <the-t-in-rtf> I\'m trying the web client for now.
'

b'2018-04-17T16:43:45 <avtar> fluid-everyone: i received an email from browserstack today https://www.browserstack.com/open-source
2018-04-17T16:46:11 <Justin_o> the mobile device testing would be good
2018-04-17T16:46:11 * kasparnet has quit
2018-04-17T16:46:22 <Justin_o> and i guess mac and windows hardware too
2018-04-17T16:46:33 <Justin_o> how does this differ from what they offered us before?
2018-04-17T16:46:57 * danayo joined the channel
2018-04-17T16:47:32 <avtar> they\'ve added a couple more services but i think the main difference is them being more lax with providing free access to open source projects
2018-04-17T16:48:43 <avtar> before we had to appeal to their support staff for special access because they didn\'t have an open source offering in place like saucelabs
2018-04-17T16:53:12 <Justin_o> ah okay.. are we still using saucepans?
2018-04-17T16:53:55 <avtar> saucepans sound more appealing than saucelabs :)
2018-04-17T16:53:55 <avtar> brb
2018-04-17T16:54:18 * michelled joined the channel
2018-04-17T16:54:23 <mrtyler> cindyli: the simplest solution i can see would be to drop couchdb data and replace with what\'s in the test data files
2018-04-17T16:55:13 <mrtyler> for production, it seems like we can\'t really delete/update preferences because they may already be in use, as you said
2018-04-17T16:55:14 * jhung has quit
2018-04-17T16:55:46 <mrtyler> also i thought "test data" would never be in production, but i guess the base preference sets won\'t follow that rule
2018-04-17T16:55:52 <Bosmon> If we can\'t update preferences in production, how do we expect our users to do this? : P
2018-04-17T16:56:32 <mrtyler> Bosmon: the question isn\'t about "updating preferences" generally; it\'s about updating them based on canned preferences from test data
2018-04-17T16:56:39 <mrtyler> iow this is a strategy question, not a tactics question
2018-04-17T16:56:52 <mrtyler> unless i\'m misunderstanding cindy\'s problem statement or your observation
2018-04-17T16:56:58 <Bosmon> I don\'t see how the resulting concerns might be different
2018-04-17T16:57:57 <mrtyler> this is not my area of expertise but i think it\'s like this: i am using the Carla preference set. i am happy with this. cindy makes a change and now the Carla preference set is different.
2018-04-17T16:58:15 * alanharnum joined the channel
2018-04-17T16:58:24 <mrtyler> this is distinct from: i am using the Tyler preference set. i like it except for one thing, which i change.
2018-04-17T16:58:27 <Bosmon> mrtyler - part of the background here is that the named snapsets are only going to be supported for legacy or demo purposes
2018-04-17T16:58:43 <Bosmon> We are only supporting them so we don\'t break all of our current pilot deployments as soon as we roll out this new system
2018-04-17T16:58:52 <Bosmon> Which have several "old-style" snapset tokens in circulation
2018-04-17T16:59:01 <mrtyler> it seems cindy\'s question is irrelevant in this scenario
2018-04-17T16:59:06 <Bosmon> Hopefully, yes
2018-04-17T16:59:07 <mrtyler> and there would be no test data in production
2018-04-17T16:59:45 <Bosmon> Well, this is not test data in the true sense
2018-04-17T16:59:50 <Bosmon> That is, it is not used to operate test cases
2018-04-17T16:59:59 <Bosmon> However, it is useful in several production or "near-production" scenarios
2018-04-17T17:00:14 <mrtyler> great, i look forward to having a new name to describe this kind of data
2018-04-17T17:00:21 <Bosmon> Indeed
2018-04-17T17:00:23 <Bosmon> "So say we all"
2018-04-17T17:00:28 <mrtyler> so what\'s the name?
2018-04-17T17:01:35 <Bosmon> "Preferences to support demos and early pilot usage via read-only snapsets"
2018-04-17T17:01:38 <Bosmon> Snappy, eh? : P
2018-04-17T17:01:56 <mrtyler> can\'t imagine why i foolishly referred to it as "test data"! :p
2018-04-17T17:02:19 <mrtyler> i guess we could call it "demo data"?
2018-04-17T17:02:25 <mrtyler> "demo preference sets"?
2018-04-17T17:02:40 <Bosmon> That could work
2018-04-17T17:02:46 <Bosmon> It\'s at least concise
2018-04-17T17:03:01 <Bosmon> Even if it isn\'t exhaustive
2018-04-17T17:03:45 * alanharnum has quit
2018-04-17T17:04:11 * alanharnum joined the channel
2018-04-17T17:04:38 <Bosmon> The primary day-to-day purpose of having these in the database for the time being is to provide a reasonably smooth way of not overnight invalidating every token that has been used by such users that the GPII has had so far
2018-04-17T17:04:40 * colinclark has quit
2018-04-17T17:04:42 <Bosmon> Although they might find other uses
2018-04-17T17:05:33 <Bosmon> But they broadly fall into two groups
2018-04-17T17:05:53 <Bosmon> The preference sets which are named "snapset_xxx" which are the ones actively used at our pilot sites both now and in the next rollout
2018-04-17T17:06:11 <Bosmon> And all the others, which are used primarily for demos of esoteric or not fully stabilised GPII features
2018-04-17T17:06:33 * grrrero joined the channel
2018-04-17T17:08:38 * alanharnum has quit
2018-04-17T17:09:54 <mrtyler> the "others" are also used in infrastructure smoke tests, fyi
2018-04-17T17:10:02 <mrtyler> i guess just Carla today
2018-04-17T17:10:57 <Bosmon> Cool
2018-04-17T17:10:59 <Bosmon> Good to know
2018-04-17T17:11:28 <Bosmon> In that case it would be worthwhile for cindyli to add a comment to this effect in the file as she is converting them to JSON5
2018-04-17T17:12:02 <mrtyler> seems reasonable. we will need *some* method of smoke testing even if these "other" preference sets are removed or not deployed to production
2018-04-17T17:12:06 <cindyli> Bosmon: if snapsets in production database is only to support the backwards compatibility, do you think it\'s a valid concern that, if a user is using a snapset at a piliot site, or someone is using it for a demo, the deletion or the update of that snapset might cause problems? or this case would be too rare to be a concern?
2018-04-17T17:12:07 <mrtyler> maybe just a dedicated smoketest preference set
2018-04-17T17:12:27 <Bosmon> cindyli - I think the point is that we would only ever issue a deletion after full consideration of such an impact
2018-04-17T17:12:35 <Bosmon> Which is why I imagine that such a thing would be extremely rare
2018-04-17T17:12:46 <Bosmon> I\'m just keen that we don\'t make architectural choices which make deletion *impossible* : P
2018-04-17T17:13:15 * jhung joined the channel
2018-04-17T17:13:18 <cindyli> ok
2018-04-17T17:13:35 * Sunny0794 joined the channel
2018-04-17T17:14:19 <cindyli> mrtyler: are infrastructure smoke tests run against the production deployment?
2018-04-17T17:14:34 <cindyli> or just the testing production deployment?
2018-04-17T17:14:52 <mrtyler> what do you mean by "testing production deployment"?
2018-04-17T17:15:04 <mrtyler> smoke tests currently run in all cloud environments
2018-04-17T17:15:13 <mrtyler> dev, stg, and prd
2018-04-17T17:15:20 <cindyli> ok, i see
2018-04-17T17:16:02 <cindyli> "testing production deployment" i mean is the type of deployment that is used to run the production config test when a pull request is merged into the master
2018-04-17T17:16:27 <mrtyler> i would say that most closely matches the dev-gitlab-runner cluster
2018-04-17T17:16:42 <mrtyler> oh that\'s not what you\'re saying
2018-04-17T17:16:57 <mrtyler> you\'re saying the vagrant-based workflow used by GPII/universal CI (aka jenkins)?
2018-04-17T17:17:25 <cindyli> i think so
2018-04-17T17:17:27 <cindyli> with jenkins
2018-04-17T17:19:38 * sepidehshahi joined the channel
2018-04-17T17:19:45 <cindyli> if all cloud envs run smoke tests, wonder if it makes sense to use a more properly named testing key for them instead of "carla"
2018-04-17T17:20:30 <cindyli> mrtyler: back to what you said earlier: "the simplest solution i can see would be to drop couchdb data and replace with what\'s in the test data files"
2018-04-17T17:20:37 <cindyli> i thought about that before
2018-04-17T17:21:08 <mrtyler> cindyli: agree that a dedciated name is better than "carla"
2018-04-17T17:21:13 <cindyli> the concern is as said, deleting all snapsets might impact users who are using those snapsets
2018-04-17T17:21:38 <cindyli> might be better to only deploy what is changed
2018-04-17T17:21:39 <mrtyler> the only place where we have real actual users is real actual Production
2018-04-17T17:21:57 <mrtyler> delete and re-load is fine for all non-prod envs, afaict
2018-04-17T17:22:18 <mrtyler> and it seems we don\'t want to delete or update preference sets in production (which might be in use by a user)
2018-04-17T17:22:41 <cindyli> mrtyler: snapsets are different from actual user keys
2018-04-17T17:22:57 <cindyli> they are read-only and are only used for pilots and demos
2018-04-17T17:23:13 <mrtyler> if they\'re read-only, then it seems impossible to harm anyone by deleting and re-creating them
2018-04-17T17:23:49 * colinclark joined the channel
2018-04-17T17:24:00 <cindyli> read only means that users are not able to modify preferences associated with snapsets
2018-04-17T17:24:11 <cindyli> but users could still use them at pilot sites
2018-04-17T17:24:38 <cindyli> so, deleting them still cause problems if they happen to be in use
2018-04-17T17:24:54 <cindyli> but as Bosmon said, deletion of snapsets would be extremely rare
2018-04-17T17:24:56 <mrtyler> we would delete and then re-create them
2018-04-17T17:25:30 <Bosmon> cindyli - remember how the GPII works - preference sets are currently only read at one instant in time
2018-04-17T17:25:33 <Bosmon> During key-in
2018-04-17T17:25:39 <Bosmon> There is no risk to removing them during a session
2018-04-17T17:25:50 <mrtyler> if there are "extremely rare" one-off cases, i would handle those by hand rather than building an automated system
2018-04-17T17:26:23 <Bosmon> Of course we have a task to change this - but we will only implement the live updates for preferences which are actually susceptible to change
2018-04-17T17:26:37 <cindyli> what if a request for a snapset happens to be read from couchdb after the deletion but before the recreation, mrtyler, Bosmon
2018-04-17T17:26:49 <Bosmon> Also, we shouldn\'t sweat this too much since this is just transitional infrastructure
2018-04-17T17:27:00 <Bosmon> We have bigger fish to fry, we actually need to get this system working
2018-04-17T17:27:09 <mrtyler> cindyli: race conditions like that -- and many, many more -- will be part of any distributed system
2018-04-17T17:27:25 <mrtyler> that specific problem would be best resolved, imo, with general resiliency techniques
2018-04-17T17:27:28 <mrtyler> retries
2018-04-17T17:28:39 <cindyli> mrtyler: deletion would be rare, but it\'s not rare to have new snapsets to be added for demos or pilots
2018-04-17T17:29:31 <mrtyler> adding a new snapset could be handled specially if it\'s common, i suppose
2018-04-17T17:29:56 <cindyli> and also update of snapsets
2018-04-17T17:30:20 <mrtyler> i\'m sticking with my original answer :)
2018-04-17T17:30:21 <cindyli> mrtyler: what would you suggest on methods of "handled specially if it\'s common"
2018-04-17T17:30:22 <mrtyler> use the system we have today
2018-04-17T17:30:38 <mrtyler> if some part of it is not sufficient, prove it to me and then we can address it
2018-04-17T17:31:17 <mrtyler> cindyli: e.g. you could blindly insert all the *.json files and ignore "this key already exists" errors
2018-04-17T17:31:44 <mrtyler> but again i wouldn\'t bother, given my current understanding of how this data will be used
2018-04-17T17:32:00 <mrtyler> it\'s certainly possible i am missing some nuance
2018-04-17T17:32:07 <mrtyler> and if so, please enlighten me :)
2018-04-17T17:32:25 <colinclark> I had a gap in the conversation
2018-04-17T17:32:31 <colinclark> and will just drop an aside here
2018-04-17T17:32:34 <Bosmon> cindyli - also bear in mind that we are talking about milliseconds of unavailability of one snapset
2018-04-17T17:32:40 * sepidehshahi has quit
2018-04-17T17:32:54 <colinclark> When we\'re talking about snapsets, we\'re talking about a semi-special kind of content in our system
2018-04-17T17:32:55 <Bosmon> Compared against all of our other source of unavailability this is one tiny drop of water
2018-04-17T17:33:16 <colinclark> that is preference sets that are not "owned" by an individual, but are created by the "administrators" of the system
2018-04-17T17:33:16 <mrtyler> right, that is my point about distributed systems :)
2018-04-17T17:33:41 <colinclark> in the long run, a tool like sgithens\' Power Preferences Tool will let an admin log in and create or edit or delete snapsets
2018-04-17T17:33:44 <Bosmon> And the unvailability of a facility which we plan to phase out after a few months
2018-04-17T17:34:02 <colinclark> so we\'re largely talking about something to satisfy us until then
2018-04-17T17:34:51 <colinclark> and that helps make it easier to stand up a working version of the preferences server with automation
2018-04-17T17:35:57 <colinclark> So, aside from the awful name of that directory, mrtyler
2018-04-17T17:35:59 <colinclark> "testData"
2018-04-17T17:36:23 <colinclark> do you agree that it makes sense to store our snapsets in Git and just have a loader script bulk load them into the database?
2018-04-17T17:36:31 <mrtyler> yes
2018-04-17T17:36:44 <mrtyler> that is the status quo, and i am here for it :)
2018-04-17T17:36:59 <colinclark> and looking forward a few months to a point where we have a production preferences server up and running, and people are using it...
2018-04-17T17:37:09 <colinclark> if we wanted to introduce a new snapset or demo preference set into the live system
2018-04-17T17:37:25 <colinclark> what mechansim should we use to do that, prior to sgithens\' PPT being ready for that?
2018-04-17T17:37:39 <mrtyler> my answer is still: drop database and re-create
2018-04-17T17:37:48 <colinclark> what\'s involved in doing so?
2018-04-17T17:37:58 <colinclark> if, say, there is user data that has been modified in the database?
2018-04-17T17:37:59 <mrtyler> the dataloader already knows how to do it
2018-04-17T17:38:08 <colinclark> some combination of load data + restore backup?
2018-04-17T17:38:28 <colinclark> so say we\'ve got these "canonical" preference safes, but then there\'s also Tyler\'s Safe
2018-04-17T17:38:30 <mrtyler> it sounds like once there is user data, we can no longer drop or change the preference sets in any way
2018-04-17T17:38:33 <colinclark> ok
'

b"2018-04-17T00:07:08 * gtirloni_ has quit
2018-04-17T00:07:26 * gtirloni_ joined the channel
2018-04-17T00:08:55 * gloob has quit
2018-04-17T00:08:57 * suranamudit[m] has quit
2018-04-17T00:09:06 * javjarfer[m] has quit
2018-04-17T00:09:47 * amatas[m] has quit
2018-04-17T00:33:49 * jhernandez_ has quit
2018-04-17T01:40:18 * colinclark joined the channel
2018-04-17T01:48:39 * colinclark has quit
2018-04-17T01:49:58 * colinclark joined the channel
2018-04-17T01:49:58 * colinclark has quit
2018-04-17T02:48:37 * danayo joined the channel
2018-04-17T03:19:33 * danayo has quit
2018-04-17T04:03:08 * ewbjr_ has quit
2018-04-17T04:54:38 * -- BotBot disconnected, possible missing messages --
2018-04-17T04:54:38 * -- BotBot disconnected, possible missing messages --
2018-04-17T04:59:56 * -- BotBot disconnected, possible missing messages --
2018-04-17T05:02:33 * -- BotBot disconnected, possible missing messages --
2018-04-17T05:02:33 * -- BotBot disconnected, possible missing messages --
2018-04-17T05:06:27 * -- BotBot disconnected, possible missing messages --
2018-04-17T05:08:55 * [o__o] joined the channel
2018-04-17T05:18:44 * amatas[m] joined the channel
2018-04-17T05:29:14 * javjarfer[m] joined the channel
2018-04-17T05:38:03 * anshul98[m] joined the channel
2018-04-17T05:38:05 * gloob joined the channel
2018-04-17T05:39:19 * suranamudit[m] joined the channel
2018-04-17T06:26:04 * kasper joined the channel
2018-04-17T06:39:21 * mrtyler has quit
2018-04-17T07:36:40 * georgitodorov joined the channel
2018-04-17T08:13:26 * stegru joined the channel
2018-04-17T08:24:00 * kasper has quit
2018-04-17T08:46:11 * kasper joined the channel
2018-04-17T10:15:10 * dandimitrov_ is now known as dandimitrov
2018-04-17T10:15:27 <dandimitrov> Hey, Bosmon! Regarding the context problem, it would be great if we have a grade that goes trough all options and fixes their context if needed sounds great, but when should this mechanism be triggered?
2018-04-17T10:15:35 <dandimitrov> Running a recontextualising function with onCreate seem to be too late in case we use these options in modelRelay or somewhere else that triggers sooner (before component's creation finishes)
2018-04-17T10:15:46 <dandimitrov> Here's an example for my current idea: https://github.com/danailbd/gpii-app/blob/GPII-2937/src/main/utils.js#L173
2018-04-17T11:18:53 * jhernandez_ joined the channel
2018-04-17T11:22:10 * jhernandez_ has quit
2018-04-17T11:22:27 * jhernandez joined the channel
2018-04-17T11:22:31 * jhernandez is now known as jhernandez_
2018-04-17T11:28:15 <Bosmon> Hey there dandimitrov
2018-04-17T11:28:18 <Bosmon> You can't do that : P
2018-04-17T11:28:31 <dandimitrov> :(
2018-04-17T11:28:33 <Bosmon> We should treat component options as immutable, and they will be in an upcoming release
2018-04-17T11:29:22 <Bosmon> It's reasonable to just recontextualise values which are sent to functions which care about it
2018-04-17T11:29:24 <Bosmon> Which are very rare
2018-04-17T11:30:00 <dandimitrov> Yep, that sounds good
2018-04-17T11:30:31 <dandimitrov> I'll use that approach, thanks Bosmon :)
2018-04-17T11:30:34 <Bosmon> Strictly speaking it is a bug in that electron library which should be reported
2018-04-17T11:33:26 * georgit joined the channel
2018-04-17T11:33:26 * dandimitrov has quit
2018-04-17T11:33:26 * georgitodorov has quit
2018-04-17T11:33:26 * yuriy has quit
2018-04-17T11:33:26 * georgit has quit
2018-04-17T11:33:30 * yuriy__ joined the channel
2018-04-17T11:33:30 * yuriy__ has quit
2018-04-17T11:33:33 * dandimitrov joined the channel
2018-04-17T11:33:46 * georgit joined the channel
2018-04-17T11:33:46 * yuriy__ joined the channel
2018-04-17T11:50:58 * gtirloni joined the channel
2018-04-17T12:39:31 * jhung joined the channel
2018-04-17T12:42:24 <Bosmon> Justin_o - hah, I just successfully used fluid-publish to publish a dev release of itself : P
2018-04-17T12:42:36 <Bosmon> $ node ./publish.js
2018-04-17T12:42:46 <Bosmon> Executing Command: npm version --no-git-tag-version 2.1.0-dev.20180409T142026Z.22125cc.FLUID-6270
2018-04-17T12:54:45 * cindyli joined the channel
2018-04-17T12:58:47 * dandimitrov_ joined the channel
2018-04-17T12:58:47 * yuriy__ has quit
2018-04-17T12:58:47 * dandimitrov has quit
2018-04-17T12:58:47 * georgit has quit
2018-04-17T12:58:48 * dandimitrov_ has quit
2018-04-17T12:58:50 * georgi_todorov joined the channel
2018-04-17T12:58:50 * georgi_todorov has quit
2018-04-17T12:59:00 * yuriy__ joined the channel
2018-04-17T12:59:05 * dandimitrov_ joined the channel
2018-04-17T12:59:06 * georgi_todorov joined the channel
2018-04-17T13:01:31 * simonjb joined the channel
2018-04-17T13:20:55 * sepidehshahi joined the channel
2018-04-17T13:37:49 <jhung> fluid-everyone - today's design crit has been cancelled due to a last minute illness. The topic will be rescheduled for a future date.
2018-04-17T13:37:58 * kasper has quit
2018-04-17T13:50:27 * michelled joined the channel
2018-04-17T13:57:45 * alanharnum joined the channel
2018-04-17T13:58:10 * mrtyler joined the channel
2018-04-17T14:03:08 * danayo joined the channel
2018-04-17T14:11:59 * jhung has quit
2018-04-17T14:20:56 <Bosmon> Hi there the-t-in-rtf - I've published 3.0.0-dev.20180417T124624Z.ba5376f.FLUID-6148 as a test build for potentia II features
2018-04-17T14:23:34 * georgi_todorov has quit
2018-04-17T14:25:41 <Justin_o> gtirloni: the buildkite check didn't finish again :( https://github.com/fluid-project/infusion/pull/897
2018-04-17T14:26:39 <gtirloni> Justin_o: hi! see #fluid-tech :) (https://botbot.me/freenode/fluid-tech/msg/99079571/)
2018-04-17T14:27:10 <Justin_o> sorry, totally missed that thread
2018-04-17T14:27:40 <gtirloni> no worries
2018-04-17T14:28:09 <Justin_o> gtirloni: some in summary, buildkite has something against your github account
2018-04-17T14:28:40 <gtirloni> well, i thought so but Bosmon's PR is also suffering from that today so I guess against we both :)
2018-04-17T14:28:48 <gtirloni> s/we/us/
2018-04-17T14:29:05 * kasper joined the channel
2018-04-17T14:30:39 <Justin_o> it's spreading
2018-04-17T14:32:43 * kasparnet_ joined the channel
2018-04-17T14:32:46 * kasper has quit
2018-04-17T14:35:00 <Justin_o> gtirloni: i merged the PR, https://github.com/fluid-project/infusion/blob/master/README.md
2018-04-17T14:37:01 <gtirloni> we're so modern now :P
2018-04-17T14:37:03 <gtirloni> Justin_o: thanks!
2018-04-17T14:37:05 <Justin_o> :)
2018-04-17T14:37:48 * kasparnet_ has quit
2018-04-17T14:39:03 * kasparnet joined the channel
2018-04-17T14:49:30 <cindyli> Bosmon: do you see sgithens' email about the time for our next meeting at this Thursday 2pm EDT? does it work for you?
2018-04-17T14:51:29 * clown joined the channel
2018-04-17T14:53:50 * clown1 joined the channel
2018-04-17T14:55:50 * gtirloni has quit
2018-04-17T14:56:26 * rutvi joined the channel
2018-04-17T14:56:36 * clown has quit
2018-04-17T14:56:39 <michelled> fluid-everyone: the IDRC planning meeting will start soon
2018-04-17T14:56:46 * clown1 is now known as clown
2018-04-17T14:57:04 * michelled has quit
2018-04-17T14:57:18 * alanharnum has quit
2018-04-17T14:57:34 * colinclark joined the channel
2018-04-17T14:57:44 * alanharnum joined the channel
2018-04-17T14:59:23 * michelled joined the channel
2018-04-17T14:59:47 * clown1 joined the channel
2018-04-17T15:01:05 * clown has quit
2018-04-17T15:22:38 * gtirloni joined the channel
2018-04-17T15:22:53 * kasparnet has quit
2018-04-17T15:24:26 * jhung joined the channel
2018-04-17T15:32:30 * clown1 has quit
2018-04-17T15:33:38 * simonjb has quit
2018-04-17T15:34:43 * avtar joined the channel
2018-04-17T15:35:22 * alanharnum joined the channel
2018-04-17T15:36:48 <cindyli> amatas[m], mrtyler, I'd like to seek your advice about the possibility of having a CD (continuous deployment) step that auto syncs up the snapset files sitting in a git universal repo directory with the data in the couchdb
2018-04-17T15:37:33 <cindyli> the cases that CD needs to deal with include:
2018-04-17T15:38:16 <cindyli> 1. if a snapset in the directory is modified by the merge of a pull request, update this snapset data in CouchDB
2018-04-17T15:38:35 <cindyli> 2. if a new snapset file is added, add it to CouchDB
2018-04-17T15:38:48 <cindyli> 3. if an existing snapset is deleted, delete if from CouchDB
2018-04-17T15:38:55 * clown joined the channel
2018-04-17T15:39:54 <cindyli> a developer, such as me, or a ops person could write a script that deals with these cases
2018-04-17T15:40:28 <cindyli> and this script would be triggered when any of these cases is detected
2018-04-17T15:40:36 <cindyli> do you think if this is possible?
2018-04-17T15:43:19 * michelled has quit
2018-04-17T15:44:04 <cindyli> we also need to think about the potential problems to perform this auto sync with the production CouchDB: for example, if a snapset is in use by a user, or users, and suddenly this snapset is deleted from the database or updated to a different set of preferences
2018-04-17T15:45:40 <cindyli> and any other potential problems you can think of
2018-04-17T15:47:07 * sepidehshahi has quit
2018-04-17T15:50:25 * jhung has quit
2018-04-17T16:04:38 * jhung joined the channel
2018-04-17T16:12:05 * danayo has quit
2018-04-17T16:14:34 * michelled joined the channel
2018-04-17T16:14:34 * michelled has quit
2018-04-17T16:14:40 * michelled joined the channel
2018-04-17T16:27:34 * alanharnum has quit
2018-04-17T16:28:00 * alanharnum joined the channel
2018-04-17T16:32:27 * alanharnum has quit
2018-04-17T16:40:43 * kasparnet joined the channel
2018-04-17T16:41:19 <mrtyler> hi cindyli, we just finished an interview. be with you in a few minutes :)
2018-04-17T16:41:44 <cindyli> thanks, mrtyler, no rush
"

