b'2018-04-02T19:02:06 <gtirloni> :)
2018-04-02T19:02:24 <Bosmon7> gtirloni - what\'s with this "test this please" business :)
2018-04-02T19:02:28 <kasparnet> sure, if he would stop looking disappointedly at me ... it completely destroys my self confidence
2018-04-02T19:02:34 <Bosmon7> Do we now have to issue POLITENESS to the CI system?
2018-04-02T19:02:34 <gtirloni> kasparnet: lol
2018-04-02T19:02:58 <Bosmon7> Perhaps you have reimplemented it in https://en.wikipedia.org/wiki/INTERCAL
2018-04-02T19:03:13 <gtirloni> Bosmon7: oh, it\'s the same as "ok to test" but tells jenkins to just run it once (not to approve all other commits).. this was always defined but i think we don\'t usually use it
2018-04-02T19:03:32 <Bosmon7> ?!
2018-04-02T19:03:34 <gtirloni> the politeness was configured by avtar, if i remember correctly
2018-04-02T19:03:38 <Bosmon7> I don\'t understand the difference
2018-04-02T19:03:50 <Bosmon7> Doesn\'t Jenkins always just run it once?
2018-04-02T19:04:16 <gtirloni> "ok to test", tells CI "the PR from this person, who is not in the whitelist, maybe be tested... run it now and for any other commits they may have"
2018-04-02T19:04:38 <Bosmon7> Oh wow ok
2018-04-02T19:04:40 <gtirloni> "test this please" tells CI to run it once, and next commits will need a new approval (or a new "test this please" or "ok to test")
2018-04-02T19:04:51 * amatas joined the channel
2018-04-02T19:05:06 <kasparnet> Bosmon7, gtirloni : there was indeed some stuff missing from there
2018-04-02T19:05:11 <kasparnet> I\'ve updated and pushed
2018-04-02T19:05:18 <Bosmon7> But I guess there\'s no difference in this case given kasparnet was always approved....
2018-04-02T19:05:45 <gtirloni> agreed
2018-04-02T19:05:50 <kasparnet> ... i dont feel gtirloni ever really approved of me
2018-04-02T19:06:01 <gtirloni> kasper is in the whitelist... jenkins\' whitelist
2018-04-02T19:06:06 <gtirloni> JENKINS\'!  ! !
2018-04-02T19:06:09 <gtirloni> ;)
2018-04-02T19:07:37 <Bosmon7> APPROVAL EVEN AFTER DEATH
2018-04-02T19:07:40 <Bosmon7> AND FOR ALL TIME
2018-04-02T19:07:53 <Bosmon7> How can Kasparnet ever recover from this BLOW OF APPROVAL
2018-04-02T19:08:25 <kasparnet> hehe indeed!!!
2018-04-02T19:08:29 <gtirloni> see? everybody just blindly approves of kasper.. i\'m just keeping the balance :)
2018-04-02T19:10:25 <gtirloni> kasparnet: thanks for merging master, i think this will work now
2018-04-02T19:11:06 <gtirloni> the issue is that couchdb is not ready, closes the connection abruptly, and curl fails to recover (it thinks the error is permanent, but it\'s transient).. retrying again right after, works
2018-04-02T19:11:43 <Bosmon7> OK great - kasparnet I think your other pull suffers from this too so could you update it as well, thanks
2018-04-02T19:14:12 * jhung has quit
2018-04-02T19:18:13 <kasparnet> sure
2018-04-02T19:22:55 <kasparnet> Bosmon7, ok, building now as well https://github.com/GPII/universal/pull/580
2018-04-02T19:25:20 * Sunny0794 has quit
2018-04-02T19:52:18 * agdhruv joined the channel
2018-04-02T19:52:26 * agdhruv has quit
2018-04-02T19:54:18 <gtirloni> kasparnet: all green lights for you!
2018-04-02T19:54:30 <kasparnet> yay!!! cheers gtirloni
2018-04-02T19:58:28 * cindyli has quit
2018-04-02T20:05:01 * cindyli joined the channel
2018-04-02T21:09:14 * danayo has quit
2018-04-02T21:13:08 * clown has quit
2018-04-02T21:27:51 <Bosmon7> kasparnet - brilliant, thanks!
2018-04-02T21:42:45 * gtirloni has quit
2018-04-02T22:07:57 * stegru has quit
2018-04-02T22:14:00 * kasparnet has quit
2018-04-02T22:19:14 * amatas has quit
2018-04-02T22:35:14 * mrtyler joined the channel
2018-04-02T22:49:03 * mrtyler has quit
2018-04-02T23:08:23 * colinclark has quit
'

b'2018-04-02T00:30:20 * HarshBagadia joined the channel
2018-04-02T00:31:10 * HarshBagadia has quit
2018-04-02T03:33:56 * mrtyler joined the channel
2018-04-02T05:59:49 * mrtyler joined the channel
2018-04-02T07:15:23 * kasparnet joined the channel
2018-04-02T07:35:46 * georgitodorov joined the channel
2018-04-02T07:55:17 * kasparnet has quit
2018-04-02T08:30:19 * yuriy joined the channel
2018-04-02T09:25:17 * amatas joined the channel
2018-04-02T09:46:25 * yuriy__ joined the channel
2018-04-02T09:50:10 * yuriy has quit
2018-04-02T11:32:55 * stegru joined the channel
2018-04-02T12:21:00 * gtirloni joined the channel
2018-04-02T12:22:42 * jhung joined the channel
2018-04-02T12:31:45 * michelled joined the channel
2018-04-02T12:35:43 * Bosmon7 joined the channel
2018-04-02T12:51:08 * mrtyler joined the channel
2018-04-02T12:51:17 * yuriy joined the channel
2018-04-02T12:54:25 * yuriy__ has quit
2018-04-02T12:57:35 * mrtyler has quit
2018-04-02T13:04:29 <dandimitrov> Hey Bosmon! We tried the updating Electron to version 1.8.4, but we stumbled upon a rather strange problem: TypeError: Invalid template for Menu
2018-04-02T13:04:34 <dandimitrov> That is thrown here: https://github.com/danailbd/gpii-app/blob/GPII-2894-distributed/src/main/menu.js#L69
2018-04-02T13:04:38 <dandimitrov> And is caused by a check here: https://github.com/electron/electron/blame/acb9a47d50ffc274445fa152321de4e65614907d/lib/browser/api/menu.js#L170
2018-04-02T13:05:26 * gtirloni has quit
2018-04-02T13:05:45 * gtirloni joined the channel
2018-04-02T13:06:01 <Bosmon7> dandimitrov - pretty interesting
2018-04-02T13:06:20 <Bosmon7> I don\'t think the check is strictly necessary - is this an issue caused by a change in the VM context structure?
2018-04-02T13:06:21 <dandimitrov> We know what causes it
2018-04-02T13:06:30 <Bosmon7> It should be sufficient to replace this check with fluid.isArrayable
2018-04-02T13:06:31 * simonjb joined the channel
2018-04-02T13:06:46 <Bosmon7> Oh sorry
2018-04-02T13:06:50 <Bosmon7> I see this is not in our code
2018-04-02T13:06:55 <dandimitrov> well, this code is in electron itself
2018-04-02T13:07:04 <dandimitrov> oh, yes
2018-04-02T13:07:07 <Bosmon7> Sorry I am on a small screen here :)
2018-04-02T13:08:36 <dandimitrov> No, problemo :)
2018-04-02T13:09:26 * stegru has quit
2018-04-02T13:14:40 * alanharnum joined the channel
2018-04-02T13:14:47 <dandimitrov> Bosmon7: There are two objects (array) that are causing the problem. This is one of them: https://github.com/danailbd/gpii-app/blob/GPII-2894-distributed/src/main/menu.js#L126 . Is Infusion trying some expansion on such options, causing change in the prototype constuctor object of its array properties?
2018-04-02T13:18:28 * cindyli joined the channel
2018-04-02T13:18:46 * mrtyler joined the channel
2018-04-02T13:20:00 <Bosmon7> dandimitrov - it shouldn\'t be - although part of the issue might be that the Array arises in a different VM context - since Infusion lives in its own one
2018-04-02T13:20:12 <Bosmon7> Could you check what the actual prototype constructor of the Array is?
2018-04-02T13:20:24 <Bosmon7> Does it still read "Array" but just one from a different context?
2018-04-02T13:20:30 <Bosmon7> Or has it been corrupted to "Object" or something else
2018-04-02T13:23:55 * stegru joined the channel
2018-04-02T13:31:05 * cindyli has quit
2018-04-02T13:32:24 * cindyli joined the channel
2018-04-02T13:33:21 * mrtyler has quit
2018-04-02T13:48:24 * yuriy__ joined the channel
2018-04-02T13:51:35 * yuriy has quit
2018-04-02T14:02:02 * michelled has quit
2018-04-02T14:04:43 * kavya joined the channel
2018-04-02T14:09:02 * georgitodorov has quit
2018-04-02T14:17:34 * clown joined the channel
2018-04-02T14:29:42 * gtirloni has quit
2018-04-02T14:30:10 * gtirloni joined the channel
2018-04-02T14:38:07 * alanharnum has quit
2018-04-02T14:39:15 <dandimitrov> I believe it is related to something strange that we previously struggled with and a simple case. Here\'s an example: https://pastebin.com/U9wAAppb
2018-04-02T14:39:52 <dandimitrov> Running the same code snippet in Node and the browser gives different results :/
2018-04-02T14:40:36 <dandimitrov> Bosmon7: And applying something like the latter, fixes our problem
2018-04-02T14:43:51 <Bosmon7> dandimitrov - yes, the issue is that the meaning of the symbol "Array" is dependent on the JS VM context
2018-04-02T14:44:05 <Bosmon7> For example in a browser, "Array" in one iframe is different to that in another
2018-04-02T14:44:21 <Bosmon7> And in node, Infusion\'s context is different to that of the outer node process
2018-04-02T14:44:47 <Bosmon7> This is why our "fluid.isArrayable" test is as permissive as it is, but other libraries are not as careful
2018-04-02T14:46:02 <dandimitrov> I understand... Previously the same check in electron was done using `Array.isArray` which didn\'t caused any troubles...
2018-04-02T14:48:04 <dandimitrov> Do you have any ideas on how we could work around this :?
2018-04-02T14:48:15 * yuriy joined the channel
2018-04-02T14:49:20 <dandimitrov> Bosmon7: Or we could stick with a fix like the one in the example above...
2018-04-02T14:51:59 * yuriy__ has quit
2018-04-02T14:55:24 * danayo joined the channel
2018-04-02T15:09:48 * michelled joined the channel
2018-04-02T15:14:19 <gmoss> fluid-everyone: I\'ve had a bit of a late start today after having been away for the better part of a week. I\'m on my way into the IDRC but I\'m not likely to make it in time for standup. My daily update: I have a large number of emails to catch up on and I believe some notes from an i18n discussion to review ahead of tomorrow. After that I\'ll be diving back into the SJRK work. Perhaps I\'ll discover what progress has been made
2018-04-02T15:14:19 <gmoss> in my absence :)
2018-04-02T15:22:47 * alanharnum joined the channel
2018-04-02T15:23:59 * kasparnet joined the channel
2018-04-02T15:29:26 * yuriy__ joined the channel
2018-04-02T15:32:35 * yuriy has quit
2018-04-02T15:43:15 * yuriy joined the channel
2018-04-02T15:46:37 * yuriy__ has quit
2018-04-02T15:46:37 * jessm joined the channel
2018-04-02T15:48:42 * colinclark joined the channel
2018-04-02T15:50:08 <Bosmon7> dandimitrov - I suggest using some more general utility to "recontextualise" a block of options if required, rather than just ad-hoc fixing one array
2018-04-02T15:50:42 <Bosmon7> You could write a general gpii.app.recontextualise, or if there is no interestingly typed material within the options you could even just JSON.stringify and parse
2018-04-02T15:51:32 <Bosmon7> But a general utility would perform better and also be safer
2018-04-02T15:52:01 <Bosmon7> At each level if can make a fluid.isPlainObject check and then a fluid.isArrayable check, and in the latter case apply your prototype.slice action
2018-04-02T16:19:01 * cindyli has quit
2018-04-02T16:21:23 * cindyli joined the channel
2018-04-02T16:24:08 * jhung joined the channel
2018-04-02T16:27:21 * danayo has quit
2018-04-02T16:59:52 * danayo joined the channel
2018-04-02T17:04:46 * alanharnum has quit
2018-04-02T17:10:51 * alanharnum joined the channel
2018-04-02T17:13:44 <michelled> alanharnum, gmoss: when is a good time to meet today?
2018-04-02T17:13:56 <alanharnum> michelled: 2:30 works for me
2018-04-02T17:14:11 <gmoss> alanharnum michelled 2:30 is good for me as well
2018-04-02T17:14:20 <michelled> great!
2018-04-02T17:37:34 * alanharnum has quit
2018-04-02T17:43:04 * michelled has quit
2018-04-02T17:45:27 <cindyli> simonjb: can you have a look at this wiki page i created for capture tool APIs when you have time - https://wiki.gpii.net/w/Capture_Tool_APIs? it includes some oauth2 grant APIs that we talked last week.
2018-04-02T17:45:50 <simonjb> will do cindyli
2018-04-02T17:45:55 <cindyli> thanks, simonjb
2018-04-02T17:52:30 * amatas has quit
2018-04-02T18:04:00 * michelled joined the channel
2018-04-02T18:08:30 * alanharnum2 joined the channel
2018-04-02T18:31:57 * Sunny0794 joined the channel
2018-04-02T18:33:55 <simonjb> hi cindyli, I had a look at your Capture Tool APIs page
2018-04-02T18:34:01 <simonjb> I had some thoughts/comments
2018-04-02T18:34:18 <cindyli> simonjb: vidyo call?
2018-04-02T18:34:35 <simonjb> cindyli: good for me, let me just start it up
2018-04-02T18:34:45 <cindyli> ok, call me when you are ready
2018-04-02T18:50:24 <Bosmon7> Hi there amatas[m] - I\'m looking to merge the following pulls of kasparnet -
2018-04-02T18:50:26 <Bosmon7> https://ci.gpii.net/job/universal-tests/759/
2018-04-02T18:51:07 <Bosmon7> https://github.com/GPII/universal/pull/592
2018-04-02T18:51:17 <Bosmon7> But there is a failure in the "production tests"
2018-04-02T18:51:33 <Bosmon7> Do either you or he know what needs to be updated in order to solve this?
2018-04-02T18:52:14 <kasparnet> this is the one with the renamed common terms, right?
2018-04-02T18:52:41 <kasparnet> so the issue, amatas[m], is that I\'ve modified some of the NP sets (renamed some common terms)
2018-04-02T18:53:09 <kasparnet> and one of these NP sets, the production tests are dependent on
2018-04-02T18:53:39 <kasparnet> but since the production tests are using preferences.gpii.net (where the NP set isn\'t updated yet), the tests are failing
2018-04-02T18:54:06 <kasparnet> and updating the NP set on production server would mean that all the other pull requests would fail
2018-04-02T18:55:28 <kasparnet> Bosmon7, amatas[m] : Thinking back to the last meeting in toronto, I seem to remember me having committed a pretty much identical crime, and that we found a great solution for it that amongst other gtirloni and perhaps amatas[m] made some sort of fix for
2018-04-02T18:56:00 <Bosmon7> ok
2018-04-02T18:56:09 <kasparnet> spinning up two VMs and pointing the production tests "production.gpii.net" url to the test VM
2018-04-02T18:56:37 <Bosmon7> I was thinking/imagining that this test had been rewritten already to not point to the genuine production URLs, but instead to another container implementing a local instance of it
2018-04-02T18:56:38 <kasparnet> ... but perhaps we didn\'t actually manage to tie up all the loose ends for that to work
2018-04-02T18:56:41 <Bosmon7> But perhaps this was never done
2018-04-02T18:56:56 <kasparnet> yeah, I\'m not sure about that either, Bosmon7
2018-04-02T18:57:04 <Bosmon7> I\'m looking at the failure transcript here: https://ci.gpii.net/job/universal-node-production-tests/730/console
2018-04-02T18:57:25 <Bosmon7> And by my reading, the failed request holds a reference to localhost
2018-04-02T18:57:35 <gtirloni> that\'s right, it was done
2018-04-02T18:57:51 <Bosmon7> "GPII_FLOWMANAGER_PREFERENCES_URL=http://localhost:9081/preferences/%userToken "
2018-04-02T18:57:58 <Bosmon7> ok, that\'s great
2018-04-02T18:58:10 <Bosmon7> Thanks, gtirloni
2018-04-02T18:58:26 <gtirloni> there were some fixes that alfredo committed to fix that connection reset error on couchdb
2018-04-02T18:58:26 <kasparnet> Bosmon7, oh yeah, I see
2018-04-02T18:58:26 <Bosmon7> But I don\'t seem to be able to see any more detailed logs about what the failure is
2018-04-02T18:58:27 <gtirloni> https://github.com/GPII/universal/commits/master/scripts/vagrantCloudBasedContainers.sh
2018-04-02T18:58:47 <Bosmon7> Yes, we moved from wget to curl
2018-04-02T18:59:17 <Bosmon7> So I wonder what we/kasparnet need to do to deal with this failure
2018-04-02T18:59:27 <kasparnet> hmm... I seemed to remember stepping through the error and finding the issue that I described above, but that might just be the crack talking
2018-04-02T18:59:50 <Bosmon7> It seems we actually get a "connection reset"
2018-04-02T18:59:52 <Bosmon7> But I wonder why
2018-04-02T18:59:53 <gtirloni> maybe merge master?
2018-04-02T18:59:55 <Bosmon7> "curl: (56) Recv failure: Connection reset by peer"
2018-04-02T19:00:02 <Bosmon7> I believe kasparnet is fully merged up already
2018-04-02T19:00:07 <gtirloni> oh
2018-04-02T19:00:54 <Bosmon7> But perhaps he isn\'t
2018-04-02T19:01:47 * gtirloni disappointingly looks at kasparnet
2018-04-02T19:01:58 <Bosmon7> kasparnet - could you check if you have taken in the script updates that gtirloni referenced?
'

